import{r as V,a as By,u as ql,b as He,L as tt,c as Mm,d as Lm,R as Vm,B as Gy,e as Hy,f as Se}from"./vendor-t_EyT9KX.js";import{z as le,G as tn,B as Oe,M as rs,S as Bl,a as zy,C as Ki,b as Wy,c as Jy,U as Zu,d as Ky,L as Yy,H as Qy,e as Gl,f as Je,F as ls,T as Ht,g as cs,A as vt,m as J,P as Ut,h as Hl,i as Cn,j as Tt,k as Xy,l as Zy,n as Um,E as uo,o as zs,p as zl,q as It,Z as jm,r as ev,s as tv,t as nv,X as kn,u as us,v as ed,w as sv,D as Wl,x as rv,y as iv,I as ov,R as av,J as tr,K as Fm,N as $m,O as lv,Q as td,V as cv,W as uv,Y as ho,_ as dv,$ as Yr,a0 as Ws,a1 as nn,a2 as hv,a3 as fv,a4 as mv,a5 as pv,a6 as fo,a7 as ds,a8 as nd,a9 as gv,aa as yv,ab as Om,ac as vv,ad as xv,ae as _v,af as sd,ag as bv}from"./ui-ILpAKIBT.js";import{c as ui}from"./utils-BnUyoSGJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var qm={exports:{}},Vo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv=V,Tv=Symbol.for("react.element"),Ev=Symbol.for("react.fragment"),Iv=Object.prototype.hasOwnProperty,Cv=wv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Av={key:!0,ref:!0,__self:!0,__source:!0};function Bm(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Iv.call(e,s)&&!Av.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Tv,type:n,key:i,ref:o,props:r,_owner:Cv.current}}Vo.Fragment=Ev;Vo.jsx=Bm;Vo.jsxs=Bm;qm.exports=Vo;var a=qm.exports,Gm,rd=By;Gm=rd.createRoot,rd.hydrateRoot;const Sv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCWdpMhzziFi7S0OpaPYlMXYtKTWDKZlaU",VITE_FIREBASE_APP_ID:"1:872754095925:web:ee14fb2d10b7e9f11a8e7c",VITE_FIREBASE_AUTH_DOMAIN:"vp-pro-aebbc.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"872754095925",VITE_FIREBASE_PROJECT_ID:"vp-pro-aebbc",VITE_FIREBASE_STORAGE_BUCKET:"gs://vp-pro-aebbc.firebasestorage.app",VITE_GOOGLE_CLOUD_API_KEY:"AIzaSyAncE2TfOjhaU8SxlijCUg7mTD7GoS2oho",VITE_RAZORPAY_KEY_ID:"rzp_test_ReF3vGPFrS4uey",VITE_YOUTUBE_API_KEY:"AIzaSyAICQdNGP-JPmsp-eysSVMdLl78EYRLQKg"};function Nv(n,e){let t;try{t=n()}catch{return}return{getItem:r=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=t.getItem(r))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,i)=>t.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>t.removeItem(r)}}const Qr=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return Qr(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Qr(s)(t)}}}},Rv=(n,e)=>(t,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,k)=>({...k,...C}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return n((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...C)},s,r);const m=Qr(i.serialize),p=()=>{const C=i.partialize({...s()});let k;const R=m({state:C,version:i.version}).then(P=>u.setItem(i.name,P)).catch(P=>{k=P});if(k)throw k;return R},g=r.setState;r.setState=(C,k)=>{g(C,k),p()};const x=n((...C)=>{t(...C),p()},s,r);let b;const T=()=>{var C;if(!u)return;o=!1,l.forEach(R=>R(s()));const k=((C=i.onRehydrateStorage)==null?void 0:C.call(i,s()))||void 0;return Qr(u.getItem.bind(u))(i.name).then(R=>{if(R)return i.deserialize(R)}).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==i.version){if(i.migrate)return i.migrate(R.state,R.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return R.state}).then(R=>{var P;return b=i.merge(R,(P=s())!=null?P:x),t(b,!0),p()}).then(()=>{k==null||k(b,void 0),o=!0,c.forEach(R=>R(b))}).catch(R=>{k==null||k(void 0,R)})};return r.persist={setOptions:C=>{i={...i,...C},C.getStorage&&(u=C.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>T(),hasHydrated:()=>o,onHydrate:C=>(l.add(C),()=>{l.delete(C)}),onFinishHydration:C=>(c.add(C),()=>{c.delete(C)})},T(),b||x},Pv=(n,e)=>(t,s,r)=>{let i={storage:Nv(()=>localStorage),partialize:T=>T,version:0,merge:(T,C)=>({...C,...T}),...e},o=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return n((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...T)},s,r);const m=()=>{const T=i.partialize({...s()});return u.setItem(i.name,{state:T,version:i.version})},p=r.setState;r.setState=(T,C)=>{p(T,C),m()};const g=n((...T)=>{t(...T),m()},s,r);r.getInitialState=()=>g;let x;const b=()=>{var T,C;if(!u)return;o=!1,l.forEach(R=>{var P;return R((P=s())!=null?P:g)});const k=((C=i.onRehydrateStorage)==null?void 0:C.call(i,(T=s())!=null?T:g))||void 0;return Qr(u.getItem.bind(u))(i.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==i.version){if(i.migrate)return[!0,i.migrate(R.state,R.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var P;const[L,U]=R;if(x=i.merge(U,(P=s())!=null?P:g),t(x,!0),L)return m()}).then(()=>{k==null||k(x,void 0),x=s(),o=!0,c.forEach(R=>R(x))}).catch(R=>{k==null||k(void 0,R)})};return r.persist={setOptions:T=>{i={...i,...T},T.storage&&(u=T.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:T=>(l.add(T),()=>{l.delete(T)}),onFinishHydration:T=>(c.add(T),()=>{c.delete(T)})},i.skipHydration||b(),x||g},kv=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Sv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Rv(n,e)):Pv(n,e),di=kv,De=ui()(di(n=>({isDarkMode:!1,toggleDarkMode:()=>n(e=>({isDarkMode:!e.isDarkMode}))}),{name:"theme-storage"})),id={en:{courses:"Courses",mockInterview:"Mock Interview",softSkills:"Soft Skills",searchPlaceholder:"Search courses...",learn:"LEARN",grow:"GROW",succeed:"SUCCEED",heroDescription:"Master new skills with our comprehensive e-learning platform. From coding to soft skills, we've got you covered.",startLearning:"Start Learning",tryMockInterview:"Try Mock Interview",featuredCourses:"Featured Courses",featuredCoursesDescription:"Start your learning journey with our top-rated courses",viewCourse:"View Course",coursesCount:"Courses",studentsCount:"Students",certificatesCount:"Certificates",successRate:"Success Rate",allCourses:"All Courses",coursesDescription:"Discover and enroll in courses that match your learning goals",viewDetails:"View Details",enroll:"Enroll",sortBy:"Sort by:",filters:"Filters",clearAll:"Clear All",noCoursesFound:"No courses found",tryAdjustingSearch:"Try adjusting your search criteria",backToCourses:"Back to Courses",courseContent:"Course Content",continueLearning:"Continue Learning",whatsIncluded:"What's included:",videoLessons:"video lessons",lifetimeAccess:"Lifetime access",certificateOfCompletion:"Certificate of completion",mobileAndDesktopAccess:"Mobile and desktop access",downloadResources:"Download Resources",mockInterviewPractice:"Mock Interview Practice",mockInterviewDescription:"Practice with AI-powered mock interviews and get instant feedback",technicalInterview:"Technical Interview",behavioralInterview:"Behavioral Interview",leadershipInterview:"Leadership Interview",startInterview:"Start Interview",question:"Question",of:"of",complete:"Complete",previous:"Previous",next:"Next",finish:"Finish",softSkillsDevelopment:"Soft Skills Development",softSkillsDescription:"Enhance your interpersonal skills and professional development",communication:"Communication",leadership:"Leadership",timeManagement:"Time Management",problemSolving:"Problem Solving",emotionalIntelligence:"Emotional Intelligence",adaptability:"Adaptability",backToSkills:"Back to Skills",progress:"Progress",modulesCompleted:"modules completed",welcomeBack:"Welcome back!",continueYourJourney:"Continue your learning journey",enrolledCourses:"Enrolled Courses",overallProgress:"Overall Progress",studyTime:"Study Time",achievements:"Achievements",recentActivity:"Recent Activity",learningGoals:"Learning Goals",level:"Level",beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced",duration:"Duration",students:"Students",lessons:"Lessons",rating:"Rating",price:"Price",instructor:"Instructor",category:"Category",completed:"Completed",start:"Start",all:"All",webDevelopment:"Web Development",dataScience:"Data Science",mobileDevelopment:"Mobile Development",design:"Design",business:"Business",marketing:"Marketing",finance:"Finance",mostPopular:"Most Popular",highestRated:"Highest Rated",priceLowToHigh:"Price: Low to High",priceHighToLow:"Price: High to Low",newestFirst:"Newest First",minimumRating:"Minimum Rating",any:"Any",gridView:"Grid View",listView:"List View",showFilters:"Show Filters",hideFilters:"Hide Filters",quickFilters:"Quick Filters",advancedFilters:"Advanced Filters",priceRange:"Price Range",free:"Free",paid:"Paid",under25:"Under $25",under50:"Under $50",under100:"Under $100",over100:"Over $100",question1:"Tell me about yourself and your background.",question2:"What are your greatest strengths?",question3:"Describe a challenging project you worked on and how you overcame it.",question4:"Where do you see yourself in 5 years?",question5:"Why do you want to work for our company?",question6:"How do you handle stress and pressure?",question7:"Describe a time when you had to work with a difficult team member.",question8:"What is your greatest weakness and how do you work on it?",question9:"How do you stay updated with industry trends?",question10:"Do you have any questions for us?",technicalDescription:"Focus on technical skills and problem-solving",behavioralDescription:"Assess soft skills and cultural fit",leadershipDescription:"Evaluate leadership and management skills",communicationDescription:"Master verbal and written communication skills",leadershipSkillsDescription:"Develop leadership and team management skills",timeManagementDescription:"Learn to prioritize and manage your time effectively",problemSolvingDescription:"Enhance critical thinking and problem-solving abilities",emotionalIntelligenceDescription:"Develop self-awareness and emotional management",adaptabilityDescription:"Learn to thrive in changing environments",activeListening:"Active Listening",publicSpeaking:"Public Speaking",writtenCommunication:"Written Communication",nonVerbalCommunication:"Non-verbal Communication",teamBuilding:"Team Building",decisionMaking:"Decision Making",conflictResolution:"Conflict Resolution",motivatingOthers:"Motivating Others",prioritizationTechniques:"Prioritization Techniques",goalSetting:"Goal Setting",delegationSkills:"Delegation Skills",workLifeBalance:"Work-Life Balance",criticalThinking:"Critical Thinking",creativeSolutions:"Creative Solutions",riskAssessment:"Risk Assessment",selfAwareness:"Self-Awareness",selfRegulation:"Self-Regulation",empathy:"Empathy",socialSkills:"Social Skills",changeManagement:"Change Management",learningAgility:"Learning Agility",resilience:"Resilience",innovationMindset:"Innovation Mindset",completeWebDevBootcamp:"Complete Web Development Bootcamp",completedLesson3:"Completed lesson 3",mockInterviewPracticeActivity:"Mock Interview Practice",completedTechnicalInterview:"Completed technical interview",communicationSkills:"Communication Skills",completedActiveListening:"Completed Active Listening module",dataScienceWithPython:"Data Science with Python",startedLesson5:"Started lesson 5",hoursAgo:"hours ago",dayAgo:"day ago",daysAgo:"days ago",firstCourse:"First Course",completedFirstCourse:"Completed your first course",interviewReady:"Interview Ready",completed5MockInterviews:"Completed 5 mock interviews",skillMaster:"Skill Master",completed3SoftSkillModules:"Completed 3 soft skill modules",learningStreak:"Learning Streak",daysConsecutiveLearning:"days of consecutive learning"},es:{courses:"Cursos",mockInterview:"Entrevista de PrÃ¡ctica",softSkills:"Habilidades Blandas",searchPlaceholder:"Buscar cursos...",learn:"APRENDE",grow:"CRECE",succeed:"TRIUNFA",heroDescription:"Domina nuevas habilidades con nuestra plataforma integral de e-learning. Desde programaciÃ³n hasta habilidades blandas, te tenemos cubierto.",startLearning:"Comenzar a Aprender",tryMockInterview:"Probar Entrevista",featuredCourses:"Cursos Destacados",featuredCoursesDescription:"Comienza tu viaje de aprendizaje con nuestros cursos mejor calificados",viewCourse:"Ver Curso",coursesCount:"Cursos",studentsCount:"Estudiantes",certificatesCount:"Certificados",successRate:"Tasa de Ã‰xito",allCourses:"Todos los Cursos",coursesDescription:"Descubre e inscrÃ­bete en cursos que coincidan con tus objetivos de aprendizaje",viewDetails:"Ver Detalles",enroll:"Inscribirse",sortBy:"Ordenar por:",filters:"Filtros",clearAll:"Limpiar Todo",noCoursesFound:"No se encontraron cursos",tryAdjustingSearch:"Intenta ajustar tus criterios de bÃºsqueda",backToCourses:"Volver a Cursos",courseContent:"Contenido del Curso",continueLearning:"Continuar Aprendiendo",whatsIncluded:"QuÃ© estÃ¡ incluido:",videoLessons:"lecciones de video",lifetimeAccess:"Acceso de por vida",certificateOfCompletion:"Certificado de finalizaciÃ³n",mobileAndDesktopAccess:"Acceso mÃ³vil y de escritorio",downloadResources:"Descargar Recursos",mockInterviewPractice:"PrÃ¡ctica de Entrevista",mockInterviewDescription:"Practica con entrevistas simuladas impulsadas por IA y obtÃ©n retroalimentaciÃ³n instantÃ¡nea",technicalInterview:"Entrevista TÃ©cnica",behavioralInterview:"Entrevista Conductual",leadershipInterview:"Entrevista de Liderazgo",startInterview:"Comenzar Entrevista",question:"Pregunta",of:"de",complete:"Completo",previous:"Anterior",next:"Siguiente",finish:"Finalizar",softSkillsDevelopment:"Desarrollo de Habilidades Blandas",softSkillsDescription:"Mejora tus habilidades interpersonales y desarrollo profesional",communication:"ComunicaciÃ³n",leadership:"Liderazgo",timeManagement:"GestiÃ³n del Tiempo",problemSolving:"ResoluciÃ³n de Problemas",emotionalIntelligence:"Inteligencia Emocional",adaptability:"Adaptabilidad",backToSkills:"Volver a Habilidades",progress:"Progreso",modulesCompleted:"mÃ³dulos completados",welcomeBack:"Â¡Bienvenido de vuelta!",continueYourJourney:"ContinÃºa tu viaje de aprendizaje",enrolledCourses:"Cursos Inscritos",overallProgress:"Progreso General",studyTime:"Tiempo de Estudio",achievements:"Logros",recentActivity:"Actividad Reciente",learningGoals:"Objetivos de Aprendizaje",level:"Nivel",beginner:"Principiante",intermediate:"Intermedio",advanced:"Avanzado",duration:"DuraciÃ³n",students:"Estudiantes",lessons:"Lecciones",rating:"CalificaciÃ³n",price:"Precio",instructor:"Instructor",category:"CategorÃ­a",completed:"Completado",start:"Comenzar",all:"Todos",webDevelopment:"Desarrollo Web",dataScience:"Ciencia de Datos",mobileDevelopment:"Desarrollo MÃ³vil",design:"DiseÃ±o",business:"Negocios",marketing:"Marketing",finance:"Finanzas",mostPopular:"MÃ¡s Popular",highestRated:"Mejor Calificado",priceLowToHigh:"Precio: Bajo a Alto",priceHighToLow:"Precio: Alto a Bajo",newestFirst:"MÃ¡s Recientes",minimumRating:"CalificaciÃ³n MÃ­nima",any:"Cualquiera",gridView:"Vista de CuadrÃ­cula",listView:"Vista de Lista",showFilters:"Mostrar Filtros",hideFilters:"Ocultar Filtros",quickFilters:"Filtros RÃ¡pidos",advancedFilters:"Filtros Avanzados",priceRange:"Rango de Precio",free:"Gratis",paid:"De Pago",under25:"Menos de $25",under50:"Menos de $50",under100:"Menos de $100",over100:"MÃ¡s de $100",question1:"CuÃ©ntame sobre ti y tu experiencia.",question2:"Â¿CuÃ¡les son tus mayores fortalezas?",question3:"Describe un proyecto desafiante en el que trabajaste y cÃ³mo lo superaste.",question4:"Â¿DÃ³nde te ves en 5 aÃ±os?",question5:"Â¿Por quÃ© quieres trabajar para nuestra empresa?",question6:"Â¿CÃ³mo manejas el estrÃ©s y la presiÃ³n?",question7:"Describe una vez que tuviste que trabajar con un miembro difÃ­cil del equipo.",question8:"Â¿CuÃ¡l es tu mayor debilidad y cÃ³mo trabajas en ella?",question9:"Â¿CÃ³mo te mantienes actualizado con las tendencias de la industria?",question10:"Â¿Tienes alguna pregunta para nosotros?",technicalDescription:"EnfÃ³cate en habilidades tÃ©cnicas y resoluciÃ³n de problemas",behavioralDescription:"EvalÃºa habilidades blandas y ajuste cultural",leadershipDescription:"EvalÃºa habilidades de liderazgo y gestiÃ³n",communicationDescription:"Domina las habilidades de comunicaciÃ³n verbal y escrita",leadershipSkillsDescription:"Desarrolla habilidades de liderazgo y gestiÃ³n de equipos",timeManagementDescription:"Aprende a priorizar y gestionar tu tiempo efectivamente",problemSolvingDescription:"Mejora el pensamiento crÃ­tico y las habilidades de resoluciÃ³n de problemas",emotionalIntelligenceDescription:"Desarrolla autoconciencia y gestiÃ³n emocional",adaptabilityDescription:"Aprende a prosperar en entornos cambiantes",activeListening:"Escucha Activa",publicSpeaking:"Oratoria",writtenCommunication:"ComunicaciÃ³n Escrita",nonVerbalCommunication:"ComunicaciÃ³n No Verbal",teamBuilding:"ConstrucciÃ³n de Equipos",decisionMaking:"Toma de Decisiones",conflictResolution:"ResoluciÃ³n de Conflictos",motivatingOthers:"Motivar a Otros",prioritizationTechniques:"TÃ©cnicas de PriorizaciÃ³n",goalSetting:"Establecimiento de Objetivos",delegationSkills:"Habilidades de DelegaciÃ³n",workLifeBalance:"Equilibrio Trabajo-Vida",criticalThinking:"Pensamiento CrÃ­tico",creativeSolutions:"Soluciones Creativas",riskAssessment:"EvaluaciÃ³n de Riesgos",selfAwareness:"Autoconciencia",selfRegulation:"AutorregulaciÃ³n",empathy:"EmpatÃ­a",socialSkills:"Habilidades Sociales",changeManagement:"GestiÃ³n del Cambio",learningAgility:"Agilidad de Aprendizaje",resilience:"Resiliencia",innovationMindset:"Mentalidad de InnovaciÃ³n"},fr:{courses:"Cours",mockInterview:"Entretien d'EntraÃ®nement",softSkills:"CompÃ©tences Douces",searchPlaceholder:"Rechercher des cours...",learn:"APPRENDS",grow:"GRANDIS",succeed:"RÃ‰USSIS",heroDescription:"MaÃ®trisez de nouvelles compÃ©tences avec notre plateforme d'apprentissage en ligne complÃ¨te. Du codage aux compÃ©tences douces, nous vous avons couvert.",startLearning:"Commencer Ã  Apprendre",tryMockInterview:"Essayer l'Entretien",featuredCourses:"Cours en Vedette",featuredCoursesDescription:"Commencez votre parcours d'apprentissage avec nos cours les mieux notÃ©s",viewCourse:"Voir le Cours",coursesCount:"Cours",studentsCount:"Ã‰tudiants",certificatesCount:"Certificats",successRate:"Taux de RÃ©ussite",allCourses:"Tous les Cours",coursesDescription:"DÃ©couvrez et inscrivez-vous Ã  des cours qui correspondent Ã  vos objectifs d'apprentissage",viewDetails:"Voir les DÃ©tails",enroll:"S'inscrire",sortBy:"Trier par:",filters:"Filtres",clearAll:"Tout Effacer",noCoursesFound:"Aucun cours trouvÃ©",tryAdjustingSearch:"Essayez d'ajuster vos critÃ¨res de recherche",backToCourses:"Retour aux Cours",courseContent:"Contenu du Cours",continueLearning:"Continuer l'Apprentissage",whatsIncluded:"Ce qui est inclus:",videoLessons:"leÃ§ons vidÃ©o",lifetimeAccess:"AccÃ¨s Ã  vie",certificateOfCompletion:"Certificat de rÃ©ussite",mobileAndDesktopAccess:"AccÃ¨s mobile et bureau",downloadResources:"TÃ©lÃ©charger les Ressources",mockInterviewPractice:"Pratique d'Entretien",mockInterviewDescription:"Pratiquez avec des entretiens simulÃ©s alimentÃ©s par l'IA et obtenez des commentaires instantanÃ©s",technicalInterview:"Entretien Technique",behavioralInterview:"Entretien Comportemental",leadershipInterview:"Entretien de Leadership",startInterview:"Commencer l'Entretien",question:"Question",of:"de",complete:"Complet",previous:"PrÃ©cÃ©dent",next:"Suivant",finish:"Terminer",softSkillsDevelopment:"DÃ©veloppement des CompÃ©tences Douces",softSkillsDescription:"AmÃ©liorez vos compÃ©tences interpersonnelles et votre dÃ©veloppement professionnel",communication:"Communication",leadership:"Leadership",timeManagement:"Gestion du Temps",problemSolving:"RÃ©solution de ProblÃ¨mes",emotionalIntelligence:"Intelligence Ã‰motionnelle",adaptability:"AdaptabilitÃ©",backToSkills:"Retour aux CompÃ©tences",progress:"ProgrÃ¨s",modulesCompleted:"modules terminÃ©s",welcomeBack:"Bon retour!",continueYourJourney:"Continuez votre parcours d'apprentissage",enrolledCourses:"Cours Inscrits",overallProgress:"ProgrÃ¨s Global",studyTime:"Temps d'Ã‰tude",achievements:"RÃ©alisations",recentActivity:"ActivitÃ© RÃ©cente",learningGoals:"Objectifs d'Apprentissage",level:"Niveau",beginner:"DÃ©butant",intermediate:"IntermÃ©diaire",advanced:"AvancÃ©",duration:"DurÃ©e",students:"Ã‰tudiants",lessons:"LeÃ§ons",rating:"Note",price:"Prix",instructor:"Instructeur",category:"CatÃ©gorie",completed:"TerminÃ©",start:"Commencer",all:"Tous",webDevelopment:"DÃ©veloppement Web",dataScience:"Science des DonnÃ©es",mobileDevelopment:"DÃ©veloppement Mobile",design:"Design",business:"Business",marketing:"Marketing",finance:"Finance",mostPopular:"Plus Populaire",highestRated:"Mieux NotÃ©",priceLowToHigh:"Prix: Bas Ã  Ã‰levÃ©",priceHighToLow:"Prix: Ã‰levÃ© Ã  Bas",newestFirst:"Plus RÃ©cent",minimumRating:"Note Minimale",any:"N'importe",gridView:"Vue Grille",listView:"Vue Liste",showFilters:"Afficher Filtres",hideFilters:"Masquer Filtres",quickFilters:"Filtres Rapides",advancedFilters:"Filtres AvancÃ©s",priceRange:"Gamme de Prix",free:"Gratuit",paid:"Payant",under25:"Moins de 25$",under50:"Moins de 50$",under100:"Moins de 100$",over100:"Plus de 100$",question1:"Parlez-moi de vous et de votre parcours.",question2:"Quelles sont vos plus grandes forces?",question3:"DÃ©crivez un projet difficile sur lequel vous avez travaillÃ© et comment vous l'avez surmontÃ©.",question4:"OÃ¹ vous voyez-vous dans 5 ans?",question5:"Pourquoi voulez-vous travailler pour notre entreprise?",question6:"Comment gÃ©rez-vous le stress et la pression?",question7:"DÃ©crivez un moment oÃ¹ vous avez dÃ» travailler avec un membre d'Ã©quipe difficile.",question8:"Quelle est votre plus grande faiblesse et comment y travaillez-vous?",question9:"Comment restez-vous Ã  jour avec les tendances de l'industrie?",question10:"Avez-vous des questions pour nous?",technicalDescription:"Concentrez-vous sur les compÃ©tences techniques et la rÃ©solution de problÃ¨mes",behavioralDescription:"Ã‰valuez les compÃ©tences douces et l'ajustement culturel",leadershipDescription:"Ã‰valuez les compÃ©tences de leadership et de gestion",communicationDescription:"MaÃ®trisez les compÃ©tences de communication verbale et Ã©crite",leadershipSkillsDescription:"DÃ©veloppez les compÃ©tences de leadership et de gestion d'Ã©quipe",timeManagementDescription:"Apprenez Ã  prioriser et gÃ©rer votre temps efficacement",problemSolvingDescription:"AmÃ©liorez la pensÃ©e critique et les capacitÃ©s de rÃ©solution de problÃ¨mes",emotionalIntelligenceDescription:"DÃ©veloppez la conscience de soi et la gestion Ã©motionnelle",adaptabilityDescription:"Apprenez Ã  prospÃ©rer dans des environnements changeants",activeListening:"Ã‰coute Active",publicSpeaking:"Prise de Parole en Public",writtenCommunication:"Communication Ã‰crite",nonVerbalCommunication:"Communication Non Verbale",teamBuilding:"Construction d'Ã‰quipe",decisionMaking:"Prise de DÃ©cision",conflictResolution:"RÃ©solution de Conflits",motivatingOthers:"Motiver les Autres",prioritizationTechniques:"Techniques de Priorisation",goalSetting:"Fixation d'Objectifs",delegationSkills:"CompÃ©tences de DÃ©lÃ©gation",workLifeBalance:"Ã‰quilibre Travail-Vie",criticalThinking:"PensÃ©e Critique",creativeSolutions:"Solutions CrÃ©atives",riskAssessment:"Ã‰valuation des Risques",selfAwareness:"Conscience de Soi",selfRegulation:"AutorÃ©gulation",empathy:"Empathie",socialSkills:"CompÃ©tences Sociales",changeManagement:"Gestion du Changement",learningAgility:"AgilitÃ© d'Apprentissage",resilience:"RÃ©silience",innovationMindset:"MentalitÃ© d'Innovation"},hi:{courses:"à¤•à¥‹à¤°à¥à¤¸",mockInterview:"à¤®à¥‰à¤• à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚",softSkills:"à¤¸à¥‰à¤«à¥à¤Ÿ à¤¸à¥à¤•à¤¿à¤²à¥à¤¸",searchPlaceholder:"à¤•à¥‹à¤°à¥à¤¸ à¤–à¥‹à¤œà¥‡à¤‚...",learn:"à¤¸à¥€à¤–à¥‡à¤‚",grow:"à¤¬à¤¢à¤¼à¥‡à¤‚",succeed:"à¤¸à¤«à¤² à¤¹à¥‹à¤‚",heroDescription:"à¤¹à¤®à¤¾à¤°à¥‡ à¤µà¥à¤¯à¤¾à¤ªà¤• à¤ˆ-à¤²à¤°à¥à¤¨à¤¿à¤‚à¤— à¤ªà¥à¤²à¥‡à¤Ÿà¤«à¥‰à¤°à¥à¤® à¤•à¥‡ à¤¸à¤¾à¤¥ à¤¨à¤ à¤•à¥Œà¤¶à¤² à¤®à¥‡à¤‚ à¤®à¤¹à¤¾à¤°à¤¤ à¤¹à¤¾à¤¸à¤¿à¤² à¤•à¤°à¥‡à¤‚à¥¤ à¤•à¥‹à¤¡à¤¿à¤‚à¤— à¤¸à¥‡ à¤²à¥‡à¤•à¤° à¤¸à¥‰à¤«à¥à¤Ÿ à¤¸à¥à¤•à¤¿à¤²à¥à¤¸ à¤¤à¤•, à¤¹à¤®à¤¾à¤°à¥‡ à¤ªà¤¾à¤¸ à¤¸à¤¬ à¤•à¥à¤› à¤¹à¥ˆà¥¤",startLearning:"à¤¸à¥€à¤–à¤¨à¤¾ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚",tryMockInterview:"à¤®à¥‰à¤• à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚ à¤†à¤œà¤®à¤¾à¤à¤‚",featuredCourses:"à¤µà¤¿à¤¶à¥‡à¤· à¤•à¥‹à¤°à¥à¤¸",featuredCoursesDescription:"à¤¹à¤®à¤¾à¤°à¥‡ à¤¸à¤°à¥à¤µà¥‹à¤šà¥à¤š à¤°à¥‡à¤Ÿà¥‡à¤¡ à¤•à¥‹à¤°à¥à¤¸ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤…à¤ªà¤¨à¥€ à¤¸à¥€à¤–à¤¨à¥‡ à¤•à¥€ à¤¯à¤¾à¤¤à¥à¤°à¤¾ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚",viewCourse:"à¤•à¥‹à¤°à¥à¤¸ à¤¦à¥‡à¤–à¥‡à¤‚",coursesCount:"à¤•à¥‹à¤°à¥à¤¸",studentsCount:"à¤›à¤¾à¤¤à¥à¤°",certificatesCount:"à¤ªà¥à¤°à¤®à¤¾à¤£à¤ªà¤¤à¥à¤°",successRate:"à¤¸à¤«à¤²à¤¤à¤¾ à¤¦à¤°",allCourses:"à¤¸à¤­à¥€ à¤•à¥‹à¤°à¥à¤¸",coursesDescription:"à¤…à¤ªà¤¨à¥‡ à¤¸à¥€à¤–à¤¨à¥‡ à¤•à¥‡ à¤²à¤•à¥à¤·à¥à¤¯à¥‹à¤‚ à¤¸à¥‡ à¤®à¥‡à¤² à¤–à¤¾à¤¨à¥‡ à¤µà¤¾à¤²à¥‡ à¤•à¥‹à¤°à¥à¤¸ à¤–à¥‹à¤œà¥‡à¤‚ à¤”à¤° à¤‰à¤¨à¤®à¥‡à¤‚ à¤¨à¤¾à¤®à¤¾à¤‚à¤•à¤¨ à¤•à¤°à¥‡à¤‚",viewDetails:"à¤µà¤¿à¤µà¤°à¤£ à¤¦à¥‡à¤–à¥‡à¤‚",enroll:"à¤¨à¤¾à¤®à¤¾à¤‚à¤•à¤¨ à¤•à¤°à¥‡à¤‚",sortBy:"à¤•à¥à¤°à¤®à¤¬à¤¦à¥à¤§ à¤•à¤°à¥‡à¤‚:",filters:"à¤«à¤¿à¤²à¥à¤Ÿà¤°",clearAll:"à¤¸à¤­à¥€ à¤¸à¤¾à¤« à¤•à¤°à¥‡à¤‚",noCoursesFound:"à¤•à¥‹à¤ˆ à¤•à¥‹à¤°à¥à¤¸ à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¤¾",tryAdjustingSearch:"à¤…à¤ªà¤¨à¥‡ à¤–à¥‹à¤œ à¤®à¤¾à¤¨à¤¦à¤‚à¤¡ à¤•à¥‹ à¤¸à¤®à¤¾à¤¯à¥‹à¤œà¤¿à¤¤ à¤•à¤°à¤¨à¥‡ à¤•à¤¾ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚",backToCourses:"à¤•à¥‹à¤°à¥à¤¸ à¤ªà¤° à¤µà¤¾à¤ªà¤¸ à¤œà¤¾à¤à¤‚",courseContent:"à¤•à¥‹à¤°à¥à¤¸ à¤¸à¤¾à¤®à¤—à¥à¤°à¥€",continueLearning:"à¤¸à¥€à¤–à¤¨à¤¾ à¤œà¤¾à¤°à¥€ à¤°à¤–à¥‡à¤‚",whatsIncluded:"à¤•à¥à¤¯à¤¾ à¤¶à¤¾à¤®à¤¿à¤² à¤¹à¥ˆ:",videoLessons:"à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤ªà¤¾à¤ ",lifetimeAccess:"à¤œà¥€à¤µà¤¨à¤•à¤¾à¤² à¤ªà¤¹à¥à¤‚à¤š",certificateOfCompletion:"à¤ªà¥‚à¤°à¥à¤£à¤¤à¤¾ à¤ªà¥à¤°à¤®à¤¾à¤£à¤ªà¤¤à¥à¤°",mobileAndDesktopAccess:"à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤”à¤° à¤¡à¥‡à¤¸à¥à¤•à¤Ÿà¥‰à¤ª à¤ªà¤¹à¥à¤‚à¤š",downloadResources:"à¤¸à¤‚à¤¸à¤¾à¤§à¤¨ à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚",mockInterviewPractice:"à¤®à¥‰à¤• à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚ à¤…à¤­à¥à¤¯à¤¾à¤¸",mockInterviewDescription:"AI-à¤¸à¤‚à¤šà¤¾à¤²à¤¿à¤¤ à¤®à¥‰à¤• à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤…à¤­à¥à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤¤à¤¤à¥à¤•à¤¾à¤² à¤«à¥€à¤¡à¤¬à¥ˆà¤• à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¥‡à¤‚",technicalInterview:"à¤¤à¤•à¤¨à¥€à¤•à¥€ à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚",behavioralInterview:"à¤µà¥à¤¯à¤µà¤¹à¤¾à¤°à¤¿à¤• à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚",leadershipInterview:"à¤¨à¥‡à¤¤à¥ƒà¤¤à¥à¤µ à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚",startInterview:"à¤‡à¤‚à¤Ÿà¤°à¤µà¥à¤¯à¥‚ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚",question:"à¤ªà¥à¤°à¤¶à¥à¤¨",of:"à¤•à¤¾",complete:"à¤ªà¥‚à¤°à¥à¤£",previous:"à¤ªà¤¿à¤›à¤²à¤¾",next:"à¤…à¤—à¤²à¤¾",finish:"à¤¸à¤®à¤¾à¤ªà¥à¤¤ à¤•à¤°à¥‡à¤‚",softSkillsDevelopment:"à¤¸à¥‰à¤«à¥à¤Ÿ à¤¸à¥à¤•à¤¿à¤²à¥à¤¸ à¤µà¤¿à¤•à¤¾à¤¸",softSkillsDescription:"à¤…à¤ªà¤¨à¥‡ à¤ªà¤¾à¤°à¤¸à¥à¤ªà¤°à¤¿à¤• à¤•à¥Œà¤¶à¤² à¤”à¤° à¤µà¥à¤¯à¤¾à¤µà¤¸à¤¾à¤¯à¤¿à¤• à¤µà¤¿à¤•à¤¾à¤¸ à¤•à¥‹ à¤¬à¤¢à¤¼à¤¾à¤à¤‚",communication:"à¤¸à¤‚à¤šà¤¾à¤°",leadership:"à¤¨à¥‡à¤¤à¥ƒà¤¤à¥à¤µ",timeManagement:"à¤¸à¤®à¤¯ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨",problemSolving:"à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¸à¤®à¤¾à¤§à¤¾à¤¨",emotionalIntelligence:"à¤­à¤¾à¤µà¤¨à¤¾à¤¤à¥à¤®à¤• à¤¬à¥à¤¦à¥à¤§à¤¿à¤®à¤¤à¥à¤¤à¤¾",adaptability:"à¤…à¤¨à¥à¤•à¥‚à¤²à¤¨à¤¶à¥€à¤²à¤¤à¤¾",backToSkills:"à¤•à¥Œà¤¶à¤² à¤ªà¤° à¤µà¤¾à¤ªà¤¸ à¤œà¤¾à¤à¤‚",progress:"à¤ªà¥à¤°à¤—à¤¤à¤¿",modulesCompleted:"à¤®à¥‰à¤¡à¥à¤¯à¥‚à¤² à¤ªà¥‚à¤°à¥à¤£",welcomeBack:"à¤µà¤¾à¤ªà¤¸ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ!",continueYourJourney:"à¤…à¤ªà¤¨à¥€ à¤¸à¥€à¤–à¤¨à¥‡ à¤•à¥€ à¤¯à¤¾à¤¤à¥à¤°à¤¾ à¤œà¤¾à¤°à¥€ à¤°à¤–à¥‡à¤‚",enrolledCourses:"à¤¨à¤¾à¤®à¤¾à¤‚à¤•à¤¿à¤¤ à¤•à¥‹à¤°à¥à¤¸",overallProgress:"à¤¸à¤®à¤—à¥à¤° à¤ªà¥à¤°à¤—à¤¤à¤¿",studyTime:"à¤…à¤§à¥à¤¯à¤¯à¤¨ à¤¸à¤®à¤¯",achievements:"à¤‰à¤ªà¤²à¤¬à¥à¤§à¤¿à¤¯à¤¾à¤‚",recentActivity:"à¤¹à¤¾à¤² à¤•à¥€ à¤—à¤¤à¤¿à¤µà¤¿à¤§à¤¿",learningGoals:"à¤¸à¥€à¤–à¤¨à¥‡ à¤•à¥‡ à¤²à¤•à¥à¤·à¥à¤¯",level:"à¤¸à¥à¤¤à¤°",beginner:"à¤¶à¥à¤°à¥à¤†à¤¤à¥€",intermediate:"à¤®à¤§à¥à¤¯à¤®",advanced:"à¤‰à¤¨à¥à¤¨à¤¤",duration:"à¤…à¤µà¤§à¤¿",students:"à¤›à¤¾à¤¤à¥à¤°",lessons:"à¤ªà¤¾à¤ ",rating:"à¤°à¥‡à¤Ÿà¤¿à¤‚à¤—",price:"à¤®à¥‚à¤²à¥à¤¯",instructor:"à¤ªà¥à¤°à¤¶à¤¿à¤•à¥à¤·à¤•",category:"à¤¶à¥à¤°à¥‡à¤£à¥€",completed:"à¤ªà¥‚à¤°à¥à¤£",start:"à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚",all:"à¤¸à¤­à¥€",webDevelopment:"à¤µà¥‡à¤¬ à¤¡à¥‡à¤µà¤²à¤ªà¤®à¥‡à¤‚à¤Ÿ",dataScience:"à¤¡à¥‡à¤Ÿà¤¾ à¤¸à¤¾à¤‡à¤‚à¤¸",mobileDevelopment:"à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¡à¥‡à¤µà¤²à¤ªà¤®à¥‡à¤‚à¤Ÿ",design:"à¤¡à¤¿à¤œà¤¼à¤¾à¤‡à¤¨",business:"à¤µà¥à¤¯à¤µà¤¸à¤¾à¤¯",marketing:"à¤®à¤¾à¤°à¥à¤•à¥‡à¤Ÿà¤¿à¤‚à¤—",finance:"à¤µà¤¿à¤¤à¥à¤¤",mostPopular:"à¤¸à¤¬à¤¸à¥‡ à¤²à¥‹à¤•à¤ªà¥à¤°à¤¿à¤¯",highestRated:"à¤¸à¤¬à¤¸à¥‡ à¤…à¤§à¤¿à¤• à¤°à¥‡à¤Ÿà¥‡à¤¡",priceLowToHigh:"à¤®à¥‚à¤²à¥à¤¯: à¤•à¤® à¤¸à¥‡ à¤…à¤§à¤¿à¤•",priceHighToLow:"à¤®à¥‚à¤²à¥à¤¯: à¤…à¤§à¤¿à¤• à¤¸à¥‡ à¤•à¤®",newestFirst:"à¤¨à¤µà¥€à¤¨à¤¤à¤® à¤ªà¤¹à¤²à¥‡",minimumRating:"à¤¨à¥à¤¯à¥‚à¤¨à¤¤à¤® à¤°à¥‡à¤Ÿà¤¿à¤‚à¤—",any:"à¤•à¥‹à¤ˆ à¤­à¥€",gridView:"à¤—à¥à¤°à¤¿à¤¡ à¤µà¥à¤¯à¥‚",listView:"à¤²à¤¿à¤¸à¥à¤Ÿ à¤µà¥à¤¯à¥‚",showFilters:"à¤«à¤¿à¤²à¥à¤Ÿà¤° à¤¦à¤¿à¤–à¤¾à¤à¤‚",hideFilters:"à¤«à¤¿à¤²à¥à¤Ÿà¤° à¤›à¥à¤ªà¤¾à¤à¤‚",quickFilters:"à¤¤à¥à¤µà¤°à¤¿à¤¤ à¤«à¤¿à¤²à¥à¤Ÿà¤°",advancedFilters:"à¤‰à¤¨à¥à¤¨à¤¤ à¤«à¤¿à¤²à¥à¤Ÿà¤°",priceRange:"à¤®à¥‚à¤²à¥à¤¯ à¤¸à¥€à¤®à¤¾",free:"à¤®à¥à¤«à¥à¤¤",paid:"à¤­à¥à¤—à¤¤à¤¾à¤¨",under25:"$25 à¤¸à¥‡ à¤•à¤®",under50:"$50 à¤¸à¥‡ à¤•à¤®",under100:"$100 à¤¸à¥‡ à¤•à¤®",over100:"$100 à¤¸à¥‡ à¤…à¤§à¤¿à¤•",question1:"à¤…à¤ªà¤¨à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚ à¤”à¤° à¤…à¤ªà¤¨à¥€ à¤ªà¥ƒà¤·à¥à¤ à¤­à¥‚à¤®à¤¿ à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚ à¤¬à¤¤à¤¾à¤à¤‚à¥¤",question2:"à¤†à¤ªà¤•à¥€ à¤¸à¤¬à¤¸à¥‡ à¤¬à¤¡à¤¼à¥€ à¤¤à¤¾à¤•à¤¤ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆà¤‚?",question3:"à¤à¤• à¤šà¥à¤¨à¥Œà¤¤à¥€à¤ªà¥‚à¤°à¥à¤£ à¤ªà¤°à¤¿à¤¯à¥‹à¤œà¤¨à¤¾ à¤•à¤¾ à¤µà¤°à¥à¤£à¤¨ à¤•à¤°à¥‡à¤‚ à¤œà¤¿à¤¸ à¤ªà¤° à¤†à¤ªà¤¨à¥‡ à¤•à¤¾à¤® à¤•à¤¿à¤¯à¤¾ à¤”à¤° à¤†à¤ªà¤¨à¥‡ à¤‡à¤¸à¥‡ à¤•à¥ˆà¤¸à¥‡ à¤ªà¤¾à¤° à¤•à¤¿à¤¯à¤¾à¥¤",question4:"à¤†à¤ª à¤–à¥à¤¦ à¤•à¥‹ 5 à¤¸à¤¾à¤² à¤®à¥‡à¤‚ à¤•à¤¹à¤¾à¤‚ à¤¦à¥‡à¤–à¤¤à¥‡ à¤¹à¥ˆà¤‚?",question5:"à¤†à¤ª à¤¹à¤®à¤¾à¤°à¥€ à¤•à¤‚à¤ªà¤¨à¥€ à¤•à¥‡ à¤²à¤¿à¤ à¤•à¥à¤¯à¥‹à¤‚ à¤•à¤¾à¤® à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚?",question6:"à¤†à¤ª à¤¤à¤¨à¤¾à¤µ à¤”à¤° à¤¦à¤¬à¤¾à¤µ à¤•à¥‹ à¤•à¥ˆà¤¸à¥‡ à¤¸à¤‚à¤­à¤¾à¤²à¤¤à¥‡ à¤¹à¥ˆà¤‚?",question7:"à¤à¤• à¤¸à¤®à¤¯ à¤•à¤¾ à¤µà¤°à¥à¤£à¤¨ à¤•à¤°à¥‡à¤‚ à¤œà¤¬ à¤†à¤ªà¤•à¥‹ à¤à¤• à¤•à¤ à¤¿à¤¨ à¤Ÿà¥€à¤® à¤¸à¤¦à¤¸à¥à¤¯ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤•à¤¾à¤® à¤•à¤°à¤¨à¤¾ à¤ªà¤¡à¤¼à¤¾à¥¤",question8:"à¤†à¤ªà¤•à¥€ à¤¸à¤¬à¤¸à¥‡ à¤¬à¤¡à¤¼à¥€ à¤•à¤®à¤œà¥‹à¤°à¥€ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ à¤”à¤° à¤†à¤ª à¤‡à¤¸ à¤ªà¤° à¤•à¥ˆà¤¸à¥‡ à¤•à¤¾à¤® à¤•à¤°à¤¤à¥‡ à¤¹à¥ˆà¤‚?",question9:"à¤†à¤ª à¤‰à¤¦à¥à¤¯à¥‹à¤— à¤•à¥‡ à¤°à¥à¤à¤¾à¤¨à¥‹à¤‚ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤•à¥ˆà¤¸à¥‡ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤°à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚?",question10:"à¤•à¥à¤¯à¤¾ à¤†à¤ªà¤•à¥‡ à¤ªà¤¾à¤¸ à¤¹à¤®à¤¾à¤°à¥‡ à¤²à¤¿à¤ à¤•à¥‹à¤ˆ à¤ªà¥à¤°à¤¶à¥à¤¨ à¤¹à¥ˆà¤‚?",technicalDescription:"à¤¤à¤•à¤¨à¥€à¤•à¥€ à¤•à¥Œà¤¶à¤² à¤”à¤° à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¸à¤®à¤¾à¤§à¤¾à¤¨ à¤ªà¤° à¤§à¥à¤¯à¤¾à¤¨ à¤¦à¥‡à¤‚",behavioralDescription:"à¤¸à¥‰à¤«à¥à¤Ÿ à¤¸à¥à¤•à¤¿à¤²à¥à¤¸ à¤”à¤° à¤¸à¤¾à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤¿à¤• à¤«à¤¿à¤Ÿ à¤•à¤¾ à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨ à¤•à¤°à¥‡à¤‚",leadershipDescription:"à¤¨à¥‡à¤¤à¥ƒà¤¤à¥à¤µ à¤”à¤° à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨ à¤•à¥Œà¤¶à¤² à¤•à¤¾ à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨ à¤•à¤°à¥‡à¤‚",communicationDescription:"à¤®à¥Œà¤–à¤¿à¤• à¤”à¤° à¤²à¤¿à¤–à¤¿à¤¤ à¤¸à¤‚à¤šà¤¾à¤° à¤•à¥Œà¤¶à¤² à¤®à¥‡à¤‚ à¤®à¤¹à¤¾à¤°à¤¤ à¤¹à¤¾à¤¸à¤¿à¤² à¤•à¤°à¥‡à¤‚",leadershipSkillsDescription:"à¤¨à¥‡à¤¤à¥ƒà¤¤à¥à¤µ à¤”à¤° à¤Ÿà¥€à¤® à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨ à¤•à¥Œà¤¶à¤² à¤µà¤¿à¤•à¤¸à¤¿à¤¤ à¤•à¤°à¥‡à¤‚",timeManagementDescription:"à¤…à¤ªà¤¨à¥‡ à¤¸à¤®à¤¯ à¤•à¥‹ à¤ªà¥à¤°à¤­à¤¾à¤µà¥€ à¤¢à¤‚à¤— à¤¸à¥‡ à¤ªà¥à¤°à¤¾à¤¥à¤®à¤¿à¤•à¤¤à¤¾ à¤¦à¥‡à¤¨à¥‡ à¤”à¤° à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¿à¤¤ à¤•à¤°à¤¨à¤¾ à¤¸à¥€à¤–à¥‡à¤‚",problemSolvingDescription:"à¤†à¤²à¥‹à¤šà¤¨à¤¾à¤¤à¥à¤®à¤• à¤¸à¥‹à¤š à¤”à¤° à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¸à¤®à¤¾à¤§à¤¾à¤¨ à¤•à¥à¤·à¤®à¤¤à¤¾à¤“à¤‚ à¤•à¥‹ à¤¬à¤¢à¤¼à¤¾à¤à¤‚",emotionalIntelligenceDescription:"à¤†à¤¤à¥à¤®-à¤œà¤¾à¤—à¤°à¥‚à¤•à¤¤à¤¾ à¤”à¤° à¤­à¤¾à¤µà¤¨à¤¾à¤¤à¥à¤®à¤• à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨ à¤µà¤¿à¤•à¤¸à¤¿à¤¤ à¤•à¤°à¥‡à¤‚",adaptabilityDescription:"à¤¬à¤¦à¤²à¤¤à¥‡ à¤µà¤¾à¤¤à¤¾à¤µà¤°à¤£ à¤®à¥‡à¤‚ à¤ªà¤¨à¤ªà¤¨à¤¾ à¤¸à¥€à¤–à¥‡à¤‚",activeListening:"à¤¸à¤•à¥à¤°à¤¿à¤¯ à¤¸à¥à¤¨à¤¨à¤¾",publicSpeaking:"à¤¸à¤¾à¤°à¥à¤µà¤œà¤¨à¤¿à¤• à¤¬à¥‹à¤²à¤¨à¤¾",writtenCommunication:"à¤²à¤¿à¤–à¤¿à¤¤ à¤¸à¤‚à¤šà¤¾à¤°",nonVerbalCommunication:"à¤—à¥ˆà¤°-à¤®à¥Œà¤–à¤¿à¤• à¤¸à¤‚à¤šà¤¾à¤°",teamBuilding:"à¤Ÿà¥€à¤® à¤¨à¤¿à¤°à¥à¤®à¤¾à¤£",decisionMaking:"à¤¨à¤¿à¤°à¥à¤£à¤¯ à¤²à¥‡à¤¨à¤¾",conflictResolution:"à¤¸à¤‚à¤˜à¤°à¥à¤· à¤¸à¤®à¤¾à¤§à¤¾à¤¨",motivatingOthers:"à¤¦à¥‚à¤¸à¤°à¥‹à¤‚ à¤•à¥‹ à¤ªà¥à¤°à¥‡à¤°à¤¿à¤¤ à¤•à¤°à¤¨à¤¾",prioritizationTechniques:"à¤ªà¥à¤°à¤¾à¤¥à¤®à¤¿à¤•à¤¤à¤¾ à¤¤à¤•à¤¨à¥€à¤•",goalSetting:"à¤²à¤•à¥à¤·à¥à¤¯ à¤¨à¤¿à¤°à¥à¤§à¤¾à¤°à¤£",delegationSkills:"à¤ªà¥à¤°à¤¤à¤¿à¤¨à¤¿à¤§à¤¿à¤®à¤‚à¤¡à¤² à¤•à¥Œà¤¶à¤²",workLifeBalance:"à¤•à¤¾à¤°à¥à¤¯-à¤œà¥€à¤µà¤¨ à¤¸à¤‚à¤¤à¥à¤²à¤¨",criticalThinking:"à¤†à¤²à¥‹à¤šà¤¨à¤¾à¤¤à¥à¤®à¤• à¤¸à¥‹à¤š",creativeSolutions:"à¤°à¤šà¤¨à¤¾à¤¤à¥à¤®à¤• à¤¸à¤®à¤¾à¤§à¤¾à¤¨",riskAssessment:"à¤œà¥‹à¤–à¤¿à¤® à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨",selfAwareness:"à¤†à¤¤à¥à¤®-à¤œà¤¾à¤—à¤°à¥‚à¤•à¤¤à¤¾",selfRegulation:"à¤†à¤¤à¥à¤®-à¤¨à¤¿à¤¯à¤®à¤¨",empathy:"à¤¸à¤¹à¤¾à¤¨à¥à¤­à¥‚à¤¤à¤¿",socialSkills:"à¤¸à¤¾à¤®à¤¾à¤œà¤¿à¤• à¤•à¥Œà¤¶à¤²",changeManagement:"à¤ªà¤°à¤¿à¤µà¤°à¥à¤¤à¤¨ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨",learningAgility:"à¤¸à¥€à¤–à¤¨à¥‡ à¤•à¥€ à¤šà¤ªà¤²à¤¤à¤¾",resilience:"à¤²à¤šà¥€à¤²à¤¾à¤ªà¤¨",innovationMindset:"à¤¨à¤µà¤¾à¤šà¤¾à¤° à¤®à¤¾à¤¨à¤¸à¤¿à¤•à¤¤à¤¾"},zh:{courses:"è¯¾ç¨‹",mockInterview:"æ¨¡æ‹Ÿé¢è¯•",softSkills:"è½¯æŠ€èƒ½",searchPlaceholder:"æœç´¢è¯¾ç¨‹...",learn:"å­¦ä¹ ",grow:"æˆé•¿",succeed:"æˆåŠŸ",heroDescription:"é€šè¿‡æˆ‘ä»¬å…¨é¢çš„ç”µå­å­¦ä¹ å¹³å°æŽŒæ¡æ–°æŠ€èƒ½ã€‚ä»Žç¼–ç¨‹åˆ°è½¯æŠ€èƒ½ï¼Œæˆ‘ä»¬ä¸ºæ‚¨æä¾›å…¨æ–¹ä½æ”¯æŒã€‚",startLearning:"å¼€å§‹å­¦ä¹ ",tryMockInterview:"å°è¯•æ¨¡æ‹Ÿé¢è¯•",featuredCourses:"ç²¾é€‰è¯¾ç¨‹",featuredCoursesDescription:"ä»Žæˆ‘ä»¬è¯„åˆ†æœ€é«˜çš„è¯¾ç¨‹å¼€å§‹æ‚¨çš„å­¦ä¹ ä¹‹æ—…",viewCourse:"æŸ¥çœ‹è¯¾ç¨‹",coursesCount:"è¯¾ç¨‹",studentsCount:"å­¦ç”Ÿ",certificatesCount:"è¯ä¹¦",successRate:"æˆåŠŸçŽ‡",allCourses:"æ‰€æœ‰è¯¾ç¨‹",coursesDescription:"å‘çŽ°å¹¶æ³¨å†Œç¬¦åˆæ‚¨å­¦ä¹ ç›®æ ‡çš„è¯¾ç¨‹",viewDetails:"æŸ¥çœ‹è¯¦æƒ…",enroll:"æ³¨å†Œ",sortBy:"æŽ’åºæ–¹å¼:",filters:"ç­›é€‰",clearAll:"æ¸…é™¤å…¨éƒ¨",noCoursesFound:"æœªæ‰¾åˆ°è¯¾ç¨‹",tryAdjustingSearch:"å°è¯•è°ƒæ•´æ‚¨çš„æœç´¢æ¡ä»¶",backToCourses:"è¿”å›žè¯¾ç¨‹",courseContent:"è¯¾ç¨‹å†…å®¹",continueLearning:"ç»§ç»­å­¦ä¹ ",whatsIncluded:"åŒ…å«å†…å®¹:",videoLessons:"è§†é¢‘è¯¾ç¨‹",lifetimeAccess:"ç»ˆèº«è®¿é—®",certificateOfCompletion:"å®Œæˆè¯ä¹¦",mobileAndDesktopAccess:"ç§»åŠ¨å’Œæ¡Œé¢è®¿é—®",downloadResources:"ä¸‹è½½èµ„æº",mockInterviewPractice:"æ¨¡æ‹Ÿé¢è¯•ç»ƒä¹ ",mockInterviewDescription:"é€šè¿‡AIé©±åŠ¨çš„æ¨¡æ‹Ÿé¢è¯•è¿›è¡Œç»ƒä¹ å¹¶èŽ·å¾—å³æ—¶åé¦ˆ",technicalInterview:"æŠ€æœ¯é¢è¯•",behavioralInterview:"è¡Œä¸ºé¢è¯•",leadershipInterview:"é¢†å¯¼åŠ›é¢è¯•",startInterview:"å¼€å§‹é¢è¯•",question:"é—®é¢˜",of:"çš„",complete:"å®Œæˆ",previous:"ä¸Šä¸€ä¸ª",next:"ä¸‹ä¸€ä¸ª",finish:"å®Œæˆ",softSkillsDevelopment:"è½¯æŠ€èƒ½å‘å±•",softSkillsDescription:"æå‡æ‚¨çš„äººé™…äº¤å¾€æŠ€èƒ½å’ŒèŒä¸šå‘å±•",communication:"æ²Ÿé€š",leadership:"é¢†å¯¼åŠ›",timeManagement:"æ—¶é—´ç®¡ç†",problemSolving:"é—®é¢˜è§£å†³",emotionalIntelligence:"æƒ…å•†",adaptability:"é€‚åº”æ€§",backToSkills:"è¿”å›žæŠ€èƒ½",progress:"è¿›åº¦",modulesCompleted:"æ¨¡å—å·²å®Œæˆ",welcomeBack:"æ¬¢è¿Žå›žæ¥ï¼",continueYourJourney:"ç»§ç»­æ‚¨çš„å­¦ä¹ ä¹‹æ—…",enrolledCourses:"å·²æ³¨å†Œè¯¾ç¨‹",overallProgress:"æ€»ä½“è¿›åº¦",studyTime:"å­¦ä¹ æ—¶é—´",achievements:"æˆå°±",recentActivity:"æœ€è¿‘æ´»åŠ¨",learningGoals:"å­¦ä¹ ç›®æ ‡",level:"çº§åˆ«",beginner:"åˆçº§",intermediate:"ä¸­çº§",advanced:"é«˜çº§",duration:"æ—¶é•¿",students:"å­¦ç”Ÿ",lessons:"è¯¾ç¨‹",rating:"è¯„åˆ†",price:"ä»·æ ¼",instructor:"è®²å¸ˆ",category:"ç±»åˆ«",completed:"å·²å®Œæˆ",start:"å¼€å§‹",all:"å…¨éƒ¨",webDevelopment:"ç½‘é¡µå¼€å‘",dataScience:"æ•°æ®ç§‘å­¦",mobileDevelopment:"ç§»åŠ¨å¼€å‘",design:"è®¾è®¡",business:"å•†ä¸š",marketing:"è¥é”€",finance:"é‡‘èž",mostPopular:"æœ€å—æ¬¢è¿Ž",highestRated:"è¯„åˆ†æœ€é«˜",priceLowToHigh:"ä»·æ ¼ï¼šä½Žåˆ°é«˜",priceHighToLow:"ä»·æ ¼ï¼šé«˜åˆ°ä½Ž",newestFirst:"æœ€æ–°ä¼˜å…ˆ",minimumRating:"æœ€ä½Žè¯„åˆ†",any:"ä»»æ„",gridView:"ç½‘æ ¼è§†å›¾",listView:"åˆ—è¡¨è§†å›¾",showFilters:"æ˜¾ç¤ºç­›é€‰",hideFilters:"éšè—ç­›é€‰",quickFilters:"å¿«é€Ÿç­›é€‰",advancedFilters:"é«˜çº§ç­›é€‰",priceRange:"ä»·æ ¼èŒƒå›´",free:"å…è´¹",paid:"ä»˜è´¹",under25:"25ç¾Žå…ƒä»¥ä¸‹",under50:"50ç¾Žå…ƒä»¥ä¸‹",under100:"100ç¾Žå…ƒä»¥ä¸‹",over100:"100ç¾Žå…ƒä»¥ä¸Š",question1:"è¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±å’Œä½ çš„èƒŒæ™¯ã€‚",question2:"ä½ æœ€å¤§çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ",question3:"æè¿°ä¸€ä¸ªä½ å‚ä¸Žè¿‡çš„å…·æœ‰æŒ‘æˆ˜æ€§çš„é¡¹ç›®ä»¥åŠä½ æ˜¯å¦‚ä½•å…‹æœå›°éš¾çš„ã€‚",question4:"ä½ å¦‚ä½•çœ‹å¾…è‡ªå·±5å¹´åŽçš„å‘å±•ï¼Ÿ",question5:"ä½ ä¸ºä»€ä¹ˆæƒ³ä¸ºæˆ‘ä»¬å…¬å¸å·¥ä½œï¼Ÿ",question6:"ä½ å¦‚ä½•å¤„ç†åŽ‹åŠ›å’Œç´§å¼ ï¼Ÿ",question7:"æè¿°ä¸€æ¬¡ä½ ä¸å¾—ä¸ä¸Žéš¾ç›¸å¤„çš„å›¢é˜Ÿæˆå‘˜åˆä½œçš„ç»åŽ†ã€‚",question8:"ä½ æœ€å¤§çš„å¼±ç‚¹æ˜¯ä»€ä¹ˆï¼Œä½ å¦‚ä½•æ”¹è¿›ï¼Ÿ",question9:"ä½ å¦‚ä½•è·Ÿä¸Šè¡Œä¸šè¶‹åŠ¿ï¼Ÿ",question10:"ä½ å¯¹æˆ‘ä»¬æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ",technicalDescription:"ä¸“æ³¨äºŽæŠ€æœ¯æŠ€èƒ½å’Œé—®é¢˜è§£å†³",behavioralDescription:"è¯„ä¼°è½¯æŠ€èƒ½å’Œæ–‡åŒ–é€‚åº”æ€§",leadershipDescription:"è¯„ä¼°é¢†å¯¼åŠ›å’Œç®¡ç†æŠ€èƒ½",communicationDescription:"æŽŒæ¡å£å¤´å’Œä¹¦é¢æ²Ÿé€šæŠ€èƒ½",leadershipSkillsDescription:"å‘å±•é¢†å¯¼åŠ›å’Œå›¢é˜Ÿç®¡ç†æŠ€èƒ½",timeManagementDescription:"å­¦ä¹ æœ‰æ•ˆä¼˜å…ˆæŽ’åºå’Œæ—¶é—´ç®¡ç†",problemSolvingDescription:"å¢žå¼ºæ‰¹åˆ¤æ€§æ€ç»´å’Œé—®é¢˜è§£å†³èƒ½åŠ›",emotionalIntelligenceDescription:"å‘å±•è‡ªæˆ‘æ„è¯†å’Œæƒ…ç»ªç®¡ç†",adaptabilityDescription:"å­¦ä¹ åœ¨å˜åŒ–çŽ¯å¢ƒä¸­èŒå£®æˆé•¿",activeListening:"ç§¯æžå€¾å¬",publicSpeaking:"å…¬å¼€æ¼”è®²",writtenCommunication:"ä¹¦é¢æ²Ÿé€š",nonVerbalCommunication:"éžè¯­è¨€æ²Ÿé€š",teamBuilding:"å›¢é˜Ÿå»ºè®¾",decisionMaking:"å†³ç­–åˆ¶å®š",conflictResolution:"å†²çªè§£å†³",motivatingOthers:"æ¿€åŠ±ä»–äºº",prioritizationTechniques:"ä¼˜å…ˆçº§æŠ€æœ¯",goalSetting:"ç›®æ ‡è®¾å®š",delegationSkills:"æŽˆæƒæŠ€èƒ½",workLifeBalance:"å·¥ä½œç”Ÿæ´»å¹³è¡¡",criticalThinking:"æ‰¹åˆ¤æ€§æ€ç»´",creativeSolutions:"åˆ›æ„è§£å†³æ–¹æ¡ˆ",riskAssessment:"é£Žé™©è¯„ä¼°",selfAwareness:"è‡ªæˆ‘æ„è¯†",selfRegulation:"è‡ªæˆ‘è°ƒèŠ‚",empathy:"åŒç†å¿ƒ",socialSkills:"ç¤¾äº¤æŠ€èƒ½",changeManagement:"å˜é©ç®¡ç†",learningAgility:"å­¦ä¹ æ•æ·æ€§",resilience:"éŸ§æ€§",innovationMindset:"åˆ›æ–°æ€ç»´"}},Ma=[{code:"en",name:"English",flag:"ðŸ‡ºðŸ‡¸",nativeName:"English"},{code:"es",name:"Spanish",flag:"ðŸ‡ªðŸ‡¸",nativeName:"EspaÃ±ol"},{code:"fr",name:"French",flag:"ðŸ‡«ðŸ‡·",nativeName:"FranÃ§ais"},{code:"hi",name:"Hindi",flag:"ðŸ‡®ðŸ‡³",nativeName:"à¤¹à¤¿à¤¨à¥à¤¦à¥€"},{code:"zh",name:"Chinese",flag:"ðŸ‡¨ðŸ‡³",nativeName:"ä¸­æ–‡"}],ut=ui()(di((n,e)=>({currentLanguage:"en",setLanguage:t=>{n({currentLanguage:t})},getTranslation:t=>{var r;const s=e().currentLanguage;return((r=id[s])==null?void 0:r[t])||id.en[t]||t},getCurrentLanguage:()=>{const t=e().currentLanguage;return Ma.find(s=>s.code===t)||Ma[0]},getAvailableLanguages:()=>Ma}),{name:"language-storage"})),Dv="modulepreload",Mv=function(n){return"/"+n},od={},is=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=Mv(c),c in od)return;od[c]=!0;const u=c.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Dv,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,x)=>{p.addEventListener("load",g),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Lv=()=>{};var ad={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Vv=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[t++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[t++],o=n[t++],l=n[t++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],o=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],o=r+1<n.length,l=o?n[r+1]:0,c=r+2<n.length,u=c?n[r+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|u>>6,x=u&63;c||(x=64,o||(g=64)),s.push(t[m],t[p],t[g],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hm(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Vv(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;const u=r<n.length?t[n.charAt(r)]:64;++r;const p=r<n.length?t[n.charAt(r)]:64;if(++r,i==null||l==null||u==null||p==null)throw new Uv;const g=i<<2|l>>4;if(s.push(g),u!==64){const x=l<<4&240|u>>2;if(s.push(x),p!==64){const b=u<<6&192|p;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Uv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jv=function(n){const e=Hm(n);return zm.encodeByteArray(e,!0)},mo=function(n){return jv(n).replace(/\./g,"")},Wm=function(n){try{return zm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=()=>Fv().__FIREBASE_DEFAULTS__,Ov=()=>{if(typeof process>"u"||typeof ad>"u")return;const n=ad.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Wm(n[1]);return e&&JSON.parse(e)},Uo=()=>{try{return Lv()||$v()||Ov()||qv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Jm=n=>{var e,t;return(t=(e=Uo())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Km=n=>{const e=Jm(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Ym=()=>{var n;return(n=Uo())==null?void 0:n.config},Qm=n=>{var e;return(e=Uo())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jl(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[mo(JSON.stringify(t)),mo(JSON.stringify(o)),""].join(".")}const Or={};function Gv(){const n={prod:[],emulator:[]};for(const e of Object.keys(Or))Or[e]?n.emulator.push(e):n.prod.push(e);return n}function Hv(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ld=!1;function Kl(n,e){if(typeof window>"u"||typeof document>"u"||!$n(window.location.host)||Or[n]===e||Or[n]||ld)return;Or[n]=e;function t(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=Gv().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{ld=!0,o()},g}function m(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Hv(s),x=t("text"),b=document.getElementById(x)||document.createElement("span"),T=t("learnmore"),C=document.getElementById(T)||document.createElement("a"),k=t("preprendIcon"),R=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const P=g.element;l(P),m(C,T);const L=u();c(R,k),P.append(R,b,C,L),document.body.appendChild(P)}i?(b.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function Wv(){var e;const n=(e=Uo())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function Jv(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kv(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Yv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qv(){const n=ot();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Xv(){return!Wv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zv(){try{return typeof indexedDB=="object"}catch{return!1}}function ex(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="FirebaseError";class Wt extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=tx,Object.setPrototypeOf(this,Wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hi.prototype.create)}}class hi{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?nx(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Wt(r,l,s)}}function nx(n,e){return n.replace(sx,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const sx=/\{\$([^}]+)}/g;function rx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function hs(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const i=n[r],o=e[r];if(cd(i)&&cd(o)){if(!hs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function cd(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Lr(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Vr(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ix(n,e){const t=new ox(n,e);return t.subscribe.bind(t)}class ox{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");ax(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=La),r.error===void 0&&(r.error=La),r.complete===void 0&&(r.complete=La);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ax(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function La(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n){return n&&n._delegate?n._delegate:n}class Dn{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Bv;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ux(e))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zn){return this.instances.has(e)}getOptions(e=Zn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Zn){return this.component?this.component.multipleInstances?e:Zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cx(n){return n===Zn?void 0:n}function ux(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ge||(ge={}));const hx={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},fx=ge.INFO,mx={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},px=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=mx[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yl{constructor(e){this.name=e,this._logLevel=fx,this._logHandler=px,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const gx=(n,e)=>e.some(t=>n instanceof t);let ud,dd;function yx(){return ud||(ud=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vx(){return dd||(dd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zm=new WeakMap,nl=new WeakMap,ep=new WeakMap,Va=new WeakMap,Ql=new WeakMap;function xx(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(An(n.result)),r()},o=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Zm.set(t,n)}).catch(()=>{}),Ql.set(e,n),e}function _x(n){if(nl.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});nl.set(n,e)}let sl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return nl.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ep.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return An(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bx(n){sl=n(sl)}function wx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Ua(this),e,...t);return ep.set(s,e.sort?e.sort():[e]),An(s)}:vx().includes(n)?function(...e){return n.apply(Ua(this),e),An(Zm.get(this))}:function(...e){return An(n.apply(Ua(this),e))}}function Tx(n){return typeof n=="function"?wx(n):(n instanceof IDBTransaction&&_x(n),gx(n,yx())?new Proxy(n,sl):n)}function An(n){if(n instanceof IDBRequest)return xx(n);if(Va.has(n))return Va.get(n);const e=Tx(n);return e!==n&&(Va.set(n,e),Ql.set(e,n)),e}const Ua=n=>Ql.get(n);function Ex(n,e,{blocked:t,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(n,e),l=An(o);return s&&o.addEventListener("upgradeneeded",c=>{s(An(o.result),c.oldVersion,c.newVersion,An(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ix=["get","getKey","getAll","getAllKeys","count"],Cx=["put","add","delete","clear"],ja=new Map;function hd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ja.get(e))return ja.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=Cx.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Ix.includes(t)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),r&&c.done]))[0]};return ja.set(e,i),i}bx(n=>({...n,get:(e,t,s)=>hd(e,t)||n.get(e,t,s),has:(e,t)=>!!hd(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Sx(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Sx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rl="@firebase/app",fd="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new Yl("@firebase/app"),Nx="@firebase/app-compat",Rx="@firebase/analytics-compat",Px="@firebase/analytics",kx="@firebase/app-check-compat",Dx="@firebase/app-check",Mx="@firebase/auth",Lx="@firebase/auth-compat",Vx="@firebase/database",Ux="@firebase/data-connect",jx="@firebase/database-compat",Fx="@firebase/functions",$x="@firebase/functions-compat",Ox="@firebase/installations",qx="@firebase/installations-compat",Bx="@firebase/messaging",Gx="@firebase/messaging-compat",Hx="@firebase/performance",zx="@firebase/performance-compat",Wx="@firebase/remote-config",Jx="@firebase/remote-config-compat",Kx="@firebase/storage",Yx="@firebase/storage-compat",Qx="@firebase/firestore",Xx="@firebase/ai",Zx="@firebase/firestore-compat",e_="firebase",t_="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]",n_={[rl]:"fire-core",[Nx]:"fire-core-compat",[Px]:"fire-analytics",[Rx]:"fire-analytics-compat",[Dx]:"fire-app-check",[kx]:"fire-app-check-compat",[Mx]:"fire-auth",[Lx]:"fire-auth-compat",[Vx]:"fire-rtdb",[Ux]:"fire-data-connect",[jx]:"fire-rtdb-compat",[Fx]:"fire-fn",[$x]:"fire-fn-compat",[Ox]:"fire-iid",[qx]:"fire-iid-compat",[Bx]:"fire-fcm",[Gx]:"fire-fcm-compat",[Hx]:"fire-perf",[zx]:"fire-perf-compat",[Wx]:"fire-rc",[Jx]:"fire-rc-compat",[Kx]:"fire-gcs",[Yx]:"fire-gcs-compat",[Qx]:"fire-fst",[Zx]:"fire-fst-compat",[Xx]:"fire-vertex","fire-js":"fire-js",[e_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Map,s_=new Map,ol=new Map;function md(n,e){try{n.container.addComponent(e)}catch(t){an.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fs(n){const e=n.name;if(ol.has(e))return an.debug(`There were multiple attempts to register component ${e}.`),!1;ol.set(e,n);for(const t of po.values())md(t,n);for(const t of s_.values())md(t,n);return!0}function jo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ft(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sn=new hi("app","Firebase",r_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=t_;function tp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:il,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Sn.create("bad-app-name",{appName:String(r)});if(t||(t=Ym()),!t)throw Sn.create("no-options");const i=po.get(r);if(i){if(hs(t,i.options)&&hs(s,i.config))return i;throw Sn.create("duplicate-app",{appName:r})}const o=new dx(r);for(const c of ol.values())o.addComponent(c);const l=new i_(t,s,o);return po.set(r,l),l}function Xl(n=il){const e=po.get(n);if(!e&&n===il&&Ym())return tp();if(!e)throw Sn.create("no-app",{appName:n});return e}function jt(n,e,t){let s=n_[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),an.warn(o.join(" "));return}fs(new Dn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="firebase-heartbeat-database",a_=1,Xr="firebase-heartbeat-store";let Fa=null;function np(){return Fa||(Fa=Ex(o_,a_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xr)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sn.create("idb-open",{originalErrorMessage:n.message})})),Fa}async function l_(n){try{const t=(await np()).transaction(Xr),s=await t.objectStore(Xr).get(sp(n));return await t.done,s}catch(e){if(e instanceof Wt)an.warn(e.message);else{const t=Sn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});an.warn(t.message)}}}async function pd(n,e){try{const s=(await np()).transaction(Xr,"readwrite");await s.objectStore(Xr).put(e,sp(n)),await s.done}catch(t){if(t instanceof Wt)an.warn(t.message);else{const s=Sn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});an.warn(s.message)}}}function sp(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=1024,u_=30;class d_{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f_(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gd();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>u_){const o=m_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){an.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gd(),{heartbeatsToSend:s,unsentEntries:r}=h_(this._heartbeatsCache.heartbeats),i=mo(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return an.warn(t),""}}}function gd(){return new Date().toISOString().substring(0,10)}function h_(n,e=c_){const t=[];let s=n.slice();for(const r of n){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),yd(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),yd(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class f_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zv()?ex().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l_(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return pd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return pd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yd(n){return mo(JSON.stringify({version:2,heartbeats:n})).length}function m_(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n){fs(new Dn("platform-logger",e=>new Ax(e),"PRIVATE")),fs(new Dn("heartbeat",e=>new d_(e),"PRIVATE")),jt(rl,fd,n),jt(rl,fd,"esm2020"),jt("fire-js","")}p_("");function rp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g_=rp,ip=new hi("auth","Firebase",rp());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Yl("@firebase/auth");function y_(n,...e){go.logLevel<=ge.WARN&&go.warn(`Auth (${bs}): ${n}`,...e)}function Yi(n,...e){go.logLevel<=ge.ERROR&&go.error(`Auth (${bs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,...e){throw ec(n,...e)}function At(n,...e){return ec(n,...e)}function Zl(n,e,t){const s={...g_(),[e]:t};return new hi("auth","Firebase",s).create(e,{appName:n.name})}function sn(n){return Zl(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v_(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Et(n,"argument-error"),Zl(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ec(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return ip.create(n,...e)}function oe(n,e,...t){if(!n)throw ec(e,...t)}function Zt(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yi(e),new Error(e)}function ln(n,e){n||Zt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function x_(){return vd()==="http:"||vd()==="https:"}function vd(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x_()||Kv()||"connection"in navigator)?navigator.onLine:!0}function b_(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t){this.shortDelay=e,this.longDelay=t,ln(t>e,"Short delay should be less than long delay!"),this.isMobile=zv()||Yv()}get(){return __()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(n,e){ln(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E_=new mi(3e4,6e4);function On(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function dn(n,e,t,s,r={}){return ap(n,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=fi({key:n.config.apiKey,...o}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:c,...i};return Jv()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&$n(n.emulatorConfig.host)&&(u.credentials="include"),op.fetch()(await lp(n,n.config.apiHost,t,l),u)})}async function ap(n,e,t){n._canInitEmulator=!1;const s={...w_,...e};try{const r=new C_(n),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $i(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $i(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $i(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw $i(n,"user-disabled",o);const m=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Zl(n,m,u);Et(n,m)}}catch(r){if(r instanceof Wt)throw r;Et(n,"network-request-failed",{message:String(r)})}}async function pi(n,e,t,s,r={}){const i=await dn(n,e,t,s,r);return"mfaPendingCredential"in i&&Et(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function lp(n,e,t,s){const r=`${e}${t}?${s}`,i=n,o=i.config.emulator?tc(n.config,r):`${n.config.apiScheme}://${r}`;return T_.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function I_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class C_{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(At(this.auth,"network-request-failed")),E_.get())})}}function $i(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=At(n,e,s);return r.customData._tokenResponse=t,r}function xd(n){return n!==void 0&&n.enterprise!==void 0}class A_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function S_(n,e){return dn(n,"GET","/v2/recaptchaConfig",On(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n,e){return dn(n,"POST","/v1/accounts:delete",e)}async function yo(n,e){return dn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R_(n,e=!1){const t=Pe(n),s=await t.getIdToken(e),r=nc(s);oe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:qr($a(r.auth_time)),issuedAtTime:qr($a(r.iat)),expirationTime:qr($a(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $a(n){return Number(n)*1e3}function nc(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Yi("JWT malformed, contained fewer than 3 sections"),null;try{const r=Wm(t);return r?JSON.parse(r):(Yi("Failed to decode base64 JWT payload"),null)}catch(r){return Yi("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _d(n){const e=nc(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Wt&&P_(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function P_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(n){var p;const e=n.auth,t=await n.getIdToken(),s=await Js(n,yo(e,{idToken:t}));oe(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const i=(p=r.providerUserInfo)!=null&&p.length?cp(r.providerUserInfo):[],o=M_(n.providerData,i),l=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ll(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(n,m)}async function D_(n){const e=Pe(n);await vo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M_(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function cp(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L_(n,e){const t=await ap(n,{},async()=>{const s=fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=n.config,o=await lp(n,r,"/v1/token",`key=${i}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return n.emulatorConfig&&$n(n.emulatorConfig.host)&&(c.credentials="include"),op.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function V_(n,e){return dn(n,"POST","/v2/accounts:revokeToken",On(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_d(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const t=_d(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:i}=await L_(e,t);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:i}=t,o=new js;return s&&(oe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(oe(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new js,this.toJSON())}_performRefresh(){return Zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ct{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new k_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ll(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Js(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return R_(this,e)}reload(){return D_(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ct({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await vo(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ft(this.auth.app))return Promise.reject(sn(this.auth));const e=await this.getIdToken();return await Js(this,N_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,l=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:x,providerData:b,stsTokenManager:T}=t;oe(p&&T,e,"internal-error");const C=js.fromJSON(this.name,T);oe(typeof p=="string",e,"internal-error"),xn(s,e.name),xn(r,e.name),oe(typeof g=="boolean",e,"internal-error"),oe(typeof x=="boolean",e,"internal-error"),xn(i,e.name),xn(o,e.name),xn(l,e.name),xn(c,e.name),xn(u,e.name),xn(m,e.name);const k=new Ct({uid:p,auth:e,email:r,emailVerified:g,displayName:s,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:C,createdAt:u,lastLoginAt:m});return b&&Array.isArray(b)&&(k.providerData=b.map(R=>({...R}))),c&&(k._redirectEventId=c),k}static async _fromIdTokenResponse(e,t,s=!1){const r=new js;r.updateFromServerResponse(t);const i=new Ct({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await vo(i),i}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];oe(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?cp(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new js;l.updateFromIdToken(s);const c=new Ct({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ll(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map;function en(n){ln(n instanceof Function,"Expected a class definition");let e=bd.get(n);return e?(ln(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bd.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}up.type="NONE";const wd=up;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,e,t){return`firebase:${n}:${e}:${t}`}class Fs{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Qi(this.userKey,r.apiKey,i),this.fullPersistenceKey=Qi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yo(this.auth,{idToken:e}).catch(()=>{});return t?Ct._fromGetAccountInfoResponse(this.auth,t,e):null}return Ct._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Fs(en(wd),e,s);const r=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||en(wd);const o=Qi(s,e.config.apiKey,e.name);let l=null;for(const u of t)try{const m=await u._get(o);if(m){let p;if(typeof m=="string"){const g=await yo(e,{idToken:m}).catch(()=>{});if(!g)break;p=await Ct._fromGetAccountInfoResponse(e,g,m)}else p=Ct._fromJSON(e,m);u!==i&&(l=p),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Fs(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Fs(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gp(e))return"Blackberry";if(yp(e))return"Webos";if(hp(e))return"Safari";if((e.includes("chrome/")||fp(e))&&!e.includes("edge/"))return"Chrome";if(pp(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dp(n=ot()){return/firefox\//i.test(n)}function hp(n=ot()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fp(n=ot()){return/crios\//i.test(n)}function mp(n=ot()){return/iemobile/i.test(n)}function pp(n=ot()){return/android/i.test(n)}function gp(n=ot()){return/blackberry/i.test(n)}function yp(n=ot()){return/webos/i.test(n)}function sc(n=ot()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function U_(n=ot()){var e;return sc(n)&&!!((e=window.navigator)!=null&&e.standalone)}function j_(){return Qv()&&document.documentMode===10}function vp(n=ot()){return sc(n)||pp(n)||yp(n)||gp(n)||/windows phone/i.test(n)||mp(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n,e=[]){let t;switch(n){case"Browser":t=Td(ot());break;case"Worker":t=`${Td(ot())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bs}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $_(n,e={}){return dn(n,"GET","/v2/passwordPolicy",On(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=6;class q_{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??O_,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ed(this),this.idTokenSubscription=new Ed(this),this.beforeStateQueue=new F_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ip,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=en(t)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yo(this,{idToken:e}),s=await Ct._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ft(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vo(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b_()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ft(this.app))return Promise.reject(sn(this));const t=e?Pe(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ft(this.app)?Promise.reject(sn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ft(this.app)?Promise.reject(sn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(en(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $_(this),t=new q_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hi("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await V_(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&en(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[en(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&y_(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qn(n){return Pe(n)}class Ed{constructor(e){this.auth=e,this.observer=null,this.addObserver=ix(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G_(n){Fo=n}function _p(n){return Fo.loadJS(n)}function H_(){return Fo.recaptchaEnterpriseScript}function z_(){return Fo.gapiScript}function W_(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class J_{constructor(){this.enterprise=new K_}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class K_{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Y_="recaptcha-enterprise",bp="NO_RECAPTCHA";class Q_{constructor(e){this.type=Y_,this.auth=qn(e)}async verify(e="verify",t=!1){async function s(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{S_(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new A_(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function r(i,o,l){const c=window.grecaptcha;xd(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(bp)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J_().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!t&&xd(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=H_();c.length!==0&&(c+=l),_p(c).then(()=>{r(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Id(n,e,t,s=!1,r=!1){const i=new Q_(n);let o;if(r)o=bp;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const l={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function cl(n,e,t,s,r){var i;if((i=n._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Id(n,e,t,t==="getOobCode");return s(n,o)}else return s(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Id(n,e,t,t==="getOobCode");return s(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(n,e){const t=jo(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(hs(i,e??{}))return r;Et(r,"already-initialized")}return t.initialize({options:e})}function Z_(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(en);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function eb(n,e,t){const s=qn(n);oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(t!=null&&t.disableWarnings),i=wp(e),{host:o,port:l}=tb(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},m=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),oe(hs(u,s.config.emulator)&&hs(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,$n(o)?(Jl(`${i}//${o}${c}`),Kl("Auth",!0)):nb()}function wp(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tb(n){const e=wp(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Cd(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Cd(o)}}}function Cd(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zt("not implemented")}_getIdTokenResponse(e){return Zt("not implemented")}_linkToIdToken(e,t){return Zt("not implemented")}_getReauthenticationResolver(e){return Zt("not implemented")}}async function sb(n,e){return dn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(n,e){return pi(n,"POST","/v1/accounts:signInWithPassword",On(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(n,e){return pi(n,"POST","/v1/accounts:signInWithEmailLink",On(n,e))}async function ob(n,e){return pi(n,"POST","/v1/accounts:signInWithEmailLink",On(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends rc{constructor(e,t,s,r=null){super("password",s),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Zr(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Zr(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cl(e,t,"signInWithPassword",rb);case"emailLink":return ib(e,{email:this._email,oobCode:this._password});default:Et(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cl(e,s,"signUpPassword",sb);case"emailLink":return ob(e,{idToken:t,email:this._email,oobCode:this._password});default:Et(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(n,e){return pi(n,"POST","/v1/accounts:signInWithIdp",On(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="http://localhost";class ms extends rc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Et("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=t;if(!s||!r)return null;const o=new ms(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return $s(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,$s(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$s(e,t)}buildRequest(){const e={requestUri:ab,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fi(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cb(n){const e=Lr(Vr(n)).link,t=e?Lr(Vr(e)).deep_link_id:null,s=Lr(Vr(n)).deep_link_id;return(s?Lr(Vr(s)).link:null)||s||t||e||n}class ic{constructor(e){const t=Lr(Vr(e)),s=t.apiKey??null,r=t.oobCode??null,i=lb(t.mode??null);oe(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=cb(e);try{return new ic(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){this.providerId=nr.PROVIDER_ID}static credential(e,t){return Zr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=ic.parseLink(t);return oe(s,"argument-error"),Zr._fromEmailAndCode(e,s.code,s.tenantId)}}nr.PROVIDER_ID="password";nr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends oc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends gi{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bn.credential(e.oauthAccessToken)}catch{return null}}}bn.FACEBOOK_SIGN_IN_METHOD="facebook.com";bn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends gi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ms._fromParams({providerId:Qt.PROVIDER_ID,signInMethod:Qt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qt.credentialFromTaggedObject(e)}static credentialFromError(e){return Qt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Qt.credential(t,s)}catch{return null}}}Qt.GOOGLE_SIGN_IN_METHOD="google.com";Qt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends gi{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:Xt.PROVIDER_ID,signInMethod:Xt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xt.credentialFromTaggedObject(e)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xt.credential(e.oauthAccessToken)}catch{return null}}}Xt.GITHUB_SIGN_IN_METHOD="github.com";Xt.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends gi{constructor(){super("twitter.com")}static credential(e,t){return ms._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return wn.credential(t,s)}catch{return null}}}wn.TWITTER_SIGN_IN_METHOD="twitter.com";wn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(n,e){return pi(n,"POST","/v1/accounts:signUp",On(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const i=await Ct._fromIdTokenResponse(e,s,r),o=Ad(s);return new ps({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=Ad(s);return new ps({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function Ad(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Wt{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,xo.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new xo(e,t,s,r)}}function Tp(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?xo._fromErrorAndOperation(n,i,e,s):i})}async function db(n,e,t=!1){const s=await Js(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ps._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(n,e,t=!1){const{auth:s}=n;if(ft(s.app))return Promise.reject(sn(s));const r="reauthenticate";try{const i=await Js(n,Tp(s,r,e,n),t);oe(i.idToken,s,"internal-error");const o=nc(i.idToken);oe(o,s,"internal-error");const{sub:l}=o;return oe(n.uid===l,s,"user-mismatch"),ps._forOperation(n,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Et(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ep(n,e,t=!1){if(ft(n.app))return Promise.reject(sn(n));const s="signIn",r=await Tp(n,s,e),i=await ps._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(i.user),i}async function fb(n,e){return Ep(qn(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ip(n){const e=qn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mb(n,e,t){if(ft(n.app))return Promise.reject(sn(n));const s=qn(n),o=await cl(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ub).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Ip(n),c}),l=await ps._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function pb(n,e,t){return ft(n.app)?Promise.reject(sn(n)):fb(Pe(n),nr.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Ip(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(n,e){return dn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Pe(n),i={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Js(s,gb(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const l=s.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function vb(n,e,t,s){return Pe(n).onIdTokenChanged(e,t,s)}function xb(n,e,t){return Pe(n).beforeAuthStateChanged(e,t)}function _b(n,e,t,s){return Pe(n).onAuthStateChanged(e,t,s)}function Sd(n){return Pe(n).signOut()}const _o="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_o,"1"),this.storage.removeItem(_o),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=1e3,wb=10;class Ap extends Cp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);j_()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,wb):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},bb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ap.type="LOCAL";const Tb=Ap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp extends Cp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Sp.type="SESSION";const Np=Sp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new $o(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(t.origin,i)),c=await Eb(l);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$o.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=ac("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return window}function Cb(n){Ft().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){return typeof Ft().WorkerGlobalScope<"u"&&typeof Ft().importScripts=="function"}async function Ab(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Sb(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Nb(){return Rp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="firebaseLocalStorageDb",Rb=1,bo="firebaseLocalStorage",kp="fbase_key";class yi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oo(n,e){return n.transaction([bo],e?"readwrite":"readonly").objectStore(bo)}function Pb(){const n=indexedDB.deleteDatabase(Pp);return new yi(n).toPromise()}function ul(){const n=indexedDB.open(Pp,Rb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(bo,{keyPath:kp})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(bo)?e(s):(s.close(),await Pb(),e(await ul()))})})}async function Nd(n,e,t){const s=Oo(n,!0).put({[kp]:e,value:t});return new yi(s).toPromise()}async function kb(n,e){const t=Oo(n,!1).get(e),s=await new yi(t).toPromise();return s===void 0?null:s.value}function Rd(n,e){const t=Oo(n,!0).delete(e);return new yi(t).toPromise()}const Db=800,Mb=3;class Dp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ul(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Mb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$o._getInstance(Nb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await Ab(),!this.activeServiceWorker)return;this.sender=new Ib(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Sb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ul();return await Nd(e,_o,"1"),await Rd(e,_o),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Nd(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>kb(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rd(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Oo(r,!1).getAll();return new yi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Db)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dp.type="LOCAL";const Lb=Dp;new mi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n,e){return e?en(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends rc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $s(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $s(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $s(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vb(n){return Ep(n.auth,new lc(n),n.bypassAuthState)}function Ub(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),hb(t,new lc(n),n.bypassAuthState)}async function jb(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),db(t,new lc(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,t,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vb;case"linkViaPopup":case"linkViaRedirect":return jb;case"reauthViaPopup":case"reauthViaRedirect":return Ub;default:Et(this.auth,"internal-error")}}resolve(e){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=new mi(2e3,1e4);async function Pd(n,e,t){if(ft(n.app))return Promise.reject(At(n,"operation-not-supported-in-this-environment"));const s=qn(n);v_(n,e,oc);const r=Mp(s,t);return new ns(s,"signInViaPopup",e,r).executeNotNull()}class ns extends Lp{constructor(e,t,s,r,i){super(e,t,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){ln(this.filter.length===1,"Popup operations only handle one event");const e=ac();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(At(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fb.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="pendingRedirect",Xi=new Map;class Ob extends Lp{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Xi.get(this.auth._key());if(!e){try{const s=await qb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Xi.set(this.auth._key(),e)}return this.bypassAuthState||Xi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qb(n,e){const t=Hb(e),s=Gb(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function Bb(n,e){Xi.set(n._key(),e)}function Gb(n){return en(n._redirectPersistence)}function Hb(n){return Qi($b,n.config.apiKey,n.name)}async function zb(n,e,t=!1){if(ft(n.app))return Promise.reject(sn(n));const s=qn(n),r=Mp(s,e),o=await new Ob(s,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=10*60*1e3;class Jb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Vp(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(At(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wb&&this.cachedEventUids.clear(),this.cachedEventUids.has(kd(e))}saveEventToCache(e){this.cachedEventUids.add(kd(e)),this.lastProcessedEventTime=Date.now()}}function kd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Vp({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vp(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(n,e={}){return dn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xb=/^https?/;async function Zb(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Yb(n);for(const t of e)try{if(ew(t))return}catch{}Et(n,"unauthorized-domain")}function ew(n){const e=al(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!Xb.test(t))return!1;if(Qb.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new mi(3e4,6e4);function Dd(){const n=Ft().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nw(n){return new Promise((e,t)=>{var r,i,o;function s(){Dd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dd(),t(At(n,"network-request-failed"))},timeout:tw.get()})}if((i=(r=Ft().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Ft().gapi)!=null&&o.load)s();else{const l=W_("iframefcb");return Ft()[l]=()=>{gapi.load?s():t(At(n,"network-request-failed"))},_p(`${z_()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw Zi=null,e})}let Zi=null;function sw(n){return Zi=Zi||nw(n),Zi}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new mi(5e3,15e3),iw="__/auth/iframe",ow="emulator/auth/iframe",aw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cw(n){const e=n.config;oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?tc(e,ow):`https://${n.config.authDomain}/${iw}`,s={apiKey:e.apiKey,appName:n.name,v:bs},r=lw.get(n.config.apiHost);r&&(s.eid=r);const i=n._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${fi(s).slice(1)}`}async function uw(n){const e=await sw(n),t=Ft().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:cw(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aw,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=At(n,"network-request-failed"),l=Ft().setTimeout(()=>{i(o)},rw.get());function c(){Ft().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hw=500,fw=600,mw="_blank",pw="http://localhost";class Md{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gw(n,e,t,s=hw,r=fw){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...dw,width:s.toString(),height:r.toString(),top:i,left:o},u=ot().toLowerCase();t&&(l=fp(u)?mw:t),dp(u)&&(e=e||pw,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[x,b])=>`${g}${x}=${b},`,"");if(U_(u)&&l!=="_self")return yw(e||"",l),new Md(null);const p=window.open(e||"",l,m);oe(p,n,"popup-blocked");try{p.focus()}catch{}return new Md(p)}function yw(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="__/auth/handler",xw="emulator/auth/handler",_w=encodeURIComponent("fac");async function Ld(n,e,t,s,r,i){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:bs,eventId:r};if(e instanceof oc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",rx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof gi){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await n._getAppCheckToken(),u=c?`#${_w}=${encodeURIComponent(c)}`:"";return`${bw(n)}?${fi(l).slice(1)}${u}`}function bw({config:n}){return n.emulator?tc(n,xw):`https://${n.authDomain}/${vw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="webStorageSupport";class ww{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Np,this._completeRedirectFn=zb,this._overrideRedirectResult=Bb}async _openPopup(e,t,s,r){var o;ln((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Ld(e,t,s,al(),r);return gw(e,i,ac())}async _openRedirect(e,t,s,r){await this._originValidation(e);const i=await Ld(e,t,s,al(),r);return Cb(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(ln(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await uw(e),s=new Jb(e);return t.register("authEvent",r=>(oe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oa,{type:Oa},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[Oa];i!==void 0&&t(!!i),Et(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vp()||hp()||sc()}}const Tw=ww;var Vd="@firebase/auth",Ud="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cw(n){fs(new Dn("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xp(n)},u=new B_(s,r,i,c);return Z_(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),fs(new Dn("auth-internal",e=>{const t=qn(e.getProvider("auth").getImmediate());return(s=>new Ew(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jt(Vd,Ud,Iw(n)),jt(Vd,Ud,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=5*60,Sw=Qm("authIdTokenMaxAge")||Aw;let jd=null;const Nw=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Sw)return;const r=t==null?void 0:t.token;jd!==r&&(jd=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Rw(n=Xl()){const e=jo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=X_(n,{popupRedirectResolver:Tw,persistence:[Lb,Tb,Np]}),s=Qm("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Nw(i.toString());xb(t,o,()=>o(t.currentUser)),vb(t,l=>o(l))}}const r=Jm("auth");return r&&eb(t,`http://${r}`),t}function Pw(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}G_({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const i=At("internal-error");i.customData=r,t(i)},s.type="text/javascript",s.charset="UTF-8",Pw().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cw("Browser");var Fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nn,Up;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function w(){}w.prototype=_.prototype,I.F=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(S,N,D){for(var A=Array(arguments.length-2),$=2;$<arguments.length;$++)A[$-2]=arguments[$];return _.prototype[N].apply(S,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,w){w||(w=0);const S=Array(16);if(typeof _=="string")for(var N=0;N<16;++N)S[N]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(N=0;N<16;++N)S[N]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],N=I.g[2];let D=I.g[3],A;A=_+(D^w&(N^D))+S[0]+3614090360&4294967295,_=w+(A<<7&4294967295|A>>>25),A=D+(N^_&(w^N))+S[1]+3905402710&4294967295,D=_+(A<<12&4294967295|A>>>20),A=N+(w^D&(_^w))+S[2]+606105819&4294967295,N=D+(A<<17&4294967295|A>>>15),A=w+(_^N&(D^_))+S[3]+3250441966&4294967295,w=N+(A<<22&4294967295|A>>>10),A=_+(D^w&(N^D))+S[4]+4118548399&4294967295,_=w+(A<<7&4294967295|A>>>25),A=D+(N^_&(w^N))+S[5]+1200080426&4294967295,D=_+(A<<12&4294967295|A>>>20),A=N+(w^D&(_^w))+S[6]+2821735955&4294967295,N=D+(A<<17&4294967295|A>>>15),A=w+(_^N&(D^_))+S[7]+4249261313&4294967295,w=N+(A<<22&4294967295|A>>>10),A=_+(D^w&(N^D))+S[8]+1770035416&4294967295,_=w+(A<<7&4294967295|A>>>25),A=D+(N^_&(w^N))+S[9]+2336552879&4294967295,D=_+(A<<12&4294967295|A>>>20),A=N+(w^D&(_^w))+S[10]+4294925233&4294967295,N=D+(A<<17&4294967295|A>>>15),A=w+(_^N&(D^_))+S[11]+2304563134&4294967295,w=N+(A<<22&4294967295|A>>>10),A=_+(D^w&(N^D))+S[12]+1804603682&4294967295,_=w+(A<<7&4294967295|A>>>25),A=D+(N^_&(w^N))+S[13]+4254626195&4294967295,D=_+(A<<12&4294967295|A>>>20),A=N+(w^D&(_^w))+S[14]+2792965006&4294967295,N=D+(A<<17&4294967295|A>>>15),A=w+(_^N&(D^_))+S[15]+1236535329&4294967295,w=N+(A<<22&4294967295|A>>>10),A=_+(N^D&(w^N))+S[1]+4129170786&4294967295,_=w+(A<<5&4294967295|A>>>27),A=D+(w^N&(_^w))+S[6]+3225465664&4294967295,D=_+(A<<9&4294967295|A>>>23),A=N+(_^w&(D^_))+S[11]+643717713&4294967295,N=D+(A<<14&4294967295|A>>>18),A=w+(D^_&(N^D))+S[0]+3921069994&4294967295,w=N+(A<<20&4294967295|A>>>12),A=_+(N^D&(w^N))+S[5]+3593408605&4294967295,_=w+(A<<5&4294967295|A>>>27),A=D+(w^N&(_^w))+S[10]+38016083&4294967295,D=_+(A<<9&4294967295|A>>>23),A=N+(_^w&(D^_))+S[15]+3634488961&4294967295,N=D+(A<<14&4294967295|A>>>18),A=w+(D^_&(N^D))+S[4]+3889429448&4294967295,w=N+(A<<20&4294967295|A>>>12),A=_+(N^D&(w^N))+S[9]+568446438&4294967295,_=w+(A<<5&4294967295|A>>>27),A=D+(w^N&(_^w))+S[14]+3275163606&4294967295,D=_+(A<<9&4294967295|A>>>23),A=N+(_^w&(D^_))+S[3]+4107603335&4294967295,N=D+(A<<14&4294967295|A>>>18),A=w+(D^_&(N^D))+S[8]+1163531501&4294967295,w=N+(A<<20&4294967295|A>>>12),A=_+(N^D&(w^N))+S[13]+2850285829&4294967295,_=w+(A<<5&4294967295|A>>>27),A=D+(w^N&(_^w))+S[2]+4243563512&4294967295,D=_+(A<<9&4294967295|A>>>23),A=N+(_^w&(D^_))+S[7]+1735328473&4294967295,N=D+(A<<14&4294967295|A>>>18),A=w+(D^_&(N^D))+S[12]+2368359562&4294967295,w=N+(A<<20&4294967295|A>>>12),A=_+(w^N^D)+S[5]+4294588738&4294967295,_=w+(A<<4&4294967295|A>>>28),A=D+(_^w^N)+S[8]+2272392833&4294967295,D=_+(A<<11&4294967295|A>>>21),A=N+(D^_^w)+S[11]+1839030562&4294967295,N=D+(A<<16&4294967295|A>>>16),A=w+(N^D^_)+S[14]+4259657740&4294967295,w=N+(A<<23&4294967295|A>>>9),A=_+(w^N^D)+S[1]+2763975236&4294967295,_=w+(A<<4&4294967295|A>>>28),A=D+(_^w^N)+S[4]+1272893353&4294967295,D=_+(A<<11&4294967295|A>>>21),A=N+(D^_^w)+S[7]+4139469664&4294967295,N=D+(A<<16&4294967295|A>>>16),A=w+(N^D^_)+S[10]+3200236656&4294967295,w=N+(A<<23&4294967295|A>>>9),A=_+(w^N^D)+S[13]+681279174&4294967295,_=w+(A<<4&4294967295|A>>>28),A=D+(_^w^N)+S[0]+3936430074&4294967295,D=_+(A<<11&4294967295|A>>>21),A=N+(D^_^w)+S[3]+3572445317&4294967295,N=D+(A<<16&4294967295|A>>>16),A=w+(N^D^_)+S[6]+76029189&4294967295,w=N+(A<<23&4294967295|A>>>9),A=_+(w^N^D)+S[9]+3654602809&4294967295,_=w+(A<<4&4294967295|A>>>28),A=D+(_^w^N)+S[12]+3873151461&4294967295,D=_+(A<<11&4294967295|A>>>21),A=N+(D^_^w)+S[15]+530742520&4294967295,N=D+(A<<16&4294967295|A>>>16),A=w+(N^D^_)+S[2]+3299628645&4294967295,w=N+(A<<23&4294967295|A>>>9),A=_+(N^(w|~D))+S[0]+4096336452&4294967295,_=w+(A<<6&4294967295|A>>>26),A=D+(w^(_|~N))+S[7]+1126891415&4294967295,D=_+(A<<10&4294967295|A>>>22),A=N+(_^(D|~w))+S[14]+2878612391&4294967295,N=D+(A<<15&4294967295|A>>>17),A=w+(D^(N|~_))+S[5]+4237533241&4294967295,w=N+(A<<21&4294967295|A>>>11),A=_+(N^(w|~D))+S[12]+1700485571&4294967295,_=w+(A<<6&4294967295|A>>>26),A=D+(w^(_|~N))+S[3]+2399980690&4294967295,D=_+(A<<10&4294967295|A>>>22),A=N+(_^(D|~w))+S[10]+4293915773&4294967295,N=D+(A<<15&4294967295|A>>>17),A=w+(D^(N|~_))+S[1]+2240044497&4294967295,w=N+(A<<21&4294967295|A>>>11),A=_+(N^(w|~D))+S[8]+1873313359&4294967295,_=w+(A<<6&4294967295|A>>>26),A=D+(w^(_|~N))+S[15]+4264355552&4294967295,D=_+(A<<10&4294967295|A>>>22),A=N+(_^(D|~w))+S[6]+2734768916&4294967295,N=D+(A<<15&4294967295|A>>>17),A=w+(D^(N|~_))+S[13]+1309151649&4294967295,w=N+(A<<21&4294967295|A>>>11),A=_+(N^(w|~D))+S[4]+4149444226&4294967295,_=w+(A<<6&4294967295|A>>>26),A=D+(w^(_|~N))+S[11]+3174756917&4294967295,D=_+(A<<10&4294967295|A>>>22),A=N+(_^(D|~w))+S[2]+718787259&4294967295,N=D+(A<<15&4294967295|A>>>17),A=w+(D^(N|~_))+S[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+D&4294967295}s.prototype.v=function(I,_){_===void 0&&(_=I.length);const w=_-this.blockSize,S=this.C;let N=this.h,D=0;for(;D<_;){if(N==0)for(;D<=w;)r(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<_;)if(S[N++]=I.charCodeAt(D++),N==this.blockSize){r(this,S),N=0;break}}else for(;D<_;)if(S[N++]=I[D++],N==this.blockSize){r(this,S),N=0;break}}this.h=N,this.o+=_},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;_=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=_&255,_/=256;for(this.v(I),I=Array(16),_=0,w=0;w<4;++w)for(let S=0;S<32;S+=8)I[_++]=this.g[w]>>>S&255;return I};function i(I,_){var w=l;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function o(I,_){this.h=_;const w=[];let S=!0;for(let N=I.length-1;N>=0;N--){const D=I[N]|0;S&&D==_||(w[N]=D,S=!1)}this.g=w}var l={};function c(I){return-128<=I&&I<128?i(I,function(_){return new o([_|0],_<0?-1:0)}):new o([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return C(u(-I));const _=[];let w=1;for(let S=0;I>=w;S++)_[S]=I/w|0,w*=4294967296;return new o(_,0)}function m(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return C(m(I.substring(1),_));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=u(Math.pow(_,8));let S=p;for(let D=0;D<I.length;D+=8){var N=Math.min(8,I.length-D);const A=parseInt(I.substring(D,D+N),_);N<8?(N=u(Math.pow(_,N)),S=S.j(N).add(u(A))):(S=S.j(w),S=S.add(u(A)))}return S}var p=c(0),g=c(1),x=c(16777216);n=o.prototype,n.m=function(){if(T(this))return-C(this).m();let I=0,_=1;for(let w=0;w<this.g.length;w++){const S=this.i(w);I+=(S>=0?S:4294967296+S)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(T(this))return"-"+C(this).toString(I);const _=u(Math.pow(I,6));var w=this;let S="";for(;;){const N=L(w,_).g;w=k(w,N.j(_));let D=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=N,b(w))return D+S;for(;D.length<6;)D="0"+D;S=D+S}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(let _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function T(I){return I.h==-1}n.l=function(I){return I=k(this,I),T(I)?-1:b(I)?0:1};function C(I){const _=I.g.length,w=[];for(let S=0;S<_;S++)w[S]=~I.g[S];return new o(w,~I.h).add(g)}n.abs=function(){return T(this)?C(this):this},n.add=function(I){const _=Math.max(this.g.length,I.g.length),w=[];let S=0;for(let N=0;N<=_;N++){let D=S+(this.i(N)&65535)+(I.i(N)&65535),A=(D>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);S=A>>>16,D&=65535,A&=65535,w[N]=A<<16|D}return new o(w,w[w.length-1]&-2147483648?-1:0)};function k(I,_){return I.add(C(_))}n.j=function(I){if(b(this)||b(I))return p;if(T(this))return T(I)?C(this).j(C(I)):C(C(this).j(I));if(T(I))return C(this.j(C(I)));if(this.l(x)<0&&I.l(x)<0)return u(this.m()*I.m());const _=this.g.length+I.g.length,w=[];for(var S=0;S<2*_;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(let N=0;N<I.g.length;N++){const D=this.i(S)>>>16,A=this.i(S)&65535,$=I.i(N)>>>16,Q=I.i(N)&65535;w[2*S+2*N]+=A*Q,R(w,2*S+2*N),w[2*S+2*N+1]+=D*Q,R(w,2*S+2*N+1),w[2*S+2*N+1]+=A*$,R(w,2*S+2*N+1),w[2*S+2*N+2]+=D*$,R(w,2*S+2*N+2)}for(I=0;I<_;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=_;I<2*_;I++)w[I]=0;return new o(w,0)};function R(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function P(I,_){this.g=I,this.h=_}function L(I,_){if(b(_))throw Error("division by zero");if(b(I))return new P(p,p);if(T(I))return _=L(C(I),_),new P(C(_.g),C(_.h));if(T(_))return _=L(I,C(_)),new P(C(_.g),_.h);if(I.g.length>30){if(T(I)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var w=g,S=_;S.l(I)<=0;)w=U(w),S=U(S);var N=F(w,1),D=F(S,1);for(S=F(S,2),w=F(w,2);!b(S);){var A=D.add(S);A.l(I)<=0&&(N=N.add(w),D=A),S=F(S,1),w=F(w,1)}return _=k(I,N.j(_)),new P(N,_)}for(N=p;I.l(_)>=0;){for(w=Math.max(1,Math.floor(I.m()/_.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),D=u(w),A=D.j(_);T(A)||A.l(I)>0;)w-=S,D=u(w),A=D.j(_);b(D)&&(D=g),N=N.add(D),I=k(I,A)}return new P(N,I)}n.B=function(I){return L(this,I).h},n.and=function(I){const _=Math.max(this.g.length,I.g.length),w=[];for(let S=0;S<_;S++)w[S]=this.i(S)&I.i(S);return new o(w,this.h&I.h)},n.or=function(I){const _=Math.max(this.g.length,I.g.length),w=[];for(let S=0;S<_;S++)w[S]=this.i(S)|I.i(S);return new o(w,this.h|I.h)},n.xor=function(I){const _=Math.max(this.g.length,I.g.length),w=[];for(let S=0;S<_;S++)w[S]=this.i(S)^I.i(S);return new o(w,this.h^I.h)};function U(I){const _=I.g.length+1,w=[];for(let S=0;S<_;S++)w[S]=I.i(S)<<1|I.i(S-1)>>>31;return new o(w,I.h)}function F(I,_){const w=_>>5;_%=32;const S=I.g.length-w,N=[];for(let D=0;D<S;D++)N[D]=_>0?I.i(D+w)>>>_|I.i(D+w+1)<<32-_:I.i(D+w);return new o(N,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Up=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=m,Nn=o}).apply(typeof Fd<"u"?Fd:typeof self<"u"?self:typeof window<"u"?window:{});var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jp,Ur,Fp,eo,dl,$p,Op,qp;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oi=="object"&&Oi];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function r(h,y){if(y)e:{var v=s;h=h.split(".");for(var E=0;E<h.length-1;E++){var M=h[E];if(!(M in v))break e;v=v[M]}h=h[h.length-1],E=v[h],y=y(E),y!=E&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(y){var v=[],E;for(E in y)Object.prototype.hasOwnProperty.call(y,E)&&v.push([E,y[E]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function c(h,y,v){return h.call.apply(h.bind,arguments)}function u(h,y,v){return u=c,u.apply(null,arguments)}function m(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var E=v.slice();return E.push.apply(E,arguments),h.apply(this,E)}}function p(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(E,M,j){for(var W=Array(arguments.length-2),me=2;me<arguments.length;me++)W[me-2]=arguments[me];return y.prototype[M].apply(E,W)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function x(h){const y=h.length;if(y>0){const v=Array(y);for(let E=0;E<y;E++)v[E]=h[E];return v}return[]}function b(h,y){for(let E=1;E<arguments.length;E++){const M=arguments[E];var v=typeof M;if(v=v!="object"?v:M?Array.isArray(M)?"array":v:"null",v=="array"||v=="object"&&typeof M.length=="number"){v=h.length||0;const j=M.length||0;h.length=v+j;for(let W=0;W<j;W++)h[v+W]=M[W]}else h.push(M)}}class T{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function C(h){o.setTimeout(()=>{throw h},0)}function k(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class R{constructor(){this.h=this.g=null}add(y,v){const E=P.get();E.set(y,v),this.h?this.h.next=E:this.g=E,this.h=E}}var P=new T(()=>new L,h=>h.reset());class L{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,I=new R,_=()=>{const h=Promise.resolve(void 0);U=()=>{h.then(w)}};function w(){for(var h;h=k();){try{h.h.call(h.g)}catch(v){C(v)}var y=P;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}F=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};o.addEventListener("test",v,y),o.removeEventListener("test",v,y)}catch{}return h}();function A(h){return/^[\s\xa0]*$/.test(h)}function $(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}p($,N),$.prototype.init=function(h,y){const v=this.type=h.type,E=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),G=0;function ne(h,y,v,E,M){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!E,this.ha=M,this.key=++G,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function z(h,y,v){for(const E in h)y.call(v,h[E],E,h)}function X(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function ie(h){const y={};for(const v in h)y[v]=h[v];return y}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(h,y){let v,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(v in E)h[v]=E[v];for(let j=0;j<ce.length;j++)v=ce[j],Object.prototype.hasOwnProperty.call(E,v)&&(h[v]=E[v])}}function Ve(h){this.src=h,this.g={},this.h=0}Ve.prototype.add=function(h,y,v,E,M){const j=h.toString();h=this.g[j],h||(h=this.g[j]=[],this.h++);const W=H(h,y,E,M);return W>-1?(y=h[W],v||(y.fa=!1)):(y=new ne(y,this.src,j,!!E,M),y.fa=v,h.push(y)),y};function O(h,y){const v=y.type;if(v in h.g){var E=h.g[v],M=Array.prototype.indexOf.call(E,y,void 0),j;(j=M>=0)&&Array.prototype.splice.call(E,M,1),j&&(de(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function H(h,y,v,E){for(let M=0;M<h.length;++M){const j=h[M];if(!j.da&&j.listener==y&&j.capture==!!v&&j.ha==E)return M}return-1}var re="closure_lm_"+(Math.random()*1e6|0),te={};function K(h,y,v,E,M){if(Array.isArray(y)){for(let j=0;j<y.length;j++)K(h,y[j],v,E,M);return null}return v=ru(v),h&&h[Q]?h.J(y,v,l(E)?!!E.capture:!!E,M):fe(h,y,v,!1,E,M)}function fe(h,y,v,E,M,j){if(!y)throw Error("Invalid event type");const W=l(M)?!!M.capture:!!M;let me=pa(h);if(me||(h[re]=me=new Ve(h)),v=me.add(y,v,E,W,j),v.proxy)return v;if(E=mr(),v.proxy=E,E.src=h,E.listener=v,h.addEventListener)D||(M=W),M===void 0&&(M=!1),h.addEventListener(y.toString(),E,M);else if(h.attachEvent)h.attachEvent(su(y.toString()),E);else if(h.addListener&&h.removeListener)h.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return v}function mr(){function h(v){return y.call(h.src,h.listener,v)}const y=gy;return h}function nu(h,y,v,E,M){if(Array.isArray(y))for(var j=0;j<y.length;j++)nu(h,y[j],v,E,M);else E=l(E)?!!E.capture:!!E,v=ru(v),h&&h[Q]?(h=h.i,j=String(y).toString(),j in h.g&&(y=h.g[j],v=H(y,v,E,M),v>-1&&(de(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[j],h.h--)))):h&&(h=pa(h))&&(y=h.g[y.toString()],h=-1,y&&(h=H(y,v,E,M)),(v=h>-1?y[h]:null)&&ma(v))}function ma(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Q])O(y.i,h);else{var v=h.type,E=h.proxy;y.removeEventListener?y.removeEventListener(v,E,h.capture):y.detachEvent?y.detachEvent(su(v),E):y.addListener&&y.removeListener&&y.removeListener(E),(v=pa(y))?(O(v,h),v.h==0&&(v.src=null,y[re]=null)):de(h)}}}function su(h){return h in te?te[h]:te[h]="on"+h}function gy(h,y){if(h.da)h=!0;else{y=new $(y,this);const v=h.listener,E=h.ha||h.src;h.fa&&ma(h),h=v.call(E,y)}return h}function pa(h){return h=h[re],h instanceof Ve?h:null}var ga="__closure_events_fn_"+(Math.random()*1e9>>>0);function ru(h){return typeof h=="function"?h:(h[ga]||(h[ga]=function(y){return h.handleEvent(y)}),h[ga])}function Xe(){S.call(this),this.i=new Ve(this),this.M=this,this.G=null}p(Xe,S),Xe.prototype[Q]=!0,Xe.prototype.removeEventListener=function(h,y,v,E){nu(this,h,y,v,E)};function at(h,y){var v,E=h.G;if(E)for(v=[];E;E=E.G)v.push(E);if(h=h.M,E=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var M=y;y=new N(E,h),be(y,M)}M=!0;let j,W;if(v)for(W=v.length-1;W>=0;W--)j=y.g=v[W],M=Si(j,E,!0,y)&&M;if(j=y.g=h,M=Si(j,E,!0,y)&&M,M=Si(j,E,!1,y)&&M,v)for(W=0;W<v.length;W++)j=y.g=v[W],M=Si(j,E,!1,y)&&M}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let E=0;E<v.length;E++)de(v[E]);delete h.g[y],h.h--}}this.G=null},Xe.prototype.J=function(h,y,v,E){return this.i.add(String(h),y,!1,v,E)},Xe.prototype.K=function(h,y,v,E){return this.i.add(String(h),y,!0,v,E)};function Si(h,y,v,E){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let M=!0;for(let j=0;j<y.length;++j){const W=y[j];if(W&&!W.da&&W.capture==v){const me=W.listener,Be=W.ha||W.src;W.fa&&O(h.i,W),M=me.call(Be,E)!==!1&&M}}return M&&!E.defaultPrevented}function yy(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(h,y||0)}function iu(h){h.g=yy(()=>{h.g=null,h.i&&(h.i=!1,iu(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class vy extends S{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(h){S.call(this),this.h=h,this.g={}}p(pr,S);var ou=[];function au(h){z(h.g,function(y,v){this.g.hasOwnProperty(v)&&ma(y)},h),h.g={}}pr.prototype.N=function(){pr.Z.N.call(this),au(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ya=o.JSON.stringify,xy=o.JSON.parse,_y=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function lu(){}function cu(){}var gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function va(){N.call(this,"d")}p(va,N);function xa(){N.call(this,"c")}p(xa,N);var zn={},uu=null;function Ni(){return uu=uu||new Xe}zn.Ia="serverreachability";function du(h){N.call(this,zn.Ia,h)}p(du,N);function yr(h){const y=Ni();at(y,new du(y))}zn.STAT_EVENT="statevent";function hu(h,y){N.call(this,zn.STAT_EVENT,h),this.stat=y}p(hu,N);function lt(h){const y=Ni();at(y,new hu(y,h))}zn.Ja="timingevent";function fu(h,y){N.call(this,zn.Ja,h),this.size=y}p(fu,N);function vr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},y)}function xr(){this.g=!0}xr.prototype.ua=function(){this.g=!1};function by(h,y,v,E,M,j){h.info(function(){if(h.g)if(j){var W="",me=j.split("&");for(let Ie=0;Ie<me.length;Ie++){var Be=me[Ie].split("=");if(Be.length>1){const ze=Be[0];Be=Be[1];const Dt=ze.split("_");W=Dt.length>=2&&Dt[1]=="type"?W+(ze+"="+Be+"&"):W+(ze+"=redacted&")}}}else W=null;else W=j;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+y+`
`+v+`
`+W})}function wy(h,y,v,E,M,j,W){h.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+y+`
`+v+`
`+j+" "+W})}function Ss(h,y,v,E){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ey(h,v)+(E?" "+E:"")})}function Ty(h,y){h.info(function(){return"TIMEOUT: "+y})}xr.prototype.info=function(){};function Ey(h,y){if(!h.g)return y;if(!y)return null;try{const j=JSON.parse(y);if(j){for(h=0;h<j.length;h++)if(Array.isArray(j[h])){var v=j[h];if(!(v.length<2)){var E=v[1];if(Array.isArray(E)&&!(E.length<1)){var M=E[0];if(M!="noop"&&M!="stop"&&M!="close")for(let W=1;W<E.length;W++)E[W]=""}}}}return ya(j)}catch{return y}}var Ri={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pu;function _a(){}p(_a,lu),_a.prototype.g=function(){return new XMLHttpRequest},pu=new _a;function _r(h){return encodeURIComponent(String(h))}function Iy(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function fn(h,y,v,E){this.j=h,this.i=y,this.l=v,this.S=E||1,this.V=new pr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}var yu={},ba={};function wa(h,y,v){h.M=1,h.A=ki(kt(y)),h.u=v,h.R=!0,vu(h,null)}function vu(h,y){h.F=Date.now(),Pi(h),h.B=kt(h.A);var v=h.B,E=h.S;Array.isArray(E)||(E=[String(E)]),Pu(v.i,"t",E),h.C=0,v=h.j.L,h.h=new gu,h.g=Ku(h.j,v?y:null,!h.u),h.P>0&&(h.O=new vy(u(h.Y,h,h.g),h.P)),y=h.V,v=h.g,E=h.ba;var M="readystatechange";Array.isArray(M)||(M&&(ou[0]=M.toString()),M=ou);for(let j=0;j<M.length;j++){const W=K(v,M[j],E||y.handleEvent,!1,y.h||y);if(!W)break;y.g[W.key]=W}y=h.J?ie(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),yr(),by(h.i,h.v,h.B,h.l,h.S,h.u)}fn.prototype.ba=function(h){h=h.target;const y=this.O;y&&gn(h)==3?y.j():this.Y(h)},fn.prototype.Y=function(h){try{if(h==this.g)e:{const me=gn(this.g),Be=this.g.ya(),Ie=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||ju(this.g)))){this.K||me!=4||Be==7||(Be==8||Ie<=0?yr(3):yr(2)),Ta(this);var y=this.g.ca();this.X=y;var v=Cy(this);if(this.o=y==200,wy(this.i,this.v,this.B,this.l,this.S,me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var E,M=this.g;if((E=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(E)){var j=E;break t}}j=null}if(h=j)Ss(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ea(this,h);else{this.o=!1,this.m=3,lt(12),Wn(this),br(this);break e}}if(this.R){h=!0;let ze;for(;!this.K&&this.C<v.length;)if(ze=Ay(this,v),ze==ba){me==4&&(this.m=4,lt(14),h=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(ze==yu){this.m=4,lt(15),Ss(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Ss(this.i,this.l,ze,null),Ea(this,ze);if(xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||v.length!=0||this.h.h||(this.m=1,lt(16),h=!1),this.o=this.o&&h,!h)Ss(this.i,this.l,v,"[Invalid Chunked Response]"),Wn(this),br(this);else if(v.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ka(W),W.P=!0,lt(11))}}else Ss(this.i,this.l,v,null),Ea(this,v);me==4&&Wn(this),this.o&&!this.K&&(me==4?Hu(this.j,this):(this.o=!1,Pi(this)))}else Oy(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,lt(12)):(this.m=0,lt(13)),Wn(this),br(this)}}}catch{}finally{}};function Cy(h){if(!xu(h))return h.g.la();const y=ju(h.g);if(y==="")return"";let v="";const E=y.length,M=gn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Wn(h),br(h),"";h.h.i=new o.TextDecoder}for(let j=0;j<E;j++)h.h.h=!0,v+=h.h.i.decode(y[j],{stream:!(M&&j==E-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function xu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ay(h,y){var v=h.C,E=y.indexOf(`
`,v);return E==-1?ba:(v=Number(y.substring(v,E)),isNaN(v)?yu:(E+=1,E+v>y.length?ba:(y=y.slice(E,E+v),h.C=E+v,y)))}fn.prototype.cancel=function(){this.K=!0,Wn(this)};function Pi(h){h.T=Date.now()+h.H,_u(h,h.H)}function _u(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=vr(u(h.aa,h),y)}function Ta(h){h.D&&(o.clearTimeout(h.D),h.D=null)}fn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ty(this.i,this.B),this.M!=2&&(yr(),lt(17)),Wn(this),this.m=2,br(this)):_u(this,this.T-h)};function br(h){h.j.I==0||h.K||Hu(h.j,h)}function Wn(h){Ta(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,au(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ea(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ia(v.h,h))){if(!h.L&&Ia(v.h,h)&&v.I==3){try{var E=v.Ba.g.parse(y)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ui(v),Li(v);else break e;Pa(v),lt(18)}}else v.xa=M[1],0<v.xa-v.K&&M[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=vr(u(v.Va,v),6e3));Tu(v.h)<=1&&v.ta&&(v.ta=void 0)}else Kn(v,11)}else if((h.L||v.g==h)&&Ui(v),!A(y))for(M=v.Ba.g.parse(y),y=0;y<M.length;y++){let Ie=M[y];const ze=Ie[0];if(!(ze<=v.K))if(v.K=ze,Ie=Ie[1],v.I==2)if(Ie[0]=="c"){v.M=Ie[1],v.ba=Ie[2];const Dt=Ie[3];Dt!=null&&(v.ka=Dt,v.j.info("VER="+v.ka));const Yn=Ie[4];Yn!=null&&(v.za=Yn,v.j.info("SVER="+v.za));const yn=Ie[5];yn!=null&&typeof yn=="number"&&yn>0&&(E=1.5*yn,v.O=E,v.j.info("backChannelRequestTimeoutMs_="+E)),E=v;const vn=h.g;if(vn){const Fi=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var j=E.h;j.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ca(j,j.h),j.h=null))}if(E.G){const Da=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Da&&(E.wa=Da,Ae(E.J,E.G,Da))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),E=v;var W=h;if(E.na=Ju(E,E.L?E.ba:null,E.W),W.L){Eu(E.h,W);var me=W,Be=E.O;Be&&(me.H=Be),me.D&&(Ta(me),Pi(me)),E.g=W}else Bu(E);v.i.length>0&&Vi(v)}else Ie[0]!="stop"&&Ie[0]!="close"||Kn(v,7);else v.I==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Kn(v,7):Ra(v):Ie[0]!="noop"&&v.l&&v.l.qa(Ie),v.A=0)}}yr(4)}catch{}}var Sy=class{constructor(h,y){this.g=h,this.map=y}};function bu(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Tu(h){return h.h?1:h.g?h.g.size:0}function Ia(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ca(h,y){h.g?h.g.add(y):h.h=y}function Eu(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}bu.prototype.cancel=function(){if(this.i=Iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Iu(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return x(h.i)}var Cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ny(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const E=h[v].indexOf("=");let M,j=null;E>=0?(M=h[v].substring(0,E),j=h[v].substring(E+1)):M=h[v],y(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function mn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof mn?(this.l=h.l,wr(this,h.j),this.o=h.o,this.g=h.g,Tr(this,h.u),this.h=h.h,Aa(this,ku(h.i)),this.m=h.m):h&&(y=String(h).match(Cu))?(this.l=!1,wr(this,y[1]||"",!0),this.o=Er(y[2]||""),this.g=Er(y[3]||"",!0),Tr(this,y[4]),this.h=Er(y[5]||"",!0),Aa(this,y[6]||"",!0),this.m=Er(y[7]||"")):(this.l=!1,this.i=new Cr(null,this.l))}mn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ir(y,Au,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ir(y,Au,!0),"@"),h.push(_r(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ir(v,v.charAt(0)=="/"?ky:Py,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ir(v,My)),h.join("")},mn.prototype.resolve=function(h){const y=kt(this);let v=!!h.j;v?wr(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var E=h.h;if(v)Tr(y,h.u);else if(v=!!h.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var M=y.h.lastIndexOf("/");M!=-1&&(E=y.h.slice(0,M+1)+E)}if(M=E,M==".."||M==".")E="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){E=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let W=0;W<M.length;){const me=M[W++];me=="."?E&&W==M.length&&j.push(""):me==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),E&&W==M.length&&j.push("")):(j.push(me),E=!0)}E=j.join("/")}else E=M}return v?y.h=E:v=h.i.toString()!=="",v?Aa(y,ku(h.i)):v=!!h.m,v&&(y.m=h.m),y};function kt(h){return new mn(h)}function wr(h,y,v){h.j=v?Er(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Tr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Aa(h,y,v){y instanceof Cr?(h.i=y,Ly(h.i,h.l)):(v||(y=Ir(y,Dy)),h.i=new Cr(y,h.l))}function Ae(h,y,v){h.i.set(y,v)}function ki(h){return Ae(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Er(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ir(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Ry),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ry(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Au=/[#\/\?@]/g,Py=/[#\?:]/g,ky=/[#\?]/g,Dy=/[#\?@]/g,My=/#/g;function Cr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Jn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ny(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=Cr.prototype,n.add=function(h,y){Jn(this),this.i=null,h=Ns(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Su(h,y){Jn(h),y=Ns(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Nu(h,y){return Jn(h),y=Ns(h,y),h.g.has(y)}n.forEach=function(h,y){Jn(this),this.g.forEach(function(v,E){v.forEach(function(M){h.call(y,M,E,this)},this)},this)};function Ru(h,y){Jn(h);let v=[];if(typeof y=="string")Nu(h,y)&&(v=v.concat(h.g.get(Ns(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}n.set=function(h,y){return Jn(this),this.i=null,h=Ns(this,h),Nu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=Ru(this,h),h.length>0?String(h[0]):y):y};function Pu(h,y,v){Su(h,y),v.length>0&&(h.i=null,h.g.set(Ns(h,y),x(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let E=0;E<y.length;E++){var v=y[E];const M=_r(v);v=Ru(this,v);for(let j=0;j<v.length;j++){let W=M;v[j]!==""&&(W+="="+_r(v[j])),h.push(W)}}return this.i=h.join("&")};function ku(h){const y=new Cr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ns(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ly(h,y){y&&!h.j&&(Jn(h),h.i=null,h.g.forEach(function(v,E){const M=E.toLowerCase();E!=M&&(Su(this,E),Pu(this,M,v))},h)),h.j=y}function Vy(h,y){const v=new xr;if(o.Image){const E=new Image;E.onload=m(pn,v,"TestLoadImage: loaded",!0,y,E),E.onerror=m(pn,v,"TestLoadImage: error",!1,y,E),E.onabort=m(pn,v,"TestLoadImage: abort",!1,y,E),E.ontimeout=m(pn,v,"TestLoadImage: timeout",!1,y,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=h}else y(!1)}function Uy(h,y){const v=new xr,E=new AbortController,M=setTimeout(()=>{E.abort(),pn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:E.signal}).then(j=>{clearTimeout(M),j.ok?pn(v,"TestPingServer: ok",!0,y):pn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(M),pn(v,"TestPingServer: error",!1,y)})}function pn(h,y,v,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(v)}catch{}}function jy(){this.g=new _y}function Sa(h){this.i=h.Sb||null,this.h=h.ab||!1}p(Sa,lu),Sa.prototype.g=function(){return new Di(this.i,this.h)};function Di(h,y){Xe.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Di,Xe),n=Di.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Du(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Du(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ar(this):Sr(this),this.readyState==3&&Du(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Ar(this))},n.Na=function(h){this.g&&(this.response=h,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Sr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mu(h){let y="";return z(h,function(v,E){y+=E,y+=":",y+=v,y+=`\r
`}),y}function Na(h,y,v){e:{for(E in v){var E=!1;break e}E=!0}E||(v=Mu(v),typeof h=="string"?v!=null&&_r(v):Ae(h,y,v))}function Le(h){Xe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Le,Xe);var Fy=/^https?$/i,$y=["POST","PUT"];n=Le.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,v,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pu.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(j){Lu(this,j);return}if(h=v||"",v=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)v.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())v.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(v.keys()).find(j=>j.toLowerCase()=="content-type"),M=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call($y,y,void 0)>=0)||E||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,W]of v)this.g.setRequestHeader(j,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(j){Lu(this,j)}};function Lu(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Vu(h),Mi(h)}function Vu(h){h.A||(h.A=!0,at(h,"complete"),at(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,at(this,"complete"),at(this,"abort"),Mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mi(this,!0)),Le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Uu(this):this.Xa())},n.Xa=function(){Uu(this)};function Uu(h){if(h.h&&typeof i<"u"){if(h.v&&gn(h)==4)setTimeout(h.Ca.bind(h),0);else if(at(h,"readystatechange"),gn(h)==4){h.h=!1;try{const j=h.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var E;if(E=j===0){let W=String(h.D).match(Cu)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),E=!Fy.test(W?W.toLowerCase():"")}v=E}if(v)at(h,"complete"),at(h,"success");else{h.o=6;try{var M=gn(h)>2?h.g.statusText:""}catch{M=""}h.l=M+" ["+h.ca()+"]",Vu(h)}}finally{Mi(h)}}}}function Mi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||at(h,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gn(h){return h.g?h.g.readyState:0}n.ca=function(){try{return gn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),xy(y)}};function ju(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Oy(h){const y={};h=(h.g&&gn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<h.length;E++){if(A(h[E]))continue;var v=Iy(h[E]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const j=y[M]||[];y[M]=j,j.push(v)}X(y,function(E){return E.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Fu(h){this.za=0,this.i=[],this.j=new xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nr("baseRetryDelayMs",5e3,h),this.Za=Nr("retryDelaySeedMs",1e4,h),this.Ta=Nr("forwardChannelMaxRetries",2,h),this.va=Nr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new bu(h&&h.concurrentRequestLimit),this.Ba=new jy,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Fu.prototype,n.ka=8,n.I=1,n.connect=function(h,y,v,E){lt(0),this.W=h,this.H=y||{},v&&E!==void 0&&(this.H.OSID=v,this.H.OAID=E),this.F=this.X,this.J=Ju(this,null,this.W),Vi(this)};function Ra(h){if($u(h),h.I==3){var y=h.V++,v=kt(h.J);if(Ae(v,"SID",h.M),Ae(v,"RID",y),Ae(v,"TYPE","terminate"),Rr(h,v),y=new fn(h,h.j,y),y.M=2,y.A=ki(kt(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=y.A,v=!0),v||(y.g=Ku(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Pi(y)}Wu(h)}function Li(h){h.g&&(ka(h),h.g.cancel(),h.g=null)}function $u(h){Li(h),h.v&&(o.clearTimeout(h.v),h.v=null),Ui(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function Vi(h){if(!wu(h.h)&&!h.m){h.m=!0;var y=h.Ea;U||_(),F||(U(),F=!0),I.add(y,h),h.D=0}}function qy(h,y){return Tu(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=vr(u(h.Ea,h,y),zu(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const M=new fn(this,this.j,h);let j=this.o;if(this.U&&(j?(j=ie(j),be(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var E=this.i[v];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(y+=E,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=qu(this,M,y),v=kt(this.J),Ae(v,"RID",h),Ae(v,"CVER",22),this.G&&Ae(v,"X-HTTP-Session-Id",this.G),Rr(this,v),j&&(this.R?y="headers="+_r(Mu(j))+"&"+y:this.u&&Na(v,this.u,j)),Ca(this.h,M),this.Ra&&Ae(v,"TYPE","init"),this.S?(Ae(v,"$req",y),Ae(v,"SID","null"),M.U=!0,wa(M,v,null)):wa(M,v,y),this.I=2}}else this.I==3&&(h?Ou(this,h):this.i.length==0||wu(this.h)||Ou(this))};function Ou(h,y){var v;y?v=y.l:v=h.V++;const E=kt(h.J);Ae(E,"SID",h.M),Ae(E,"RID",v),Ae(E,"AID",h.K),Rr(h,E),h.u&&h.o&&Na(E,h.u,h.o),v=new fn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=qu(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ca(h.h,v),wa(v,E,y)}function Rr(h,y){h.H&&z(h.H,function(v,E){Ae(y,E,v)}),h.l&&z({},function(v,E){Ae(y,E,v)})}function qu(h,y,v){v=Math.min(h.i.length,v);const E=h.l?u(h.l.Ka,h.l,h):null;e:{var M=h.i;let me=-1;for(;;){const Be=["count="+v];me==-1?v>0?(me=M[0].g,Be.push("ofs="+me)):me=0:Be.push("ofs="+me);let Ie=!0;for(let ze=0;ze<v;ze++){var j=M[ze].g;const Dt=M[ze].map;if(j-=me,j<0)me=Math.max(0,M[ze].g-100),Ie=!1;else try{j="req"+j+"_"||"";try{var W=Dt instanceof Map?Dt:Object.entries(Dt);for(const[Yn,yn]of W){let vn=yn;l(yn)&&(vn=ya(yn)),Be.push(j+Yn+"="+encodeURIComponent(vn))}}catch(Yn){throw Be.push(j+"type="+encodeURIComponent("_badmap")),Yn}}catch{E&&E(Dt)}}if(Ie){W=Be.join("&");break e}}W=void 0}return h=h.i.splice(0,v),y.G=h,W}function Bu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;U||_(),F||(U(),F=!0),I.add(y,h),h.A=0}}function Pa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=vr(u(h.Da,h),zu(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Gu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=vr(u(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,lt(10),Li(this),Gu(this))};function ka(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function Gu(h){h.g=new fn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=kt(h.na);Ae(y,"RID","rpc"),Ae(y,"SID",h.M),Ae(y,"AID",h.K),Ae(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ae(y,"TO",h.ia),Ae(y,"TYPE","xmlhttp"),Rr(h,y),h.u&&h.o&&Na(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=ki(kt(y)),v.u=null,v.R=!0,vu(v,h)}n.Va=function(){this.C!=null&&(this.C=null,Li(this),Pa(this),lt(19))};function Ui(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function Hu(h,y){var v=null;if(h.g==y){Ui(h),ka(h),h.g=null;var E=2}else if(Ia(h.h,y))v=y.G,Eu(h.h,y),E=1;else return;if(h.I!=0){if(y.o)if(E==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var M=h.D;E=Ni(),at(E,new fu(E,v)),Vi(h)}else Bu(h);else if(M=y.m,M==3||M==0&&y.X>0||!(E==1&&qy(h,y)||E==2&&Pa(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),M){case 1:Kn(h,5);break;case 4:Kn(h,10);break;case 3:Kn(h,6);break;default:Kn(h,2)}}}function zu(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Kn(h,y){if(h.j.info("Error code "+y),y==2){var v=u(h.bb,h),E=h.Ua;const M=!E;E=new mn(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||wr(E,"https"),ki(E),M?Vy(E.toString(),v):Uy(E.toString(),v)}else lt(2);h.I=0,h.l&&h.l.pa(y),Wu(h),$u(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Wu(h){if(h.I=0,h.ja=[],h.l){const y=Iu(h.h);(y.length!=0||h.i.length!=0)&&(b(h.ja,y),b(h.ja,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.oa()}}function Ju(h,y,v){var E=v instanceof mn?kt(v):new mn(v);if(E.g!="")y&&(E.g=y+"."+E.g),Tr(E,E.u);else{var M=o.location;E=M.protocol,y=y?y+"."+M.hostname:M.hostname,M=+M.port;const j=new mn(null);E&&wr(j,E),y&&(j.g=y),M&&Tr(j,M),v&&(j.h=v),E=j}return v=h.G,y=h.wa,v&&y&&Ae(E,v,y),Ae(E,"VER",h.ka),Rr(h,E),E}function Ku(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Le(new Sa({ab:v})):new Le(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yu(){}n=Yu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ji(){}ji.prototype.g=function(h,y){return new pt(h,y)};function pt(h,y){Xe.call(this),this.g=new Fu(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!A(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!A(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Rs(this)}p(pt,Xe),pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pt.prototype.close=function(){Ra(this.g)},pt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=ya(h),h=v);y.i.push(new Sy(y.Ya++,h)),y.I==3&&Vi(y)},pt.prototype.N=function(){this.g.l=null,delete this.j,Ra(this.g),delete this.g,pt.Z.N.call(this)};function Qu(h){va.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}p(Qu,va);function Xu(){xa.call(this),this.status=1}p(Xu,xa);function Rs(h){this.g=h}p(Rs,Yu),Rs.prototype.ra=function(){at(this.g,"a")},Rs.prototype.qa=function(h){at(this.g,new Qu(h))},Rs.prototype.pa=function(h){at(this.g,new Xu)},Rs.prototype.oa=function(){at(this.g,"b")},ji.prototype.createWebChannel=ji.prototype.g,pt.prototype.send=pt.prototype.o,pt.prototype.open=pt.prototype.m,pt.prototype.close=pt.prototype.close,qp=function(){return new ji},Op=function(){return Ni()},$p=zn,dl={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,eo=Ri,mu.COMPLETE="complete",Fp=mu,cu.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,Ur=cu,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,jp=Le}).apply(typeof Oi<"u"?Oi:typeof self<"u"?self:typeof window<"u"?window:{});const $d="@firebase/firestore",Od="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Yl("@firebase/firestore");function Ds(){return gs.logLevel}function Z(n,...e){if(gs.logLevel<=ge.DEBUG){const t=e.map(cc);gs.debug(`Firestore (${sr}): ${n}`,...t)}}function cn(n,...e){if(gs.logLevel<=ge.ERROR){const t=e.map(cc);gs.error(`Firestore (${sr}): ${n}`,...t)}}function Ks(n,...e){if(gs.logLevel<=ge.WARN){const t=e.map(cc);gs.warn(`Firestore (${sr}): ${n}`,...t)}}function cc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Bp(n,s,t)}function Bp(n,e,t){let s=`FIRESTORE (${sr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw cn(s),new Error(s)}function Ee(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||Bp(e,r,s)}function he(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nt.UNAUTHENTICATED))}shutdown(){}}class Dw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Mw{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,t(c)):Promise.resolve();let i=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rn,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ee(typeof s.accessToken=="string",31837,{l:s}),new Gp(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new nt(e)}}class Lw{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vw{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Lw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const s=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=jw(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<t&&(s+=e.charAt(r[i]%62))}return s}}function ye(n,e){return n<e?-1:n>e?1:0}function hl(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),i=e.charAt(s);if(r!==i)return qa(r)===qa(i)?ye(r,i):qa(r)?1:-1}return ye(n.length,e.length)}const Fw=55296,$w=57343;function qa(n){const e=n.charCodeAt(0);return e>=Fw&&e<=$w}function Ys(n,e,t){return n.length===e.length&&n.every((s,r)=>t(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="__name__";class Lt{constructor(e,t,s){t===void 0?t=0:t>e.length&&ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Lt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lt?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const i=Lt.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return ye(e.length,t.length)}static compareSegments(e,t){const s=Lt.isNumericId(e),r=Lt.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Lt.extractNumericId(e).compare(Lt.extractNumericId(t)):hl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nn.fromString(e.substring(4,e.length-2))}}class Ce extends Lt{construct(e,t,s){return new Ce(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Y(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(r=>r.length>0))}return new Ce(t)}static emptyPath(){return new Ce([])}}const Ow=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Lt{construct(e,t,s){return new Ye(e,t,s)}static isValidIdentifier(e){return Ow.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bd}static keyField(){return new Ye([Bd])}static fromServerFormat(e){const t=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Y(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Y(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new Y(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(t)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Ce.fromString(e))}static fromName(e){return new se(Ce.fromString(e).popFirst(5))}static empty(){return new se(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n,e,t){if(!t)throw new Y(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qw(n,e,t,s){if(e===!0&&s===!0)throw new Y(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Gd(n){if(!se.isDocumentKey(n))throw new Y(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Hd(n){if(se.isDocumentKey(n))throw new Y(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zp(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qo(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae(12329,{type:typeof n})}function Nt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qo(n);throw new Y(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e){const t={typeString:n};return e&&(t.value=e),t}function vi(n,e){if(!zp(n))throw new Y(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const o=n[s];if(r&&typeof o!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${s}' field to equal '${i.value}'`;break}}if(t)throw new Y(q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=-62135596800,Wd=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Wd);return new _e(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zd)throw new Y(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wd}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vi(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:qe("string",_e._jsonSchemaVersion),seconds:qe("number"),nanoseconds:qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new _e(0,0))}static max(){return new ue(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=-1;function Bw(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=ue.fromTimestamp(s===1e9?new _e(t+1,0):new _e(t,s));return new Mn(r,se.empty(),e)}function Gw(n){return new Mn(n.readTime,n.key,ei)}class Mn{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Mn(ue.min(),se.empty(),ei)}static max(){return new Mn(ue.max(),se.empty(),ei)}}function Hw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=se.comparator(n.documentKey,e.documentKey),t!==0?t:ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ww{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rr(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==zw)throw n;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):B.reject(t)}static resolve(e){return new B((t,s)=>{t(e)})}static reject(e){return new B((t,s)=>{s(e)})}static waitFor(e){return new B((t,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&t()},c=>s(c))}),o=!0,i===r&&t()})}static or(e){let t=B.resolve(!1);for(const s of e)t=t.next(r=>r?B.resolve(r):s());return t}static forEach(e,t){const s=[];return e.forEach((r,i)=>{s.push(t.call(this,r,i))}),this.waitFor(s)}static mapArray(e,t){return new B((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;t(e[u]).next(m=>{o[u]=m,++l,l===i&&s(o)},m=>r(m))}})}static doWhile(e,t){return new B((s,r)=>{const i=()=>{e()===!0?t().next(()=>{i()},r):s()};i()})}}function Jw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ir(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bo.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function Go(n){return n==null}function wo(n){return n===0&&1/n==-1/0}function Kw(n){return typeof n=="number"&&Number.isInteger(n)&&!wo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="";function Yw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Jd(e)),e=Qw(n.get(t),e);return Jd(e)}function Qw(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":t+="";break;case Wp:t+="";break;default:t+=i}}return t}function Jd(n){return n+Wp+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,t){this.comparator=e,this.root=t||Ke.EMPTY}insert(e,t){return new ke(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qi(this.root,e,this.comparator,!1)}getReverseIterator(){return new qi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qi(this.root,e,this.comparator,!0)}}class qi{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??Ke.RED,this.left=r??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,i){return new Ke(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ke.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,t,s,r,i){return this}insert(e,t,s){return new Ke(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yd(this.data.getIterator())}getIteratorFrom(e){return new Yd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ge(this.comparator);return t.data=e,t}}class Yd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new gt([])}unionWith(e){let t=new Ge(Ye.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Kp("Invalid base64 string: "+i):i}}(e);return new Qe(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Qe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const Xw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ln(n){if(Ee(!!n,39018),typeof n=="string"){let e=0;const t=Xw.exec(n);if(Ee(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vn(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="server_timestamp",Qp="__type__",Xp="__previous_value__",Zp="__local_write_time__";function hc(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Qp])==null?void 0:s.stringValue)===Yp}function Ho(n){const e=n.mapValue.fields[Xp];return hc(e)?Ho(e):e}function ti(n){const e=Ln(n.mapValue.fields[Zp].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t,s,r,i,o,l,c,u,m){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=m}}const To="(default)";class ni{constructor(e,t){this.projectId=e,this.database=t||To}static empty(){return new ni("","")}get isDefaultDatabase(){return this.database===To}isEqual(e){return e instanceof ni&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="__type__",tg="__max__",Bi={mapValue:{fields:{__type__:{stringValue:tg}}}},ng="__vector__",Eo="value";function Un(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hc(n)?4:tT(n)?9007199254740991:eT(n)?10:11:ae(28295,{value:n})}function zt(n,e){if(n===e)return!0;const t=Un(n);if(t!==Un(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ti(n).isEqual(ti(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ln(r.timestampValue),l=Ln(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,i){return Vn(r.bytesValue).isEqual(Vn(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ue(r.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(r.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ue(r.integerValue)===Ue(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ue(r.doubleValue),l=Ue(i.doubleValue);return o===l?wo(o)===wo(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Ys(n.arrayValue.values||[],e.arrayValue.values||[],zt);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Kd(o)!==Kd(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!zt(o[c],l[c])))return!1;return!0}(n,e);default:return ae(52216,{left:n})}}function si(n,e){return(n.values||[]).find(t=>zt(t,e))!==void 0}function Qs(n,e){if(n===e)return 0;const t=Un(n),s=Un(e);if(t!==s)return ye(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ye(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ue(i.integerValue||i.doubleValue),c=Ue(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return Qd(n.timestampValue,e.timestampValue);case 4:return Qd(ti(n),ti(e));case 5:return hl(n.stringValue,e.stringValue);case 6:return function(i,o){const l=Vn(i),c=Vn(o);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const m=ye(l[u],c[u]);if(m!==0)return m}return ye(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ye(Ue(i.latitude),Ue(o.latitude));return l!==0?l:ye(Ue(i.longitude),Ue(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Xd(n.arrayValue,e.arrayValue);case 10:return function(i,o){var g,x,b,T;const l=i.fields||{},c=o.fields||{},u=(g=l[Eo])==null?void 0:g.arrayValue,m=(x=c[Eo])==null?void 0:x.arrayValue,p=ye(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((T=m==null?void 0:m.values)==null?void 0:T.length)||0);return p!==0?p:Xd(u,m)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Bi.mapValue&&o===Bi.mapValue)return 0;if(i===Bi.mapValue)return 1;if(o===Bi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},m=Object.keys(u);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=hl(c[p],m[p]);if(g!==0)return g;const x=Qs(l[c[p]],u[m[p]]);if(x!==0)return x}return ye(c.length,m.length)}(n.mapValue,e.mapValue);default:throw ae(23264,{he:t})}}function Qd(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ye(n,e);const t=Ln(n),s=Ln(e),r=ye(t.seconds,s.seconds);return r!==0?r:ye(t.nanos,s.nanos)}function Xd(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const i=Qs(t[r],s[r]);if(i)return i}return ye(t.length,s.length)}function Xs(n){return fl(n)}function fl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Ln(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",r=!0;for(const i of t.values||[])r?r=!1:s+=",",s+=fl(i);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${fl(t.fields[o])}`;return r+"}"}(n.mapValue):ae(61005,{value:n})}function to(n){switch(Un(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ho(n);return e?16+to(e):16;case 5:return 2*n.stringValue.length;case 6:return Vn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+to(i),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return Bn(s.fields,(i,o)=>{r+=i.length+to(o)}),r}(n.mapValue);default:throw ae(13486,{value:n})}}function Zd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ml(n){return!!n&&"integerValue"in n}function fc(n){return!!n&&"arrayValue"in n}function eh(n){return!!n&&"nullValue"in n}function th(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function no(n){return!!n&&"mapValue"in n}function eT(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[eg])==null?void 0:s.stringValue)===ng}function Br(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Bn(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Br(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Br(n.arrayValue.values[t]);return e}return{...n}}function tT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tg}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.value=e}static empty(){return new mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!no(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Br(t)}setAll(e){let t=Ye.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,s,r),s={},r=[],t=l.popLast()}o?s[l.lastSegment()]=Br(o):r.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,s,r)}delete(e){const t=this.field(e.popLast());no(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];no(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){Bn(t,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new mt(Br(this.value))}}function sg(n){const e=[];return Bn(n.fields,(t,s)=>{const r=new Ye([t]);if(no(s)){const i=sg(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t,s,r,i,o,l){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new st(e,0,ue.min(),ue.min(),ue.min(),mt.empty(),0)}static newFoundDocument(e,t,s,r){return new st(e,1,t,ue.min(),s,r,0)}static newNoDocument(e,t){return new st(e,2,t,ue.min(),ue.min(),mt.empty(),0)}static newUnknownDocument(e,t){return new st(e,3,t,ue.min(),ue.min(),mt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.position=e,this.inclusive=t}}function nh(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const i=e[r],o=n.position[r];if(i.field.isKeyField()?s=se.comparator(se.fromName(o.referenceValue),t.key):s=Qs(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function sh(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zt(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t="asc"){this.field=e,this.dir=t}}function nT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{}class $e extends rg{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new rT(e,t,s):t==="array-contains"?new aT(e,s):t==="in"?new lT(e,s):t==="not-in"?new cT(e,s):t==="array-contains-any"?new uT(e,s):new $e(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new iT(e,s):new oT(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qs(t,this.value)):t!==null&&Un(this.value)===Un(t)&&this.matchesComparison(Qs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rt extends rg{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Rt(e,t)}matches(e){return ig(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ig(n){return n.op==="and"}function og(n){return sT(n)&&ig(n)}function sT(n){for(const e of n.filters)if(e instanceof Rt)return!1;return!0}function pl(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+Xs(n.value);if(og(n))return n.filters.map(e=>pl(e)).join(",");{const e=n.filters.map(t=>pl(t)).join(",");return`${n.op}(${e})`}}function ag(n,e){return n instanceof $e?function(s,r){return r instanceof $e&&s.op===r.op&&s.field.isEqual(r.field)&&zt(s.value,r.value)}(n,e):n instanceof Rt?function(s,r){return r instanceof Rt&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&ag(o,r.filters[l]),!0):!1}(n,e):void ae(19439)}function lg(n){return n instanceof $e?function(t){return`${t.field.canonicalString()} ${t.op} ${Xs(t.value)}`}(n):n instanceof Rt?function(t){return t.op.toString()+" {"+t.getFilters().map(lg).join(" ,")+"}"}(n):"Filter"}class rT extends $e{constructor(e,t,s){super(e,t,s),this.key=se.fromName(s.referenceValue)}matches(e){const t=se.comparator(e.key,this.key);return this.matchesComparison(t)}}class iT extends $e{constructor(e,t){super(e,"in",t),this.keys=cg("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oT extends $e{constructor(e,t){super(e,"not-in",t),this.keys=cg("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cg(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(s=>se.fromName(s.referenceValue))}class aT extends $e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fc(t)&&si(t.arrayValue,this.value)}}class lT extends $e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&si(this.value.arrayValue,t)}}class cT extends $e{constructor(e,t){super(e,"not-in",t)}matches(e){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!si(this.value.arrayValue,t)}}class uT extends $e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>si(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function rh(n,e=null,t=[],s=[],r=null,i=null,o=null){return new dT(n,e,t,s,r,i,o)}function mc(n){const e=he(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>pl(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Go(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Xs(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Xs(s)).join(",")),e.Te=t}return e.Te}function pc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ag(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sh(n.startAt,e.startAt)&&sh(n.endAt,e.endAt)}function gl(n){return se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hT(n,e,t,s,r,i,o,l){return new or(n,e,t,s,r,i,o,l)}function gc(n){return new or(n)}function ih(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ug(n){return n.collectionGroup!==null}function Gr(n){const e=he(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ge(Ye.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ri(i,s))}),t.has(Ye.keyField().canonicalString())||e.Ie.push(new ri(Ye.keyField(),s))}return e.Ie}function $t(n){const e=he(n);return e.Ee||(e.Ee=fT(e,Gr(n))),e.Ee}function fT(n,e){if(n.limitType==="F")return rh(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ri(r.field,i)});const t=n.endAt?new Io(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Io(n.startAt.position,n.startAt.inclusive):null;return rh(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function yl(n,e){const t=n.filters.concat([e]);return new or(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vl(n,e,t){return new or(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zo(n,e){return pc($t(n),$t(e))&&n.limitType===e.limitType}function dg(n){return`${mc($t(n))}|lt:${n.limitType}`}function Ms(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(r=>lg(r)).join(", ")}]`),Go(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(r=>Xs(r)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(r=>Xs(r)).join(",")),`Target(${s})`}($t(n))}; limitType=${n.limitType})`}function Wo(n,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):se.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(n,e)&&function(s,r){for(const i of Gr(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(n,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(n,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=nh(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,Gr(s),r)||s.endAt&&!function(o,l,c){const u=nh(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,Gr(s),r))}(n,e)}function mT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hg(n){return(e,t)=>{let s=!1;for(const r of Gr(n)){const i=pT(r,e,t);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function pT(n,e,t){const s=n.field.isKeyField()?se.comparator(e.key,t.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Qs(c,u):ae(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Bn(this.inner,(t,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Jp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new ke(se.comparator);function un(){return gT}const fg=new ke(se.comparator);function jr(...n){let e=fg;for(const t of n)e=e.insert(t.key,t);return e}function mg(n){let e=fg;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ss(){return Hr()}function pg(){return Hr()}function Hr(){return new ws(n=>n.toString(),(n,e)=>n.isEqual(e))}const yT=new ke(se.comparator),vT=new Ge(se.comparator);function ve(...n){let e=vT;for(const t of n)e=e.add(t);return e}const xT=new Ge(ye);function _T(){return xT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wo(e)?"-0":e}}function gg(n){return{integerValue:""+n}}function bT(n,e){return Kw(e)?gg(e):yc(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this._=void 0}}function wT(n,e,t){return n instanceof ii?function(r,i){const o={fields:{[Qp]:{stringValue:Yp},[Zp]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&hc(i)&&(i=Ho(i)),i&&(o.fields[Xp]=i),{mapValue:o}}(t,e):n instanceof oi?vg(n,e):n instanceof ai?xg(n,e):function(r,i){const o=yg(r,i),l=oh(o)+oh(r.Ae);return ml(o)&&ml(r.Ae)?gg(l):yc(r.serializer,l)}(n,e)}function TT(n,e,t){return n instanceof oi?vg(n,e):n instanceof ai?xg(n,e):t}function yg(n,e){return n instanceof Co?function(s){return ml(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ii extends Jo{}class oi extends Jo{constructor(e){super(),this.elements=e}}function vg(n,e){const t=_g(e);for(const s of n.elements)t.some(r=>zt(r,s))||t.push(s);return{arrayValue:{values:t}}}class ai extends Jo{constructor(e){super(),this.elements=e}}function xg(n,e){let t=_g(e);for(const s of n.elements)t=t.filter(r=>!zt(r,s));return{arrayValue:{values:t}}}class Co extends Jo{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oh(n){return Ue(n.integerValue||n.doubleValue)}function _g(n){return fc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.field=e,this.transform=t}}function IT(n,e){return n.field.isEqual(e.field)&&function(s,r){return s instanceof oi&&r instanceof oi||s instanceof ai&&r instanceof ai?Ys(s.elements,r.elements,zt):s instanceof Co&&r instanceof Co?zt(s.Ae,r.Ae):s instanceof ii&&r instanceof ii}(n.transform,e.transform)}class CT{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function so(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ko{}function bg(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vc(n.key,bt.none()):new xi(n.key,n.data,bt.none());{const t=n.data,s=mt.empty();let r=new Ge(Ye.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Gn(n.key,s,new gt(r.toArray()),bt.none())}}function AT(n,e,t){n instanceof xi?function(r,i,o){const l=r.value.clone(),c=lh(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Gn?function(r,i,o){if(!so(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=lh(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(wg(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function zr(n,e,t,s){return n instanceof xi?function(i,o,l,c){if(!so(i.precondition,o))return l;const u=i.value.clone(),m=ch(i.fieldTransforms,c,o);return u.setAll(m),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,s):n instanceof Gn?function(i,o,l,c){if(!so(i.precondition,o))return l;const u=ch(i.fieldTransforms,c,o),m=o.data;return m.setAll(wg(i)),m.setAll(u),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(n,e,t,s):function(i,o,l){return so(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function ST(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),i=yg(s.transform,r||null);i!=null&&(t===null&&(t=mt.empty()),t.set(s.field,i))}return t||null}function ah(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ys(s,r,(i,o)=>IT(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xi extends Ko{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gn extends Ko{constructor(e,t,s,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function lh(n,e,t){const s=new Map;Ee(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const i=n[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,TT(o,l,t[r]))}return s}function ch(n,e,t){const s=new Map;for(const r of n){const i=r.transform,o=t.data.field(r.field);s.set(r.field,wT(i,o,e))}return s}class vc extends Ko{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NT extends Ko{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&AT(i,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=zr(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=zr(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=pg();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=t.has(r.key)?null:l;const c=bg(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(t,s)=>ah(t,s))&&Ys(this.baseMutations,e.baseMutations,(t,s)=>ah(t,s))}}class xc{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){Ee(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return yT}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new xc(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,xe;function DT(n){switch(n){case q.OK:return ae(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ae(15467,{code:n})}}function Tg(n){if(n===void 0)return cn("GRPC error has no .code"),q.UNKNOWN;switch(n){case Fe.OK:return q.OK;case Fe.CANCELLED:return q.CANCELLED;case Fe.UNKNOWN:return q.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return q.INTERNAL;case Fe.UNAVAILABLE:return q.UNAVAILABLE;case Fe.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Fe.NOT_FOUND:return q.NOT_FOUND;case Fe.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Fe.ABORTED:return q.ABORTED;case Fe.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Fe.DATA_LOSS:return q.DATA_LOSS;default:return ae(39323,{code:n})}}(xe=Fe||(Fe={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=new Nn([4294967295,4294967295],0);function uh(n){const e=MT().encode(n),t=new Up;return t.update(e),new Uint8Array(t.digest())}function dh(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Nn([t,s],0),new Nn([r,i],0)]}class _c{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Fr(`Invalid padding: ${t}`);if(s<0)throw new Fr(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Fr(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Fr(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Nn.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Nn.fromNumber(s)));return r.compare(LT)===1&&(r=new Nn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uh(e),[s,r]=dh(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new _c(i,r,t);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const t=uh(e),[s,r]=dh(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Fr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t,s,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,_i.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Yo(ue.min(),r,new ke(ye),un(),ve())}}class _i{constructor(e,t,s,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new _i(s,t,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class Eg{constructor(e,t){this.targetId=e,this.Ce=t}}class Ig{constructor(e,t,s=Qe.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class hh{constructor(){this.ve=0,this.Fe=fh(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),t=ve(),s=ve();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:ae(38017,{changeType:i})}}),new _i(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=fh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VT{constructor(e){this.Ge=e,this.ze=new Map,this.je=un(),this.Je=Gi(),this.He=Gi(),this.Ye=new ke(ye)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,r)=>{this.rt(r)&&t(r)})}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(gl(i))if(s===0){const o=new se(i.path);this.et(t,o,st.newNoDocument(o,ue.min()))}else Ee(s===1,20013,{expectedCount:s});else{const o=this._t(t);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=t;let o,l;try{o=Vn(s).toUint8Array()}catch(c){if(c instanceof Kp)return Ks("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new _c(o,r,i)}catch(c){return Ks(c instanceof Fr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(t,i,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&gl(l.target)){const c=new se(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,st.newNoDocument(c,e))}i.Be&&(t.set(o,i.ke()),i.qe())}});let s=ve();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new Yo(e,t,this.Ye,this.je,s);return this.je=un(),this.Je=Gi(),this.He=Gi(),this.Ye=new ke(ye),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new hh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ge(ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ge(ye),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hh),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gi(){return new ke(se.comparator)}function fh(){return new ke(se.comparator)}const UT={asc:"ASCENDING",desc:"DESCENDING"},jT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FT={and:"AND",or:"OR"};class $T{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xl(n,e){return n.useProto3Json||Go(e)?e:{value:e}}function Ao(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function OT(n,e){return Ao(n,e.toTimestamp())}function Ot(n){return Ee(!!n,49232),ue.fromTimestamp(function(t){const s=Ln(t);return new _e(s.seconds,s.nanos)}(n))}function bc(n,e){return _l(n,e).canonicalString()}function _l(n,e){const t=function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Ag(n){const e=Ce.fromString(n);return Ee(kg(e),10190,{key:e.toString()}),e}function bl(n,e){return bc(n.databaseId,e.path)}function Ba(n,e){const t=Ag(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new se(Ng(t))}function Sg(n,e){return bc(n.databaseId,e)}function qT(n){const e=Ag(n);return e.length===4?Ce.emptyPath():Ng(e)}function wl(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ng(n){return Ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mh(n,e,t){return{name:bl(n,e),fields:t.value.mapValue.fields}}function BT(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,m){return u.useProto3Json?(Ee(m===void 0||typeof m=="string",58123),Qe.fromBase64String(m||"")):(Ee(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Qe.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const m=u.code===void 0?q.UNKNOWN:Tg(u.code);return new Y(m,u.message||"")}(o);t=new Ig(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ba(n,s.document.name),i=Ot(s.document.updateTime),o=s.document.createTime?Ot(s.document.createTime):ue.min(),l=new mt({mapValue:{fields:s.document.fields}}),c=st.newFoundDocument(r,i,o,l),u=s.targetIds||[],m=s.removedTargetIds||[];t=new ro(u,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ba(n,s.document),i=s.readTime?Ot(s.readTime):ue.min(),o=st.newNoDocument(r,i),l=s.removedTargetIds||[];t=new ro([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ba(n,s.document),i=s.removedTargetIds||[];t=new ro([],i,r,null)}else{if(!("filter"in e))return ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new kT(r,i),l=s.targetId;t=new Eg(l,o)}}return t}function GT(n,e){let t;if(e instanceof xi)t={update:mh(n,e.key,e.value)};else if(e instanceof vc)t={delete:bl(n,e.key)};else if(e instanceof Gn)t={update:mh(n,e.key,e.data),updateMask:ZT(e.fieldMask)};else{if(!(e instanceof NT))return ae(16599,{Vt:e.type});t={verify:bl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof ii)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ai)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Co)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ae(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:OT(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae(27497)}(n,e.precondition)),t}function HT(n,e){return n&&n.length>0?(Ee(e!==void 0,14353),n.map(t=>function(r,i){let o=r.updateTime?Ot(r.updateTime):Ot(i);return o.isEqual(ue.min())&&(o=Ot(i)),new CT(o,r.transformResults||[])}(t,e))):[]}function zT(n,e){return{documents:[Sg(n,e.path)]}}function WT(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Sg(n,r);const i=function(u){if(u.length!==0)return Pg(Rt.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(m=>function(g){return{field:Ls(g.field),direction:YT(g.dir)}}(m))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=xl(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:r}}function JT(n){let e=qT(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){Ee(s===1,65062);const m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let i=[];t.where&&(i=function(p){const g=Rg(p);return g instanceof Rt&&og(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(b){return new ri(Vs(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let l=null;t.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Go(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,x=p.values||[];return new Io(x,g)}(t.startAt));let u=null;return t.endAt&&(u=function(p){const g=!p.before,x=p.values||[];return new Io(x,g)}(t.endAt)),hT(e,r,o,i,l,"F",c,u)}function KT(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:r})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Rg(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Vs(t.unaryFilter.field);return $e.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Vs(t.unaryFilter.field);return $e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vs(t.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vs(t.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(n):n.fieldFilter!==void 0?function(t){return $e.create(Vs(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Rt.create(t.compositeFilter.filters.map(s=>Rg(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(t.compositeFilter.op))}(n):ae(30097,{filter:n})}function YT(n){return UT[n]}function QT(n){return jT[n]}function XT(n){return FT[n]}function Ls(n){return{fieldPath:n.canonicalString()}}function Vs(n){return Ye.fromServerFormat(n.fieldPath)}function Pg(n){return n instanceof $e?function(t){if(t.op==="=="){if(th(t.value))return{unaryFilter:{field:Ls(t.field),op:"IS_NAN"}};if(eh(t.value))return{unaryFilter:{field:Ls(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(th(t.value))return{unaryFilter:{field:Ls(t.field),op:"IS_NOT_NAN"}};if(eh(t.value))return{unaryFilter:{field:Ls(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ls(t.field),op:QT(t.op),value:t.value}}}(n):n instanceof Rt?function(t){const s=t.getFilters().map(r=>Pg(r));return s.length===1?s[0]:{compositeFilter:{op:XT(t.op),filters:s}}}(n):ae(54877,{filter:n})}function ZT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t,s,r,i=ue.min(),o=ue.min(),l=Qe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new En(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.yt=e}}function tE(n){const e=JT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.Cn=new sE}addToCollectionParentIndex(e,t){return this.Cn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Mn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Mn.min())}updateCollectionGroup(e,t,s){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class sE{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Ge(Ce.comparator),i=!r.has(s);return this.index[t]=r.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ge(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dg=41943040;class dt{static withCacheSize(e){return new dt(e,dt.DEFAULT_COLLECTION_PERCENTILE,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dt.DEFAULT_COLLECTION_PERCENTILE=10,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dt.DEFAULT=new dt(Dg,dt.DEFAULT_COLLECTION_PERCENTILE,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dt.DISABLED=new dt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zs(0)}static cr(){return new Zs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="LruGarbageCollector",rE=1048576;function yh([n,e],[t,s]){const r=ye(n,t);return r===0?ye(e,s):r}class iE{constructor(e){this.Ir=e,this.buffer=new Ge(yh),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();yh(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oE{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(gh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ir(t)?Z(gh,"Ignoring IndexedDB error during garbage collection: ",t):await rr(t)}await this.Vr(3e5)})}}class aE{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return B.resolve(Bo.ce);const s=new iE(t);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(ph)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ph):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,i,o,l,c,u;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,t))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(u=Date.now(),Ds()<=ge.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function lE(n,e){return new aE(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.changes=new ws(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?B.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(s!==null&&zr(s.mutation,r,gt.empty(),_e.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ve()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ve()){const r=ss();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,s).next(i=>{let o=jr();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const s=ss();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ve()))}populateOverlays(e,t,s){const r=[];return s.forEach(i=>{t.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,s,r){let i=un();const o=Hr(),l=function(){return Hr()}();return t.forEach((c,u)=>{const m=s.get(u.key);r.has(u.key)&&(m===void 0||m.mutation instanceof Gn)?i=i.insert(u.key,u):m!==void 0?(o.set(u.key,m.mutation.getFieldMask()),zr(m.mutation,u,m.mutation.getFieldMask(),_e.now())):o.set(u.key,gt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,m)=>o.set(u,m)),t.forEach((u,m)=>l.set(u,new uE(m,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,t){const s=Hr();let r=new ke((o,l)=>o-l),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let m=s.get(c)||gt.empty();m=l.applyToLocalView(u,m),s.set(c,m);const p=(r.get(l.batchId)||ve()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,m=c.value,p=pg();m.forEach(g=>{if(!i.has(g)){const x=bg(t.get(g),s.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return B.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,r){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ug(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-i.size):B.resolve(ss());let l=ei,c=i;return o.next(u=>B.forEach(u,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ve())).next(m=>({batchId:l,changes:mg(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(s=>{let r=jr();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const i=t.collectionGroup;let o=jr();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,c=>{const u=function(p,g){return new or(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,r))).next(o=>{i.forEach((c,u)=>{const m=u.getKey();o.get(m)===null&&(o=o.insert(m,st.newInvalidDocument(m)))});let l=jr();return o.forEach((c,u)=>{const m=i.get(c);m!==void 0&&zr(m.mutation,u,gt.empty(),_e.now()),Wo(t,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return B.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Ot(r.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(r){return{name:r.name,query:tE(r.bundledQuery),readTime:Ot(r.readTime)}}(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.overlays=new ke(se.comparator),this.qr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ss();return B.forEach(t,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((r,i)=>{this.St(e,t,i)}),B.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),B.resolve()}getOverlaysForCollection(e,t,s){const r=ss(),i=t.length+1,o=new se(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return B.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let i=new ke((u,m)=>u-m);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>s){let m=i.get(u.largestBatchId);m===null&&(m=ss(),i=i.insert(u.largestBatchId,m)),m.set(u.getKey(),u)}}const l=ss(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,m)=>l.set(u,m)),!(l.size()>=r)););return B.resolve(l)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new PT(t,s));let i=this.qr.get(t);i===void 0&&(i=ve(),this.qr.set(t,i)),this.qr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.Qr=new Ge(We.$r),this.Ur=new Ge(We.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new We(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new We(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new se(new Ce([])),s=new We(t,e),r=new We(t,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new se(new Ce([])),s=new We(t,e),r=new We(t,e+1);let i=ve();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new We(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class We{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return se.comparator(e.key,t.key)||ye(e.Yr,t.Yr)}static Kr(e,t){return ye(e.Yr,t.Yr)||se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ge(We.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RT(i,t,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,t){return B.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),i=r<0?0:r;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?dc:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new We(t,0),r=new We(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ge(ye);return t.forEach(r=>{const i=new We(r,0),o=new We(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),B.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let i=s;se.isDocumentKey(i)||(i=i.child(""));const o=new We(new se(i),0);let l=new Ge(ye);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),B.resolve(this.ti(l))}ti(e){const t=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ee(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return B.forEach(t.mutations,r=>{const i=new We(r.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new We(t,0),r=this.Zr.firstAfterOrEqual(s);return B.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.ri=e,this.docs=function(){return new ke(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return B.resolve(s?s.document.mutableCopy():st.newInvalidDocument(t))}getEntries(e,t){let s=un();return t.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():st.newInvalidDocument(r))}),B.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let i=un();const o=t.path,l=new se(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:m}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Hw(Gw(m),s)<=0||(r.has(m.key)||Wo(t,m))&&(i=i.insert(m.key,m.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,t,s,r){ae(9500)}ii(e,t){return B.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new yE(this)}getSize(e){return B.resolve(this.size)}}class yE extends cE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),B.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.persistence=e,this.si=new ws(t=>mc(t),pc),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new wc,this.targetCount=0,this.ai=Zs.ur()}forEachTarget(e,t){return this.si.forEach((s,r)=>t(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),B.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Pr(t),B.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=t&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),B.waitFor(i).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return B.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),B.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return B.resolve(s)}containsKey(e,t){return B.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bo(0),this.li=!1,this.li=!0,this.hi=new mE,this.referenceDelegate=e(this),this.Pi=new vE(this),this.indexManager=new nE,this.remoteDocumentCache=function(r){return new gE(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new eE(t),this.Ii=new hE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new pE(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Z("MemoryPersistence","Starting transaction:",e);const r=new xE(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,t){return B.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class xE extends Ww{constructor(e){super(),this.currentSequenceNumber=e}}class Tc{constructor(e){this.persistence=e,this.Ri=new wc,this.Vi=null}static mi(e){return new Tc(e)}get fi(){if(this.Vi)return this.Vi;throw ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),B.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,s=>{const r=se.fromPath(s);return this.gi(e,r).next(i=>{i||t.removeEntry(r,ue.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class So{constructor(e,t){this.persistence=e,this.pi=new ws(s=>Yw(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=lE(this,t)}static mi(e,t){return new So(e,t)}Ei(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(r=>s+r))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return B.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?B.resolve():t(r)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,t).next(l=>{l||(s++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=to(e.data.value)),t}br(e,t,s){return B.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return B.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=ve(),r=ve();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ec(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Xv()?8:Jw(ot())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const i={result:null};return this.ys(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,t,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _E;return this.Ss(e,t,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,t,o,l.size)})}).next(()=>i.result)}bs(e,t,s,r){return s.documentReadCount<this.fs?(Ds()<=ge.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Ms(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Ds()<=ge.DEBUG&&Z("QueryEngine","Query:",Ms(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Ds()<=ge.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Ms(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$t(t))):B.resolve())}ys(e,t){if(ih(t))return B.resolve(null);let s=$t(t);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=vl(t,null,"F"),s=$t(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ve(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(t,l);return this.Cs(t,u,o,c.readTime)?this.ys(e,vl(t,null,"F")):this.vs(e,u,t,c)}))})))}ws(e,t,s,r){return ih(t)||r.isEqual(ue.min())?B.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,s,r)?B.resolve(null):(Ds()<=ge.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ms(t)),this.vs(e,o,t,Bw(r,ei)).next(l=>l))})}Ds(e,t){let s=new Ge(hg(e));return t.forEach((r,i)=>{Wo(e,i)&&(s=s.add(i))}),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,s){return Ds()<=ge.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Ms(t)),this.ps.getDocumentsMatchingQuery(e,t,Mn.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="LocalStore",wE=3e8;class TE{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ke(ye),this.xs=new ws(i=>mc(i),pc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function EE(n,e,t,s){return new TE(n,e,t,s)}async function Lg(n,e){const t=he(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=ve();for(const u of r){o.push(u.batchId);for(const m of u.mutations)c=c.add(m.key)}for(const u of i){l.push(u.batchId);for(const m of u.mutations)c=c.add(m.key)}return t.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function IE(n,e){const t=he(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,m){const p=u.batch,g=p.keys();let x=B.resolve();return g.forEach(b=>{x=x.next(()=>m.getEntry(c,b)).next(T=>{const C=u.docVersions.get(b);Ee(C!==null,48541),T.version.compareTo(C)<0&&(p.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),m.addEntry(T)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(t,s,e,i).next(()=>i.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=ve();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(s,r))})}function Vg(n){const e=he(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function CE(n,e){const t=he(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=r.get(p);if(!g)return;l.push(t.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(i,m.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(Qe.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,s)),r=r.insert(p,x),function(T,C,k){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=wE?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,x,m)&&l.push(t.Pi.updateTargetData(i,x))});let c=un(),u=ve();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(AE(i,o,e.documentUpdates).next(m=>{c=m.ks,u=m.qs})),!s.isEqual(ue.min())){const m=t.Pi.getLastRemoteSnapshotVersion(i).next(p=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(m)}return B.waitFor(l).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.Ms=r,i))}function AE(n,e,t){let s=ve(),r=ve();return t.forEach(i=>s=s.add(i)),e.getEntries(n,s).next(i=>{let o=un();return t.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Z(Ic,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function SE(n,e){const t=he(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=dc),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function NE(n,e){const t=he(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return t.Pi.getTargetData(s,e).next(i=>i?(r=i,B.resolve(r)):t.Pi.allocateTargetId(s).next(o=>(r=new En(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function Tl(n,e,t){const s=he(n),r=s.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ir(o))throw o;Z(Ic,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function vh(n,e,t){const s=he(n);let r=ue.min(),i=ve();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,m){const p=he(c),g=p.xs.get(m);return g!==void 0?B.resolve(p.Ms.get(g)):p.Pi.getTargetData(u,m)}(s,o,$t(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,t?r:ue.min(),t?i:ve())).next(l=>(RE(s,mT(e),l),{documents:l,Qs:i})))}function RE(n,e,t){let s=n.Os.get(e)||ue.min();t.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),n.Os.set(e,s)}class xh{constructor(){this.activeTargetIds=_T()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PE{constructor(){this.Mo=new xh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xh,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="ConnectivityMonitor";class bh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(_h,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(_h,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi=null;function El(){return Hi===null?Hi=function(){return 268435456+Math.round(2147483648*Math.random())}():Hi++,"0x"+Hi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="RestConnection",DE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ME{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===To?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,i){const o=El(),l=this.zo(e,t.toUriEncodedString());Z(Ga,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),m=$n(u);return this.Jo(e,l,c,s,m).then(p=>(Z(Ga,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ks(Ga,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,t,s,r,i,o){return this.Go(e,t,s,r,i)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,t){const s=DE[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class VE extends ME{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,i){const o=El();return new Promise((l,c)=>{const u=new jp;u.setWithCredentials(!0),u.listenOnce(Fp.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eo.NO_ERROR:const p=u.getResponseJson();Z(Ze,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case eo.TIMEOUT:Z(Ze,`RPC '${e}' ${o} timed out`),c(new Y(q.DEADLINE_EXCEEDED,"Request time out"));break;case eo.HTTP_ERROR:const g=u.getStatus();if(Z(Ze,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const T=function(k){const R=k.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(R)>=0?R:q.UNKNOWN}(b.status);c(new Y(T,b.message))}else c(new Y(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Y(q.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Z(Ze,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(r);Z(Ze,`RPC '${e}' ${o} sending request:`,r),u.send(t,"POST",m,s,15)})}T_(e,t,s){const r=El(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qp(),l=Op(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,s),c.encodeInitMessageHeaders=!0;const m=i.join("");Z(Ze,`Creating RPC '${e}' stream ${r}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,x=!1;const b=new LE({Yo:C=>{x?Z(Ze,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(Z(Ze,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),Z(Ze,`RPC '${e}' stream ${r} sending:`,C),p.send(C))},Zo:()=>p.close()}),T=(C,k,R)=>{C.listen(k,P=>{try{R(P)}catch(L){setTimeout(()=>{throw L},0)}})};return T(p,Ur.EventType.OPEN,()=>{x||(Z(Ze,`RPC '${e}' stream ${r} transport opened.`),b.o_())}),T(p,Ur.EventType.CLOSE,()=>{x||(x=!0,Z(Ze,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(p))}),T(p,Ur.EventType.ERROR,C=>{x||(x=!0,Ks(Ze,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),b.a_(new Y(q.UNAVAILABLE,"The operation could not be completed")))}),T(p,Ur.EventType.MESSAGE,C=>{var k;if(!x){const R=C.data[0];Ee(!!R,16349);const P=R,L=(P==null?void 0:P.error)||((k=P[0])==null?void 0:k.error);if(L){Z(Ze,`RPC '${e}' stream ${r} received error:`,L);const U=L.status;let F=function(w){const S=Fe[w];if(S!==void 0)return Tg(S)}(U),I=L.message;F===void 0&&(F=q.INTERNAL,I="Unknown error status: "+U+" with message "+L.message),x=!0,b.a_(new Y(F,I)),p.close()}else Z(Ze,`RPC '${e}' stream ${r} received:`,R),b.u_(R)}}),T(l,$p.STAT_EVENT,C=>{C.stat===dl.PROXY?Z(Ze,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===dl.NOPROXY&&Z(Ze,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Ha(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n){return new $T(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="PersistentStream";class jg{constructor(e,t,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ug(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(cn(t.toString()),cn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===t&&this.G_(s,r)},s=>{e(()=>{const r=new Y(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Z(wh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Z(wh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UE extends jg{constructor(e,t,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=BT(this.serializer,e),s=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Ot(o.readTime):ue.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=wl(this.serializer),t.addTarget=function(i,o){let l;const c=o.target;if(l=gl(c)?{documents:zT(i,c)}:{query:WT(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Cg(i,o.resumeToken);const u=xl(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){l.readTime=Ao(i,o.snapshotVersion.toTimestamp());const u=xl(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=KT(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=wl(this.serializer),t.removeTarget=e,this.q_(t)}}class jE extends jg{constructor(e,t,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=HT(e.writeResults,e.commitTime),s=Ot(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=wl(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>GT(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{}class $E extends FE{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Y(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,_l(t,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(q.UNKNOWN,i.toString())})}Ho(e,t,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,_l(t,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class OE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cn(t),this.aa=!1):Z("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="RemoteStore";class qE{constructor(e,t,s,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{Ts(this)&&(Z(ys,"Restarting streams for network reachability change."),await async function(c){const u=he(c);u.Ea.add(4),await bi(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Xo(u)}(this))})}),this.Ra=new OE(s,r)}}async function Xo(n){if(Ts(n))for(const e of n.da)await e(!0)}async function bi(n){for(const e of n.da)await e(!1)}function Fg(n,e){const t=he(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Nc(t)?Sc(t):ar(t).O_()&&Ac(t,e))}function Cc(n,e){const t=he(n),s=ar(t);t.Ia.delete(e),s.O_()&&$g(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ts(t)&&t.Ra.set("Unknown"))}function Ac(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ar(n).Y_(e)}function $g(n,e){n.Va.Ue(e),ar(n).Z_(e)}function Sc(n){n.Va=new VT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ar(n).start(),n.Ra.ua()}function Nc(n){return Ts(n)&&!ar(n).x_()&&n.Ia.size>0}function Ts(n){return he(n).Ea.size===0}function Og(n){n.Va=void 0}async function BE(n){n.Ra.set("Online")}async function GE(n){n.Ia.forEach((e,t)=>{Ac(n,e)})}async function HE(n,e){Og(n),Nc(n)?(n.Ra.ha(e),Sc(n)):n.Ra.set("Unknown")}async function zE(n,e,t){if(n.Ra.set("Online"),e instanceof Ig&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(n,e)}catch(s){Z(ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await No(n,s)}else if(e instanceof ro?n.Va.Ze(e):e instanceof Eg?n.Va.st(e):n.Va.tt(e),!t.isEqual(ue.min()))try{const s=await Vg(n.localStore);t.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(u);m&&i.Ia.set(u,m.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(Qe.EMPTY_BYTE_STRING,m.snapshotVersion)),$g(i,c);const p=new En(m.target,c,u,m.sequenceNumber);Ac(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(s){Z(ys,"Failed to raise snapshot:",s),await No(n,s)}}async function No(n,e,t){if(!ir(e))throw e;n.Ea.add(1),await bi(n),n.Ra.set("Offline"),t||(t=()=>Vg(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Z(ys,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xo(n)})}function qg(n,e){return e().catch(t=>No(n,t,e))}async function Zo(n){const e=he(n),t=jn(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dc;for(;WE(e);)try{const r=await SE(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,JE(e,r)}catch(r){await No(e,r)}Bg(e)&&Gg(e)}function WE(n){return Ts(n)&&n.Ta.length<10}function JE(n,e){n.Ta.push(e);const t=jn(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Bg(n){return Ts(n)&&!jn(n).x_()&&n.Ta.length>0}function Gg(n){jn(n).start()}async function KE(n){jn(n).ra()}async function YE(n){const e=jn(n);for(const t of n.Ta)e.ea(t.mutations)}async function QE(n,e,t){const s=n.Ta.shift(),r=xc.from(s,e,t);await qg(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Zo(n)}async function XE(n,e){e&&jn(n).X_&&await async function(s,r){if(function(o){return DT(o)&&o!==q.ABORTED}(r.code)){const i=s.Ta.shift();jn(s).B_(),await qg(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Zo(s)}}(n,e),Bg(n)&&Gg(n)}async function Th(n,e){const t=he(n);t.asyncQueue.verifyOperationInProgress(),Z(ys,"RemoteStore received new credentials");const s=Ts(t);t.Ea.add(3),await bi(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xo(t)}async function ZE(n,e){const t=he(n);e?(t.Ea.delete(2),await Xo(t)):e||(t.Ea.add(2),await bi(t),t.Ra.set("Unknown"))}function ar(n){return n.ma||(n.ma=function(t,s,r){const i=he(t);return i.sa(),new UE(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Xo:BE.bind(null,n),t_:GE.bind(null,n),r_:HE.bind(null,n),H_:zE.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Nc(n)?Sc(n):n.Ra.set("Unknown")):(await n.ma.stop(),Og(n))})),n.ma}function jn(n){return n.fa||(n.fa=function(t,s,r){const i=he(t);return i.sa(),new jE(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:KE.bind(null,n),r_:XE.bind(null,n),ta:YE.bind(null,n),na:QE.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Zo(n)):(await n.fa.stop(),n.Ta.length>0&&(Z(ys,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,s,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,i){const o=Date.now()+s,l=new Rc(e,t,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pc(n,e){if(cn("AsyncQueue",`${e}: ${n}`),ir(n))return new Y(q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{static emptySet(e){return new Os(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||se.comparator(t.key,s.key):(t,s)=>se.comparator(t.key,s.key),this.keyedMap=jr(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Os;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this.ga=new ke(se.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class er{constructor(e,t,s,r,i,o,l,c,u){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,s,r,i){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new er(e,t,Os.emptySet(t),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class tI{constructor(){this.queries=Ih(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=he(t),i=r.queries;r.queries=Ih(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new Y(q.ABORTED,"Firestore shutting down"))}}function Ih(){return new ws(n=>dg(n),zo)}async function Hg(n,e){const t=he(n);let s=3;const r=e.query;let i=t.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new eI,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const l=Pc(o,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&kc(t)}async function zg(n,e){const t=he(n),s=e.query;let r=3;const i=t.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function nI(n,e){const t=he(n);let s=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&kc(t)}function sI(n,e,t){const s=he(n),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(t);s.queries.delete(e)}function kc(n){n.Ca.forEach(e=>{e.next()})}var Il,Ch;(Ch=Il||(Il={})).Ma="default",Ch.Cache="cache";class Wg{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new er(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=er.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Il.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.key=e}}class Kg{constructor(e){this.key=e}}class rI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ve(),this.mutatedKeys=ve(),this.eu=hg(e),this.tu=new Os(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Eh,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,p)=>{const g=r.get(m),x=Wo(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),T=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;g&&x?g.data.isEqual(x.data)?b!==T&&(s.track({type:3,doc:x}),C=!0):this.su(g,x)||(s.track({type:2,doc:x}),C=!0,(c&&this.eu(x,c)>0||u&&this.eu(x,u)<0)&&(l=!0)):!g&&x?(s.track({type:0,doc:x}),C=!0):g&&!x&&(s.track({type:1,doc:g}),C=!0,(c||u)&&(l=!0)),C&&(x?(o=o.add(x),i=T?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),s.track({type:1,doc:m})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(x,b){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Rt:C})}};return T(x)-T(b)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(s),r=r??!1;const l=t&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new er(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Eh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ve(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new Kg(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new Jg(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return er.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dc="SyncEngine";class iI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class oI{constructor(e){this.key=e,this.hu=!1}}class aI{constructor(e,t,s,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ws(l=>dg(l),zo),this.Iu=new Map,this.Eu=new Set,this.du=new ke(se.comparator),this.Au=new Map,this.Ru=new wc,this.Vu={},this.mu=new Map,this.fu=Zs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lI(n,e,t=!0){const s=t0(n);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await Yg(s,e,t,!0),r}async function cI(n,e){const t=t0(n);await Yg(t,e,!0,!1)}async function Yg(n,e,t,s){const r=await NE(n.localStore,$t(e)),i=r.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let l;return s&&(l=await uI(n,e,i,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Fg(n.remoteStore,r),l}async function uI(n,e,t,s,r){n.pu=(p,g,x)=>async function(T,C,k,R){let P=C.view.ru(k);P.Cs&&(P=await vh(T.localStore,C.query,!1).then(({documents:I})=>C.view.ru(I,P)));const L=R&&R.targetChanges.get(C.targetId),U=R&&R.targetMismatches.get(C.targetId)!=null,F=C.view.applyChanges(P,T.isPrimaryClient,L,U);return Sh(T,C.targetId,F.au),F.snapshot}(n,p,g,x);const i=await vh(n.localStore,e,!0),o=new rI(e,i.Qs),l=o.ru(i.documents),c=_i.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),u=o.applyChanges(l,n.isPrimaryClient,c);Sh(n,t,u.au);const m=new iI(e,t,o);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function dI(n,e,t){const s=he(n),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!zo(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Tl(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Cc(s.remoteStore,r.targetId),Cl(s,r.targetId)}).catch(rr)):(Cl(s,r.targetId),await Tl(s.localStore,r.targetId,!0))}async function hI(n,e){const t=he(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Cc(t.remoteStore,s.targetId))}async function fI(n,e,t){const s=_I(n);try{const r=await function(o,l){const c=he(o),u=_e.now(),m=l.reduce((x,b)=>x.add(b.key),ve());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let b=un(),T=ve();return c.Ns.getEntries(x,m).next(C=>{b=C,b.forEach((k,R)=>{R.isValidDocument()||(T=T.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,b)).next(C=>{p=C;const k=[];for(const R of l){const P=ST(R,p.get(R.key).overlayedDocument);P!=null&&k.push(new Gn(R.key,P,sg(P.value.mapValue),bt.exists(!0)))}return c.mutationQueue.addMutationBatch(x,u,k,l)}).next(C=>{g=C;const k=C.applyToLocalDocumentSet(p,T);return c.documentOverlayCache.saveOverlays(x,C.batchId,k)})}).then(()=>({batchId:g.batchId,changes:mg(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ke(ye)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,t),await wi(s,r.changes),await Zo(s.remoteStore)}catch(r){const i=Pc(r,"Failed to persist write");t.reject(i)}}async function Qg(n,e){const t=he(n);try{const s=await CE(t.localStore,e);e.targetChanges.forEach((r,i)=>{const o=t.Au.get(i);o&&(Ee(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ee(o.hu,14607):r.removedDocuments.size>0&&(Ee(o.hu,42227),o.hu=!1))}),await wi(t,s,e)}catch(s){await rr(s)}}function Ah(n,e,t){const s=he(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=he(o);c.onlineState=l;let u=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(u=!0)}),u&&kc(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mI(n,e,t){const s=he(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new ke(se.comparator);o=o.insert(i,st.newNoDocument(i,ue.min()));const l=ve().add(i),c=new Yo(ue.min(),new Map,new ke(ye),o,l);await Qg(s,c),s.du=s.du.remove(i),s.Au.delete(e),Mc(s)}else await Tl(s.localStore,e,!1).then(()=>Cl(s,e,t)).catch(rr)}async function pI(n,e){const t=he(n),s=e.batch.batchId;try{const r=await IE(t.localStore,e);Zg(t,s,null),Xg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await wi(t,r)}catch(r){await rr(r)}}async function gI(n,e,t){const s=he(n);try{const r=await function(o,l){const c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let m;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(Ee(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,m)).next(()=>c.localDocuments.getDocuments(u,m))})}(s.localStore,e);Zg(s,e,t),Xg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await wi(s,r)}catch(r){await rr(r)}}function Xg(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function Zg(n,e,t){const s=he(n);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Cl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(s=>{n.Ru.containsKey(s)||e0(n,s)})}function e0(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Cc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Mc(n))}function Sh(n,e,t){for(const s of t)s instanceof Jg?(n.Ru.addReference(s.key,e),yI(n,s)):s instanceof Kg?(Z(Dc,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||e0(n,s.key)):ae(19791,{wu:s})}function yI(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Z(Dc,"New document in limbo: "+t),n.Eu.add(s),Mc(n))}function Mc(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new se(Ce.fromString(e)),s=n.fu.next();n.Au.set(s,new oI(t)),n.du=n.du.insert(t,s),Fg(n.remoteStore,new En($t(gc(t.path)),s,"TargetPurposeLimboResolution",Bo.ce))}}async function wi(n,e,t){const s=he(n),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,t).then(u=>{var m;if((u||t)&&s.isPrimaryClient){const p=u?!u.fromCache:(m=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:m.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){r.push(u);const p=Ec.As(c.targetId,u);i.push(p)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const m=he(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(u,g=>B.forEach(g.Es,x=>m.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>B.forEach(g.ds,x=>m.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!ir(p))throw p;Z(Ic,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const x=m.Ms.get(g),b=x.snapshotVersion,T=x.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(g,T)}}}(s.localStore,i))}async function vI(n,e){const t=he(n);if(!t.currentUser.isEqual(e)){Z(Dc,"User change. New user:",e.toKey());const s=await Lg(t.localStore,e);t.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Y(q.CANCELLED,o))})}),i.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wi(t,s.Ls)}}function xI(n,e){const t=he(n),s=t.Au.get(e);if(s&&s.hu)return ve().add(s.key);{let r=ve();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const l=t.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function t0(n){const e=he(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mI.bind(null,e),e.Pu.H_=nI.bind(null,e.eventManager),e.Pu.yu=sI.bind(null,e.eventManager),e}function _I(n){const e=he(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gI.bind(null,e),e}class Ro{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return EE(this.persistence,new bE,e.initialUser,this.serializer)}Cu(e){return new Mg(Tc.mi,this.serializer)}Du(e){return new PE}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ro.provider={build:()=>new Ro};class bI extends Ro{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ee(this.persistence.referenceDelegate instanceof So,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new oE(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dt.withCacheSize(this.cacheSizeBytes):dt.DEFAULT;return new Mg(s=>So.mi(s,t),this.serializer)}}class Al{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ah(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vI.bind(null,this.syncEngine),await ZE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tI}()}createDatastore(e){const t=Qo(e.databaseInfo.databaseId),s=function(i){return new VE(i)}(e.databaseInfo);return function(i,o,l,c){return new $E(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,r,i,o,l){return new qE(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Ah(this.syncEngine,t,0),function(){return bh.v()?new bh:new kE}())}createSyncEngine(e,t){return function(r,i,o,l,c,u,m){const p=new aI(r,i,o,l,c,u);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const i=he(r);Z(ys,"RemoteStore shutting down."),i.Ea.add(5),await bi(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Al.provider={build:()=>new Al};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="FirestoreClient";class wI{constructor(e,t,s,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=nt.UNAUTHENTICATED,this.clientId=uc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{Z(Fn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Z(Fn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Pc(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function za(n,e){n.asyncQueue.verifyOperationInProgress(),Z(Fn,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Lg(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Nh(n,e){n.asyncQueue.verifyOperationInProgress();const t=await TI(n);Z(Fn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>Th(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>Th(e.remoteStore,r)),n._onlineComponents=e}async function TI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Z(Fn,"Using user provided OfflineComponentProvider");try{await za(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Ks("Error using user provided cache. Falling back to memory cache: "+t),await za(n,new Ro)}}else Z(Fn,"Using default OfflineComponentProvider"),await za(n,new bI(void 0));return n._offlineComponents}async function s0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Z(Fn,"Using user provided OnlineComponentProvider"),await Nh(n,n._uninitializedComponentsProvider._online)):(Z(Fn,"Using default OnlineComponentProvider"),await Nh(n,new Al))),n._onlineComponents}function EI(n){return s0(n).then(e=>e.syncEngine)}async function r0(n){const e=await s0(n),t=e.eventManager;return t.onListen=lI.bind(null,e.syncEngine),t.onUnlisten=dI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hI.bind(null,e.syncEngine),t}function II(n,e,t={}){const s=new rn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const m=new n0({next:g=>{m.Nu(),o.enqueueAndForget(()=>zg(i,p));const x=g.docs.has(l);!x&&g.fromCache?u.reject(new Y(q.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&c&&c.source==="server"?u.reject(new Y(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new Wg(gc(l.path),m,{includeMetadataChanges:!0,qa:!0});return Hg(i,p)}(await r0(n),n.asyncQueue,e,t,s)),s.promise}function CI(n,e,t={}){const s=new rn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const m=new n0({next:g=>{m.Nu(),o.enqueueAndForget(()=>zg(i,p)),g.fromCache&&c.source==="server"?u.reject(new Y(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new Wg(l,m,{includeMetadataChanges:!0,qa:!0});return Hg(i,p)}(await r0(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="firestore.googleapis.com",Ph=!0;class kh{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o0,this.ssl=Ph}else this.host=e.host,this.ssl=e.ssl??Ph;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rE)throw new Y(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i0(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ea{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new kw;switch(s.type){case"firstParty":return new Vw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Y(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Rh.get(t);s&&(Z("ComponentProvider","Removing Datastore"),Rh.delete(t),s.terminate())}(this),Promise.resolve()}}function AI(n,e,t,s={}){var u;n=Nt(n,ea);const r=$n(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;r&&(Jl(`https://${l}`),Kl("Firestore",!0)),i.host!==o0&&i.host!==l&&Ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!hs(c,o)&&(n._setSettings(c),s.mockUserToken)){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=nt.MOCK_USER;else{m=Xm(s.mockUserToken,(u=n._app)==null?void 0:u.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new Y(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new nt(g)}n._authCredentials=new Dw(new Gp(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class je{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new je(this.firestore,e,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(vi(t,je._jsonSchema))return new je(e,s||null,new se(Ce.fromString(t.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:qe("string",je._jsonSchemaVersion),referencePath:qe("string")};class Rn extends Es{constructor(e,t,s){super(e,t,gc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new se(e))}withConverter(e){return new Rn(this.firestore,e,this._path)}}function Mt(n,e,...t){if(n=Pe(n),Hp("collection","path",e),n instanceof ea){const s=Ce.fromString(e,...t);return Hd(s),new Rn(n,null,s)}{if(!(n instanceof je||n instanceof Rn))throw new Y(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ce.fromString(e,...t));return Hd(s),new Rn(n.firestore,null,s)}}function xt(n,e,...t){if(n=Pe(n),arguments.length===1&&(e=uc.newId()),Hp("doc","path",e),n instanceof ea){const s=Ce.fromString(e,...t);return Gd(s),new je(n,null,new se(s))}{if(!(n instanceof je||n instanceof Rn))throw new Y(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ce.fromString(e,...t));return Gd(s),new je(n.firestore,n instanceof Rn?n.converter:null,new se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="AsyncQueue";class Mh{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ug(this,"async_queue_retry"),this._c=()=>{const s=Ha();s&&Z(Dh,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ha();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ha();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new rn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ir(e))throw e;Z(Dh,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,cn("INTERNAL UNHANDLED ERROR: ",Lh(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Rc.createAndSchedule(this,e,t,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ae(47125,{Pc:Lh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Lh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Is extends ea{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new Mh,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mh(e),this._firestoreClient=void 0,await e}}}function SI(n,e){const t=typeof n=="object"?n:Xl(),s=typeof n=="string"?n:To,r=jo(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Km("firestore");i&&AI(r,...i)}return r}function Lc(n){if(n._terminated)throw new Y(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||NI(n),n._firestoreClient}function NI(n){var s,r,i;const e=n._freezeSettings(),t=function(l,c,u,m){return new Zw(l,c,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,i0(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new wI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _t(Qe.fromBase64String(e))}catch(t){throw new Y(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _t(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vi(e,_t._jsonSchema))return _t.fromBase64String(e.bytes)}}_t._jsonSchemaVersion="firestore/bytes/1.0",_t._jsonSchema={type:qe("string",_t._jsonSchemaVersion),bytes:qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qt._jsonSchemaVersion}}static fromJSON(e){if(vi(e,qt._jsonSchema))return new qt(e.latitude,e.longitude)}}qt._jsonSchemaVersion="firestore/geoPoint/1.0",qt._jsonSchema={type:qe("string",qt._jsonSchemaVersion),latitude:qe("number"),longitude:qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Bt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vi(e,Bt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Bt(e.vectorValues);throw new Y(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bt._jsonSchemaVersion="firestore/vectorValue/1.0",Bt._jsonSchema={type:qe("string",Bt._jsonSchemaVersion),vectorValues:qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=/^__.*__$/;class PI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Gn(e,this.data,this.fieldMask,t,this.fieldTransforms):new xi(e,this.data,t,this.fieldTransforms)}}class a0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Gn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function l0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ac:n})}}class Vc{constructor(e,t,s,r,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Po(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(l0(this.Ac)&&RI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kI{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Qo(e)}Cc(e,t,s,r=!1){return new Vc({Ac:e,methodName:t,Dc:s,path:Ye.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sa(n){const e=n._freezeSettings(),t=Qo(n._databaseId);return new kI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function c0(n,e,t,s,r,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,r);jc("Data must be an object, but it was:",o,s);const l=u0(s,o);let c,u;if(i.merge)c=new gt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Sl(e,p,t);if(!o.contains(g))throw new Y(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);h0(m,g)||m.push(g)}c=new gt(m),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new PI(new mt(l),c,u)}class ra extends na{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ra}}class Uc extends na{_toFieldTransform(e){return new ET(e.path,new ii)}isEqual(e){return e instanceof Uc}}function DI(n,e,t,s){const r=n.Cc(1,e,t);jc("Data must be an object, but it was:",r,s);const i=[],o=mt.empty();Bn(s,(c,u)=>{const m=Fc(e,c,t);u=Pe(u);const p=r.yc(m);if(u instanceof ra)i.push(m);else{const g=Ti(u,p);g!=null&&(i.push(m),o.set(m,g))}});const l=new gt(i);return new a0(o,l,r.fieldTransforms)}function MI(n,e,t,s,r,i){const o=n.Cc(1,e,t),l=[Sl(e,s,t)],c=[r];if(i.length%2!=0)throw new Y(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Sl(e,i[g])),c.push(i[g+1]);const u=[],m=mt.empty();for(let g=l.length-1;g>=0;--g)if(!h0(u,l[g])){const x=l[g];let b=c[g];b=Pe(b);const T=o.yc(x);if(b instanceof ra)u.push(x);else{const C=Ti(b,T);C!=null&&(u.push(x),m.set(x,C))}}const p=new gt(u);return new a0(m,p,o.fieldTransforms)}function LI(n,e,t,s=!1){return Ti(t,n.Cc(s?4:3,e))}function Ti(n,e){if(d0(n=Pe(n)))return jc("Unsupported field value:",e,n),u0(n,e);if(n instanceof na)return function(s,r){if(!l0(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=Ti(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(s,r){if((s=Pe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bT(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=_e.fromDate(s);return{timestampValue:Ao(r.serializer,i)}}if(s instanceof _e){const i=new _e(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ao(r.serializer,i)}}if(s instanceof qt)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _t)return{bytesValue:Cg(r.serializer,s._byteString)};if(s instanceof je){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bc(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Bt)return function(o,l){return{mapValue:{fields:{[eg]:{stringValue:ng},[Eo]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return yc(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${qo(s)}`)}(n,e)}function u0(n,e){const t={};return Jp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bn(n,(s,r)=>{const i=Ti(r,e.mc(s));i!=null&&(t[s]=i)}),{mapValue:{fields:t}}}function d0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _e||n instanceof qt||n instanceof _t||n instanceof je||n instanceof na||n instanceof Bt)}function jc(n,e,t){if(!d0(t)||!zp(t)){const s=qo(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Sl(n,e,t){if((e=Pe(e))instanceof ta)return e._internalPath;if(typeof e=="string")return Fc(n,e);throw Po("Field path arguments must be of type string or ",n,!1,void 0,t)}const VI=new RegExp("[~\\*/\\[\\]]");function Fc(n,e,t){if(e.search(VI)>=0)throw Po(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ta(...e.split("."))._internalPath}catch{throw Po(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Po(n,e,t,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Y(q.INVALID_ARGUMENT,l+n+c)}function h0(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,s,r,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ia("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UI extends f0{data(){return super.data()}}function ia(n,e){return typeof e=="string"?Fc(n,e):e instanceof ta?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $c{}class m0 extends $c{}function Qn(n,e,...t){let s=[];e instanceof $c&&s.push(e),s=s.concat(t),function(i){const o=i.filter(c=>c instanceof Oc).length,l=i.filter(c=>c instanceof oa).length;if(o>1||o>0&&l>0)throw new Y(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)n=r._apply(n);return n}class oa extends m0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new oa(e,t,s)}_apply(e){const t=this._parse(e);return p0(e._query,t),new Es(e.firestore,e.converter,yl(e._query,t))}_parse(e){const t=sa(e.firestore);return function(i,o,l,c,u,m,p){let g;if(u.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Y(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){jh(p,m);const b=[];for(const T of p)b.push(Uh(c,i,T));g={arrayValue:{values:b}}}else g=Uh(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||jh(p,m),g=LI(l,o,p,m==="in"||m==="not-in");return $e.create(u,m,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Jt(n,e,t){const s=e,r=ia("where",n);return oa._create(r,s,t)}class Oc extends $c{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Oc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Rt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)p0(o,c),o=yl(o,c)}(e._query,t),new Es(e.firestore,e.converter,yl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qc extends m0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qc(e,t)}_apply(e){const t=function(r,i,o){if(r.startAt!==null)throw new Y(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Y(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ri(i,o)}(e._query,this._field,this._direction);return new Es(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new or(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function Vh(n,e="asc"){const t=e,s=ia("orderBy",n);return qc._create(s,t)}function Uh(n,e,t){if(typeof(t=Pe(t))=="string"){if(t==="")throw new Y(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ug(e)&&t.indexOf("/")!==-1)throw new Y(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ce.fromString(t));if(!se.isDocumentKey(s))throw new Y(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Zd(n,new se(s))}if(t instanceof je)return Zd(n,t._key);throw new Y(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qo(t)}.`)}function jh(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p0(n,e){const t=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Y(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class FI{convertValue(e,t="none"){switch(Un(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Bn(e,(r,i)=>{s[r]=this.convertValue(i,t)}),s}convertVectorValue(e){var s,r,i;const t=(i=(r=(s=e.fields)==null?void 0:s[Eo].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>Ue(o.doubleValue));return new Bt(t)}convertGeoPoint(e){return new qt(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ho(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ti(e));default:return null}}convertTimestamp(e){const t=Ln(e);return new _e(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ce.fromString(e);Ee(kg(s),9688,{name:e});const r=new ni(s.get(1),s.get(3)),i=new se(s.popFirst(5));return r.isEqual(t)||cn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class $r{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class os extends f0{constructor(e,t,s,r,i,o){super(e,t,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ia("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=os._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}os._jsonSchemaVersion="firestore/documentSnapshot/1.0",os._jsonSchema={type:qe("string",os._jsonSchemaVersion),bundleSource:qe("string","DocumentSnapshot"),bundleName:qe("string"),bundle:qe("string")};class io extends os{data(e={}){return super.data(e)}}class qs{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $r(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new io(this._firestore,this._userDataWriter,s.key,s,new $r(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new io(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $r(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new io(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $r(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,m=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:$I(l.type),doc:c,oldIndex:u,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $I(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){n=Nt(n,je);const e=Nt(n.firestore,Is);return II(Lc(e),n._key).then(t=>qI(e,n,t))}qs._jsonSchemaVersion="firestore/querySnapshot/1.0",qs._jsonSchema={type:qe("string",qs._jsonSchemaVersion),bundleSource:qe("string","QuerySnapshot"),bundleName:qe("string"),bundle:qe("string")};class y0 extends FI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _t(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,t)}}function Xn(n){n=Nt(n,Es);const e=Nt(n.firestore,Is),t=Lc(e),s=new y0(e);return jI(n._query),CI(t,n._query).then(r=>new qs(e,s,n,r))}function Pr(n,e,t){n=Nt(n,je);const s=Nt(n.firestore,Is),r=g0(n.converter,e,t);return aa(s,[c0(sa(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,bt.none())])}function Nl(n,e,t,...s){n=Nt(n,je);const r=Nt(n.firestore,Is),i=sa(r);let o;return o=typeof(e=Pe(e))=="string"||e instanceof ta?MI(i,"updateDoc",n._key,e,t,s):DI(i,"updateDoc",n._key,e),aa(r,[o.toMutation(n._key,bt.exists(!0))])}function OI(n){return aa(Nt(n.firestore,Is),[new vc(n._key,bt.none())])}function Rl(n,e){const t=Nt(n.firestore,Is),s=xt(n),r=g0(n.converter,e);return aa(t,[c0(sa(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,bt.exists(!1))]).then(()=>s)}function aa(n,e){return function(s,r){const i=new rn;return s.asyncQueue.enqueueAndForget(async()=>fI(await EI(s),r,i)),i.promise}(Lc(n),e)}function qI(n,e,t){const s=t.docs.get(e._key),r=new y0(n);return new os(n,r,e._key,s,new $r(t.hasPendingWrites,t.fromCache),e.converter)}function Wa(){return new Uc("serverTimestamp")}(function(e,t=!0){(function(r){sr=r})(bs),fs(new Dn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new Is(new Mw(s.getProvider("auth-internal")),new Uw(o,s.getProvider("app-check-internal")),function(u,m){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ni(u.options.projectId,m)}(o,r),o);return i={useFetchStreams:t,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),jt($d,Od,e),jt($d,Od,"esm2020")})();var BI="firebase",GI="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt(BI,GI,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="firebasestorage.googleapis.com",x0="storageBucket",HI=2*60*1e3,zI=10*60*1e3,WI=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me extends Wt{constructor(e,t,s=0){super(Ja(e),`Firebase Storage: ${t} (${Ja(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Me.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ja(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Re;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Re||(Re={}));function Ja(n){return"storage/"+n}function Bc(){const n="An unknown error occurred, please check the error payload for server response.";return new Me(Re.UNKNOWN,n)}function JI(n){return new Me(Re.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function KI(n){return new Me(Re.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function YI(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Me(Re.UNAUTHENTICATED,n)}function QI(){return new Me(Re.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XI(n){return new Me(Re.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function _0(){return new Me(Re.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function b0(){return new Me(Re.CANCELED,"User canceled the upload/download.")}function ZI(n){return new Me(Re.INVALID_URL,"Invalid URL '"+n+"'.")}function eC(n){return new Me(Re.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function tC(){return new Me(Re.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+x0+"' property when initializing the app?")}function w0(){return new Me(Re.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nC(){return new Me(Re.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function sC(){return new Me(Re.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rC(n){return new Me(Re.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Pl(n){return new Me(Re.INVALID_ARGUMENT,n)}function T0(){return new Me(Re.APP_DELETED,"The Firebase app was deleted.")}function iC(n){return new Me(Re.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wr(n,e){return new Me(Re.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function kr(n){throw new Me(Re.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=yt.makeFromUrl(e,t)}catch{return new yt(e,"")}if(s.path==="")return s;throw eC(e)}static makeFromUrl(e,t){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function u(L){L.path_=decodeURIComponent(L.path)}const m="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${m}/b/${r}/o${g}`,"i"),b={bucket:1,path:3},T=t===v0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",k=new RegExp(`^https?://${T}/${r}/${C}`,"i"),P=[{regex:l,indices:c,postModify:i},{regex:x,indices:b,postModify:u},{regex:k,indices:{bucket:1,path:2},postModify:u}];for(let L=0;L<P.length;L++){const U=P[L],F=U.regex.exec(e);if(F){const I=F[U.indices.bucket];let _=F[U.indices.path];_||(_=""),s=new yt(I,_),U.postModify(s);break}}if(s==null)throw ZI(e);return s}}class oC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(n,e,t){let s=1,r=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function m(...C){u||(u=!0,e.apply(null,C))}function p(C){r=setTimeout(()=>{r=null,n(x,c())},C)}function g(){i&&clearTimeout(i)}function x(C,...k){if(u){g();return}if(C){g(),m.call(null,C,...k);return}if(c()||o){g(),m.call(null,C,...k);return}s<64&&(s*=2);let P;l===1?(l=2,P=0):P=(s+Math.random())*1e3,p(P)}let b=!1;function T(C){b||(b=!0,g(),!u&&(r!==null?(C||(l=2),clearTimeout(r),p(0)):C||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,T(!0)},t),T}function lC(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(n){return n!==void 0}function uC(n){return typeof n=="function"}function dC(n){return typeof n=="object"&&!Array.isArray(n)}function la(n){return typeof n=="string"||n instanceof String}function Fh(n){return Gc()&&n instanceof Blob}function Gc(){return typeof Blob<"u"}function $h(n,e,t,s){if(s<e)throw Pl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw Pl(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function E0(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const r=e(s)+"="+e(n[s]);t=t+r+"&"}return t=t.slice(0,-1),t}var as;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(as||(as={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t,s,r,i,o,l,c,u,m,p,g=!0,x=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=m,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,T)=>{this.resolve_=b,this.reject_=T,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new zi(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===as.NO_ERROR,c=i.getStatus();if(!l||I0(c,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===as.ABORT;s(!1,new zi(!1,null,m));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new zi(u,i))})},t=(s,r)=>{const i=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());cC(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=Bc();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(r.canceled){const c=this.appDelete_?T0():b0();o(c)}else{const c=_0();o(c)}};this.canceled_?t(!1,new zi(!1,null,!0)):this.backoffId_=aC(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zi{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function fC(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function mC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pC(n,e){e&&(n["X-Firebase-GMPID"]=e)}function gC(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function yC(n,e,t,s,r,i,o=!0,l=!1){const c=E0(n.urlParams),u=n.url+c,m=Object.assign({},n.headers);return pC(m,e),fC(m,t),mC(m,i),gC(m,s),new hC(u,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xC(...n){const e=vC();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(Gc())return new Blob(n);throw new Me(Re.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _C(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n){if(typeof atob>"u")throw rC("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ka{constructor(e,t){this.data=e,this.contentType=t||null}}function wC(n,e){switch(n){case Vt.RAW:return new Ka(C0(e));case Vt.BASE64:case Vt.BASE64URL:return new Ka(A0(n,e));case Vt.DATA_URL:return new Ka(EC(e),IC(e))}throw Bc()}function C0(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=s,o=n.charCodeAt(++t);s=65536|(i&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function TC(n){let e;try{e=decodeURIComponent(n)}catch{throw Wr(Vt.DATA_URL,"Malformed data URL.")}return C0(e)}function A0(n,e){switch(n){case Vt.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Wr(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Vt.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Wr(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=bC(e)}catch(r){throw r.message.includes("polyfill")?r:Wr(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s}class S0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Wr(Vt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=CC(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function EC(n){const e=new S0(n);return e.base64?A0(Vt.BASE64,e.rest):TC(e.rest)}function IC(n){return new S0(n).contentType}function CC(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t){let s=0,r="";Fh(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Fh(this.data_)){const s=this.data_,r=_C(s,e,t);return r===null?null:new Tn(r)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Tn(s,!0)}}static getBlob(...e){if(Gc()){const t=e.map(s=>s instanceof Tn?s.data_:s);return new Tn(xC.apply(null,t))}else{const t=e.map(o=>la(o)?wC(Vt.RAW,o).data:o.data_);let s=0;t.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return t.forEach(o=>{for(let l=0;l<o.length;l++)r[i++]=o[l]}),new Tn(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(n){let e;try{e=JSON.parse(n)}catch{return null}return dC(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function SC(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function R0(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n,e){return e}class ct{constructor(e,t,s,r){this.server=e,this.local=t||e,this.writable=!!s,this.xform=r||NC}}let Wi=null;function RC(n){return!la(n)||n.length<2?n:R0(n)}function P0(){if(Wi)return Wi;const n=[];n.push(new ct("bucket")),n.push(new ct("generation")),n.push(new ct("metageneration")),n.push(new ct("name","fullPath",!0));function e(i,o){return RC(o)}const t=new ct("name");t.xform=e,n.push(t);function s(i,o){return o!==void 0?Number(o):o}const r=new ct("size");return r.xform=s,n.push(r),n.push(new ct("timeCreated")),n.push(new ct("updated")),n.push(new ct("md5Hash",null,!0)),n.push(new ct("cacheControl",null,!0)),n.push(new ct("contentDisposition",null,!0)),n.push(new ct("contentEncoding",null,!0)),n.push(new ct("contentLanguage",null,!0)),n.push(new ct("contentType",null,!0)),n.push(new ct("metadata","customMetadata",!0)),Wi=n,Wi}function PC(n,e){function t(){const s=n.bucket,r=n.fullPath,i=new yt(s,r);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function kC(n,e,t){const s={};s.type="file";const r=t.length;for(let i=0;i<r;i++){const o=t[i];s[o.local]=o.xform(s,e[o.server])}return PC(s,n),s}function k0(n,e,t){const s=N0(e);return s===null?null:kC(n,s,t)}function DC(n,e,t,s){const r=N0(e);if(r===null||!la(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const m=n.bucket,p=n.fullPath,g="/b/"+o(m)+"/o/"+o(p),x=lr(g,t,s),b=E0({alt:"media",token:u});return x+b})[0]}function D0(n,e){const t={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}class Cs{constructor(e,t,s,r){this.url=e,this.method=t,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n){if(!n)throw Bc()}function Hc(n,e){function t(s,r){const i=k0(n,r,e);return on(i!==null),i}return t}function MC(n,e){function t(s,r){const i=k0(n,r,e);return on(i!==null),DC(i,r,n.host,n._protocol)}return t}function Ei(n){function e(t,s){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=QI():r=YI():t.getStatus()===402?r=KI(n.bucket):t.getStatus()===403?r=XI(n.path):r=s,r.status=t.getStatus(),r.serverResponse=s.serverResponse,r}return e}function zc(n){const e=Ei(n);function t(s,r){let i=e(s,r);return s.getStatus()===404&&(i=JI(n.path)),i.serverResponse=r.serverResponse,i}return t}function LC(n,e,t){const s=e.fullServerUrl(),r=lr(s,n.host,n._protocol),i="GET",o=n.maxOperationRetryTime,l=new Cs(r,i,Hc(n,t),o);return l.errorHandler=zc(e),l}function VC(n,e,t){const s=e.fullServerUrl(),r=lr(s,n.host,n._protocol),i="GET",o=n.maxOperationRetryTime,l=new Cs(r,i,MC(n,t),o);return l.errorHandler=zc(e),l}function UC(n,e){const t=e.fullServerUrl(),s=lr(t,n.host,n._protocol),r="DELETE",i=n.maxOperationRetryTime;function o(c,u){}const l=new Cs(s,r,o,i);return l.successCodes=[200,204],l.errorHandler=zc(e),l}function jC(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function M0(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=jC(null,e)),s}function FC(n,e,t,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let P="";for(let L=0;L<2;L++)P=P+Math.random().toString().slice(2);return P}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=M0(e,s,r),m=D0(u,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+c+"--",x=Tn.getBlob(p,s,g);if(x===null)throw w0();const b={name:u.fullPath},T=lr(i,n.host,n._protocol),C="POST",k=n.maxUploadRetryTime,R=new Cs(T,C,Hc(n,t),k);return R.urlParams=b,R.headers=o,R.body=x.uploadData(),R.errorHandler=Ei(e),R}class ko{constructor(e,t,s,r){this.current=e,this.total=t,this.finalized=!!s,this.metadata=r||null}}function Wc(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{on(!1)}return on(!!t&&(e||["active"]).indexOf(t)!==-1),t}function $C(n,e,t,s,r){const i=e.bucketOnlyServerUrl(),o=M0(e,s,r),l={name:o.fullPath},c=lr(i,n.host,n._protocol),u="POST",m={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=D0(o,t),g=n.maxUploadRetryTime;function x(T){Wc(T);let C;try{C=T.getResponseHeader("X-Goog-Upload-URL")}catch{on(!1)}return on(la(C)),C}const b=new Cs(c,u,x,g);return b.urlParams=l,b.headers=m,b.body=p,b.errorHandler=Ei(e),b}function OC(n,e,t,s){const r={"X-Goog-Upload-Command":"query"};function i(u){const m=Wc(u,["active","final"]);let p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{on(!1)}p||on(!1);const g=Number(p);return on(!isNaN(g)),new ko(g,s.size(),m==="final")}const o="POST",l=n.maxUploadRetryTime,c=new Cs(t,o,i,l);return c.headers=r,c.errorHandler=Ei(e),c}const Oh=256*1024;function qC(n,e,t,s,r,i,o,l){const c=new ko(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw nC();const u=c.total-c.current;let m=u;r>0&&(m=Math.min(m,r));const p=c.current,g=p+m;let x="";m===0?x="finalize":u===m?x="upload, finalize":x="upload";const b={"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":`${c.current}`},T=s.slice(p,g);if(T===null)throw w0();function C(L,U){const F=Wc(L,["active","final"]),I=c.current+m,_=s.size();let w;return F==="final"?w=Hc(e,i)(L,U):w=null,new ko(I,_,F==="final",w)}const k="POST",R=e.maxUploadRetryTime,P=new Cs(t,k,C,R);return P.headers=b,P.body=T.uploadData(),P.progressCallback=l||null,P.errorHandler=Ei(n),P}const ht={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ya(n){switch(n){case"running":case"pausing":case"canceling":return ht.RUNNING;case"paused":return ht.PAUSED;case"success":return ht.SUCCESS;case"canceled":return ht.CANCELED;case"error":return ht.ERROR;default:return ht.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,s){if(uC(e)||t!=null||s!=null)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class GC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=as.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=as.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=as.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,r,i){if(this.sent_)throw kr("cannot .send() more than once");if($n(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class HC extends GC{initXhr(){this.xhr_.responseType="text"}}function ts(){return new HC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=P0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Re.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(I0(r.status,[]))if(i)r=_0();else{this.sleepTime=Math.max(this.sleepTime*2,WI),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Re.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,i)=>{this._resolve=r,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const s=$C(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,ts,e,t);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const r=OC(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,ts,t,s);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Oh*this._chunkMultiplier,t=new ko(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((r,i)=>{let o;try{o=qC(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,ts,r,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Oh*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=LC(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(s,ts,e,t);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=FC(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,ts,e,t);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=b0(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ya(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,r){const i=new BC(t||void 0,s||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ya(this._state)){case ht.SUCCESS:Ps(this._resolve.bind(null,this.snapshot))();break;case ht.CANCELED:case ht.ERROR:const t=this._reject;Ps(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ya(this._state)){case ht.RUNNING:case ht.PAUSED:e.next&&Ps(e.next.bind(e,this.snapshot))();break;case ht.SUCCESS:e.complete&&Ps(e.complete.bind(e))();break;case ht.CANCELED:case ht.ERROR:e.error&&Ps(e.error.bind(e,this._error))();break;default:e.error&&Ps(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this._service=e,t instanceof yt?this._location=t:this._location=yt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vs(e,t)}get root(){const e=new yt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R0(this._location.path)}get storage(){return this._service}get parent(){const e=AC(this._location.path);if(e===null)return null;const t=new yt(this._location.bucket,e);return new vs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw iC(e)}}function WC(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new zC(n,new Tn(e),t)}function JC(n){n._throwIfRoot("getDownloadURL");const e=VC(n.storage,n._location,P0());return n.storage.makeRequestWithTokens(e,ts).then(t=>{if(t===null)throw sC();return t})}function KC(n){n._throwIfRoot("deleteObject");const e=UC(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ts)}function YC(n,e){const t=SC(n._location.path,e),s=new yt(n._location.bucket,t);return new vs(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n){return/^[A-Za-z]+:\/\//.test(n)}function XC(n,e){return new vs(n,e)}function L0(n,e){if(n instanceof Jc){const t=n;if(t._bucket==null)throw tC();const s=new vs(t,t._bucket);return e!=null?L0(s,e):s}else return e!==void 0?YC(n,e):n}function ZC(n,e){if(e&&QC(e)){if(n instanceof Jc)return XC(n,e);throw Pl("To use ref(service, url), the first argument must be a Storage instance.")}else return L0(n,e)}function qh(n,e){const t=e==null?void 0:e[x0];return t==null?null:yt.makeFromBucketSpec(t,n)}function eA(n,e,t,s={}){n.host=`${e}:${t}`;const r=$n(e);r&&(Jl(`https://${n.host}/b`),Kl("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(n._overrideAuthToken=typeof i=="string"?i:Xm(i,n.app.options.projectId))}class Jc{constructor(e,t,s,r,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=v0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HI,this._maxUploadRetryTime=zI,this._requests=new Set,r!=null?this._bucket=yt.makeFromBucketSpec(r,this._host):this._bucket=qh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yt.makeFromBucketSpec(this._url,e):this._bucket=qh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$h("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$h("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vs(this,e)}_makeRequest(e,t,s,r,i=!0){if(this._deleted)return new oC(T0());{const o=yC(e,this._appId,s,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,r).getPromise()}}const Bh="@firebase/storage",Gh="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="storage";function Hh(n,e,t){return n=Pe(n),WC(n,e,t)}function zh(n){return n=Pe(n),JC(n)}function tA(n){return n=Pe(n),KC(n)}function Qa(n,e){return n=Pe(n),ZC(n,e)}function nA(n=Xl(),e){n=Pe(n);const s=jo(n,V0).getImmediate({identifier:e}),r=Km("storage");return r&&sA(s,...r),s}function sA(n,e,t,s={}){eA(n,e,t,s)}function rA(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Jc(t,s,r,e,bs)}function iA(){fs(new Dn(V0,rA,"PUBLIC").setMultipleInstances(!0)),jt(Bh,Gh,""),jt(Bh,Gh,"esm2020")}iA();const es={apiKey:"AIzaSyCWdpMhzziFi7S0OpaPYlMXYtKTWDKZlaU",authDomain:"vp-pro-aebbc.firebaseapp.com",projectId:"vp-pro-aebbc",storageBucket:"gs://vp-pro-aebbc.firebasestorage.app",messagingSenderId:"872754095925",appId:"1:872754095925:web:ee14fb2d10b7e9f11a8e7c"},U0=()=>!!(es.apiKey&&es.authDomain&&es.projectId&&es.storageBucket&&es.messagingSenderId&&es.appId);U0()||(console.error("Firebase configuration is missing! Please check your .env file."),console.error("Required environment variables:"),console.error("- VITE_FIREBASE_API_KEY"),console.error("- VITE_FIREBASE_AUTH_DOMAIN"),console.error("- VITE_FIREBASE_PROJECT_ID"),console.error("- VITE_FIREBASE_STORAGE_BUCKET"),console.error("- VITE_FIREBASE_MESSAGING_SENDER_ID"),console.error("- VITE_FIREBASE_APP_ID"));let Ji=null,Te=null,pe=null,et=null;try{U0()?(Ji=tp(es),Te=Rw(Ji),pe=SI(Ji),et=nA(Ji)):(console.warn("Firebase not configured. Authentication will not work."),Te={currentUser:null,onAuthStateChanged:()=>()=>{}},pe={},et={})}catch(n){console.error("Error initializing Firebase:",n),Te={currentUser:null,onAuthStateChanged:()=>()=>{}},pe={},et={}}const oo=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Te},get db(){return pe},get storage(){return et}},Symbol.toStringTag,{value:"Module"}));class oA{async register(e){try{if(!Te||!pe||typeof Te=="object"&&!Te.currentUser&&!Te.onAuthStateChanged)throw new Error("Firebase is not configured. Please check your environment variables in .env file. See FIREBASE_SETUP.md for setup instructions.");const s=(await mb(Te,e.email,e.password)).user;await yb(s,{displayName:`${e.firstName} ${e.lastName}`});const r={id:s.uid,firstName:e.firstName,lastName:e.lastName,email:e.email,userType:e.userType,createdAt:Wa(),profile:{}};try{await Pr(xt(pe,"users",s.uid),r)}catch(l){throw console.error("Error creating user document in Firestore:",l),await s.delete(),l.code==="permission-denied"?new Error("Permission denied. Please check Firestore security rules. The user document ID must match the authenticated user UID."):l}const i=await s.getIdToken();return{message:"User registered successfully",user:{id:parseInt(s.uid.slice(0,8),16)||0,firstName:e.firstName,lastName:e.lastName,email:e.email,userType:e.userType,createdAt:new Date().toISOString()},token:i}}catch(t){console.error("Firebase registration error:",t),console.error("Error details:",{code:t.code,message:t.message,stack:t.stack});let s="Registration failed";throw t.message&&t.message.includes("Firebase is not configured")?s=t.message:t.code==="auth/email-already-in-use"?s="Email is already registered. Please use a different email or try logging in.":t.code==="auth/weak-password"?s="Password is too weak. Please use at least 6 characters.":t.code==="auth/invalid-email"?s="Invalid email address. Please check your email format.":t.code==="auth/operation-not-allowed"?s="Email/password authentication is not enabled. Please enable it in Firebase Console.":t.code==="auth/network-request-failed"?s="Network error. Please check your internet connection.":t.code==="permission-denied"?s="Permission denied. Please check Firestore security rules.":t.message?s=t.message:t.code&&(s=`Registration failed: ${t.code}`),new Error(s)}}async login(e){var t,s,r;try{if(!Te)throw new Error("Firebase is not configured. Please check your environment variables in .env file. See FIREBASE_SETUP.md for setup instructions.");const o=(await pb(Te,e.email,e.password)).user,l=xt(pe,"users",o.uid),c=await Yt(l);if(!c.exists())throw new Error("User data not found");const u=c.data();if(u.userType!==e.userType)throw await Sd(Te),new Error("Invalid user type for this account");const m=await o.getIdToken();return{message:"Login successful",user:{id:parseInt(o.uid.slice(0,8),16)||0,firstName:u.firstName,lastName:u.lastName,email:u.email,userType:u.userType,createdAt:((r=(s=(t=u.createdAt)==null?void 0:t.toDate)==null?void 0:s.call(t))==null?void 0:r.toISOString())||new Date().toISOString(),profile:u.profile||{}},token:m}}catch(i){console.error("Firebase login error:",i);let o="Login failed";throw i.code==="auth/user-not-found"?o="No account found with this email":i.code==="auth/wrong-password"?o="Incorrect password":i.code==="auth/invalid-email"?o="Invalid email address":i.code==="auth/too-many-requests"&&(o="Too many failed attempts. Please try again later"),new Error(o)}}async logout(){try{await Sd(Te)}catch(e){throw console.error("Firebase logout error:",e),new Error("Logout failed")}}async getCurrentUser(){var t,s,r;const e=Te.currentUser;if(!e)return null;try{const i=xt(pe,"users",e.uid),o=await Yt(i);if(!o.exists())return null;const l=o.data();return{id:parseInt(e.uid.slice(0,8),16)||0,firstName:l.firstName,lastName:l.lastName,email:l.email,userType:l.userType,createdAt:((r=(s=(t=l.createdAt)==null?void 0:t.toDate)==null?void 0:s.call(t))==null?void 0:r.toISOString())||new Date().toISOString(),profile:l.profile||{}}}catch(i){return console.error("Error getting current user:",i),null}}async getIdToken(){const e=Te.currentUser;if(!e)return null;try{return await e.getIdToken()}catch(t){return console.error("Error getting ID token:",t),null}}onAuthStateChanged(e){return!Te||typeof Te=="object"&&!Te.onAuthStateChanged?()=>{}:_b(Te,async t=>{if(!t){e(null);return}try{const s=await this.getCurrentUser();e(s)}catch(s){console.error("Error in auth state change:",s),e(null)}})}async signInWithGoogle(e){var t,s,r;try{if(!Te||!pe||typeof Te=="object"&&!Te.currentUser&&!Te.onAuthStateChanged)throw new Error("Firebase is not configured. Please check your environment variables in .env file.");const i=new Qt;i.addScope("profile"),i.addScope("email");const l=(await Pd(Te,i)).user,c=xt(pe,"users",l.uid),u=await Yt(c);if(u.exists())u.data().userType!==e&&await Pr(c,{userType:e},{merge:!0});else{const T=(l.displayName||"").split(" "),C=T[0]||"",k=T.slice(1).join(" ")||"User",R={id:l.uid,firstName:C,lastName:k,email:l.email||"",userType:e,createdAt:Wa(),profile:{avatarUrl:l.photoURL||""}};await Pr(c,R)}const m=await l.getIdToken(),g=(await Yt(c)).data();return{message:"Login successful",user:{id:parseInt(l.uid.slice(0,8),16)||0,firstName:g.firstName,lastName:g.lastName,email:g.email,userType:g.userType,createdAt:((r=(s=(t=g.createdAt)==null?void 0:t.toDate)==null?void 0:s.call(t))==null?void 0:r.toISOString())||new Date().toISOString(),profile:g.profile||{}},token:m}}catch(i){console.error("Google sign-in error:",i);let o="Google sign-in failed";throw i.code==="auth/popup-closed-by-user"?o="Sign-in popup was closed":i.code==="auth/popup-blocked"?o="Popup was blocked. Please allow popups for this site.":i.code==="auth/account-exists-with-different-credential"&&(o="An account already exists with this email using a different sign-in method."),new Error(o)}}async signInWithGitHub(e){var t,s,r;try{if(!Te||!pe||typeof Te=="object"&&!Te.currentUser&&!Te.onAuthStateChanged)throw new Error("Firebase is not configured. Please check your environment variables in .env file.");const i=new Xt;i.addScope("user:email");const l=(await Pd(Te,i)).user,c=xt(pe,"users",l.uid),u=await Yt(c);if(u.exists())u.data().userType!==e&&await Pr(c,{userType:e},{merge:!0});else{const T=(l.displayName||l.email||"").split(" "),C=T[0]||"",k=T.slice(1).join(" ")||"User",R={id:l.uid,firstName:C,lastName:k,email:l.email||"",userType:e,createdAt:Wa(),profile:{avatarUrl:l.photoURL||"",githubUrl:`https://github.com/${l.displayName||""}`}};await Pr(c,R)}const m=await l.getIdToken(),g=(await Yt(c)).data();return{message:"Login successful",user:{id:parseInt(l.uid.slice(0,8),16)||0,firstName:g.firstName,lastName:g.lastName,email:g.email,userType:g.userType,createdAt:((r=(s=(t=g.createdAt)==null?void 0:t.toDate)==null?void 0:s.call(t))==null?void 0:r.toISOString())||new Date().toISOString(),profile:g.profile||{}},token:m}}catch(i){console.error("GitHub sign-in error:",i);let o="GitHub sign-in failed";throw i.code==="auth/popup-closed-by-user"?o="Sign-in popup was closed":i.code==="auth/popup-blocked"?o="Popup was blocked. Please allow popups for this site.":i.code==="auth/account-exists-with-different-credential"&&(o="An account already exists with this email using a different sign-in method."),new Error(o)}}}const Kt=new oA,Gt=ui()(di((n,e)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,login:async t=>{n({isLoading:!0,error:null});try{const s=await Kt.login(t);n({user:s.user,token:s.token,isAuthenticated:!0,isLoading:!1,error:null}),le.success(`Welcome back, ${s.user.firstName}!`)}catch(s){const r=s instanceof Error?s.message:"Login failed";throw n({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:r}),le.error(r),s}},register:async t=>{n({isLoading:!0,error:null});try{const s=await Kt.register(t);n({user:s.user,token:s.token,isAuthenticated:!0,isLoading:!1,error:null}),le.success(`Welcome! Your ${t.userType} account has been created successfully!`)}catch(s){const r=s instanceof Error?s.message:"Registration failed";throw n({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:r}),le.error(r),s}},loginWithGoogle:async t=>{n({isLoading:!0,error:null});try{const s=await Kt.signInWithGoogle(t);n({user:s.user,token:s.token,isAuthenticated:!0,isLoading:!1,error:null}),le.success(`Welcome, ${s.user.firstName}!`)}catch(s){const r=s instanceof Error?s.message:"Google sign-in failed";throw n({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:r}),le.error(r),s}},loginWithGitHub:async t=>{n({isLoading:!0,error:null});try{const s=await Kt.signInWithGitHub(t);n({user:s.user,token:s.token,isAuthenticated:!0,isLoading:!1,error:null}),le.success(`Welcome, ${s.user.firstName}!`)}catch(s){const r=s instanceof Error?s.message:"GitHub sign-in failed";throw n({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:r}),le.error(r),s}},logout:async()=>{n({isLoading:!0});try{await Kt.logout();const{useCourseStore:t}=await is(async()=>{const{useCourseStore:s}=await Promise.resolve().then(()=>kl);return{useCourseStore:s}},void 0);t.getState().clearEnrollments()}catch(t){console.error("Logout error:",t)}finally{n({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null}),le.success("Logged out successfully")}},loadUserProfile:async()=>{n({isLoading:!0,error:null});try{const t=await Kt.getCurrentUser(),s=await Kt.getIdToken();n(t&&s?{user:t,token:s,isAuthenticated:!0,isLoading:!1,error:null}:{user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(t){const s=t instanceof Error?t.message:"Failed to load profile";n({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:s}),console.error("Profile load error:",t)}},clearError:()=>{n({error:null})},setLoading:t=>{n({isLoading:t})}}),{name:"auth-storage",partialize:n=>({user:n.user,token:n.token,isAuthenticated:n.isAuthenticated})})),aA=()=>{const{loadUserProfile:n}=Gt.getState(),e=Kt.onAuthStateChanged(async t=>{if(t){const s=await Kt.getIdToken();if(s){Gt.setState({user:t,token:s,isAuthenticated:!0});const{useCourseStore:r}=await is(async()=>{const{useCourseStore:i}=await Promise.resolve().then(()=>kl);return{useCourseStore:i}},void 0);r.getState().loadUserEnrollments(t.uid)}}else{Gt.setState({user:null,token:null,isAuthenticated:!1});const{useCourseStore:s}=await is(async()=>{const{useCourseStore:r}=await Promise.resolve().then(()=>kl);return{useCourseStore:r}},void 0);s.getState().clearEnrollments()}});return n(),e},Dr=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},lA=()=>{const{isDarkMode:n,toggleDarkMode:e}=De(),{currentLanguage:t,setLanguage:s,getTranslation:r,getCurrentLanguage:i,getAvailableLanguages:o}=ut(),{user:l,isAuthenticated:c,logout:u}=Gt(),m=ql(),p=He(),[g,x]=V.useState(!1),[b,T]=V.useState(!1),C=V.useRef(null),k=V.useRef(null),R=F=>m.pathname===F;V.useEffect(()=>{const F=I=>{C.current&&!C.current.contains(I.target)&&x(!1),k.current&&!k.current.contains(I.target)&&T(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[]);const P=async()=>{try{await u(),T(!1),p("/")}catch(F){console.error("Logout error:",F)}},L=()=>{T(!1),(l==null?void 0:l.userType)==="instructor"?p("/instructor/dashboard"):p("/dashboard")},U=[{path:"/community",label:"Community Form",icon:Je},{path:"/resume-builder",label:"Resume Builder",icon:ls},{path:"/career-path",label:"Career Path",icon:Ht},{path:"/project-suggestion",label:"Project Suggestion",icon:cs}];return a.jsxs("header",{className:`px-6 py-4 rounded-2xl transition-all duration-300 ${n?"bg-gray-800 border border-gray-700/50 shadow-2xl shadow-gray-900/50 drop-shadow-lg":"bg-white border border-gray-200/50 shadow-2xl shadow-gray-300/50 drop-shadow-lg"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-8",children:[a.jsxs(tt,{to:"/",onClick:Dr,className:"flex items-center space-x-3 group",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-700 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300",children:a.jsx(tn,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:`text-xl font-bold transition-colors duration-300 group-hover:opacity-80 ${n?"text-white":"text-gray-900"}`,children:"VP Learning"})]}),a.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[a.jsxs(tt,{to:"/courses",onClick:Dr,className:`relative font-medium transition-all duration-300 group ${R("/courses")?n?"text-blue-400":"text-blue-600":n?"text-gray-300":"text-gray-700"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-300 group-hover:bg-gray-100/50 dark:group-hover:bg-gray-700/50",children:[a.jsx(Oe,{size:16,className:"group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{children:r("courses")})]}),R("/courses")&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"})]}),a.jsxs(tt,{to:"/mock-interview",onClick:Dr,className:`relative font-medium transition-all duration-300 group ${R("/mock-interview")?n?"text-blue-400":"text-blue-600":n?"text-gray-300":"text-gray-700"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-300 group-hover:bg-gray-100/50 dark:group-hover:bg-gray-700/50",children:[a.jsx(rs,{size:16,className:"group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{children:r("mockInterview")})]}),R("/mock-interview")&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"})]}),a.jsxs(tt,{to:"/soft-skills",onClick:Dr,className:`relative font-medium transition-all duration-300 group ${R("/soft-skills")?n?"text-blue-400":"text-blue-600":n?"text-gray-300":"text-gray-700"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-300 group-hover:bg-gray-100/50 dark:group-hover:bg-gray-700/50",children:[a.jsx(tn,{size:16,className:"group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{children:r("softSkills")})]}),R("/soft-skills")&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"hidden md:flex items-center",children:a.jsxs("div",{className:`relative flex items-center ${n?"bg-gray-700/80":"bg-gray-100/80"} backdrop-blur-sm rounded-xl px-4 py-2.5 min-w-[220px] border transition-all duration-300 hover:shadow-lg focus-within:shadow-lg focus-within:ring-2 focus-within:ring-blue-500/20 ${n?"border-gray-600/50":"border-gray-200/50"}`,children:[a.jsx(Bl,{size:16,className:`${n?"text-gray-400":"text-gray-500"} flex-shrink-0`}),a.jsx("input",{type:"text",placeholder:r("searchPlaceholder"),className:`ml-3 bg-transparent outline-none text-sm flex-1 ${n?"text-white placeholder-gray-400":"text-gray-900 placeholder-gray-500"}`})]})}),a.jsxs("div",{className:"relative",ref:C,children:[a.jsxs("button",{onClick:()=>x(!g),className:`flex items-center space-x-2 p-2.5 rounded-xl transition-all duration-300 hover:scale-110 ${n?"hover:bg-gray-700/50 text-gray-300":"hover:bg-gray-100/50 text-gray-700"}`,"aria-label":"Select language",children:[a.jsx(zy,{size:18}),a.jsx("span",{className:"text-sm font-medium",children:i().flag}),a.jsx(Ki,{size:14,className:`transition-transform duration-200 ${g?"rotate-180":""}`})]}),g&&a.jsx("div",{className:`absolute right-0 top-full mt-2 w-48 rounded-xl shadow-2xl border backdrop-blur-md transition-all duration-300 ${n?"bg-gray-800/95 border-gray-700/50":"bg-white/95 border-gray-200/50"}`,children:a.jsx("div",{className:"py-2",children:o().map(F=>a.jsxs("button",{onClick:()=>{s(F.code),x(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 text-left transition-all duration-200 hover:scale-105 ${t===F.code?n?"bg-blue-600/20 text-blue-400":"bg-blue-100/50 text-blue-600":n?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-100/50"}`,children:[a.jsx("span",{className:"text-lg",children:F.flag}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-sm",children:F.nativeName}),a.jsx("span",{className:`text-xs ${n?"text-gray-400":"text-gray-500"}`,children:F.name})]})]},F.code))})})]}),a.jsx("button",{onClick:e,className:`p-2.5 rounded-xl transition-all duration-300 hover:scale-110 ${n?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-600 hover:text-gray-900 hover:bg-gray-100/50"}`,children:n?a.jsx(Wy,{size:20}):a.jsx(Jy,{size:20})}),c&&l?a.jsxs("div",{className:"relative",ref:k,children:[a.jsx("button",{onClick:()=>T(!b),className:"p-3 rounded-xl transition-all duration-300 hover:scale-110 bg-gray-800 text-white hover:bg-gray-700 shadow-lg","aria-label":"User menu",children:a.jsx(Zu,{size:20})}),b&&a.jsxs("div",{className:`absolute right-0 top-full mt-2 w-56 rounded-xl shadow-2xl border backdrop-blur-md transition-all duration-300 z-50 ${n?"bg-gray-800/95 border-gray-700/50":"bg-white/95 border-gray-200/50"}`,children:[a.jsxs("div",{className:`px-4 py-3 border-b ${n?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("div",{className:`font-semibold text-sm ${n?"text-white":"text-gray-900"}`,children:[l.firstName," ",l.lastName]}),a.jsx("div",{className:`text-xs mt-1 ${n?"text-gray-400":"text-gray-600"}`,children:l.email}),a.jsx("div",{className:`text-xs mt-1 px-2 py-1 rounded-full inline-block ${l.userType==="student"?n?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-700":n?"bg-green-900/30 text-green-400":"bg-green-100 text-green-700"}`,children:l.userType==="student"?"Student":"Instructor"})]}),a.jsxs("div",{className:"py-2",children:[a.jsxs("button",{onClick:L,className:`w-full flex items-center space-x-3 px-4 py-3 text-left transition-all duration-200 hover:scale-105 ${n?"text-gray-300 hover:bg-gray-700/50":"text-gray-700 hover:bg-gray-100/50"}`,children:[a.jsx(Ky,{size:18}),a.jsx("span",{className:"font-medium text-sm",children:"Profile"})]}),a.jsxs("button",{onClick:P,className:`w-full flex items-center space-x-3 px-4 py-3 text-left transition-all duration-200 hover:scale-105 ${n?"text-red-400 hover:bg-red-900/20":"text-red-600 hover:bg-red-50"}`,children:[a.jsx(Yy,{size:18}),a.jsx("span",{className:"font-medium text-sm",children:"Logout"})]})]})]})]}):a.jsx(tt,{to:"/login",onClick:Dr,className:"p-3 rounded-xl transition-all duration-300 hover:scale-110 bg-gray-800 text-white hover:bg-gray-700 shadow-lg",children:a.jsx(Zu,{size:20})})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/20 dark:border-gray-700/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-2",children:U.map(F=>{const I=F.icon;return a.jsxs(tt,{to:F.path,className:`flex items-center space-x-1.5 px-2 py-1 rounded-md transition-all duration-300 group ${R(F.path)?n?"bg-blue-600/20 text-blue-400":"bg-blue-100/50 text-blue-600":n?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-100/50"}`,children:[a.jsx(I,{size:12,className:"group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{className:"text-xs font-medium",children:F.label})]},F.path)})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(tt,{to:"/ask-anything",className:`flex items-center space-x-1.5 px-2 py-1 rounded-md transition-all duration-300 group ${R("/ask-anything")?n?"bg-purple-600/20 text-purple-400":"bg-purple-100/50 text-purple-600":n?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-100/50"}`,children:[a.jsx(Qy,{size:12,className:"group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{className:"text-xs font-medium",children:"Ask Anything"})]}),a.jsxs(tt,{to:"/code-editor",className:`flex items-center space-x-1.5 px-2 py-1 rounded-md transition-all duration-300 group ${R("/code-editor")?n?"bg-green-600/20 text-green-400":"bg-green-100/50 text-green-600":n?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-700 hover:text-gray-900 hover:bg-gray-100/50"}`,children:[a.jsx(Gl,{size:12,className:"group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{className:"text-xs font-medium",children:"Code Editor"})]})]})]})})]})};class cA{async createCourse(e){try{if(!pe)throw new Error("Firestore is not configured. Please check your Firebase configuration.");return(await Rl(Mt(pe,"courses"),{...e,lessons:e.lessons||[],createdAt:_e.now(),updatedAt:_e.now()})).id}catch(t){throw console.error("Error creating course:",t),new Error(`Failed to create course: ${t.message}`)}}async updateCourse(e,t){try{if(!pe)throw new Error("Firestore is not configured.");const s=xt(pe,"courses",e),r={...t,updatedAt:_e.now()};t.lessons!==void 0&&(r.lessons=t.lessons),await Nl(s,r)}catch(s){throw console.error("Error updating course:",s),new Error(`Failed to update course: ${s.message}`)}}async deleteCourse(e){try{if(!pe)throw new Error("Firestore is not configured.");await OI(xt(pe,"courses",e))}catch(t){throw console.error("Error deleting course:",t),new Error(`Failed to delete course: ${t.message}`)}}async getInstructorCourses(e){var t;try{if(!pe)throw new Error("Firestore is not configured.");try{const s=Qn(Mt(pe,"courses"),Jt("instructorId","==",e),Vh("createdAt","desc"));return(await Xn(s)).docs.map(i=>{var o,l;return{id:i.id,...i.data(),createdAt:(o=i.data().createdAt)==null?void 0:o.toDate(),updatedAt:(l=i.data().updatedAt)==null?void 0:l.toDate()}})}catch(s){if(s.code==="failed-precondition"||(t=s.message)!=null&&t.includes("index")){console.warn("Firestore index missing, fetching without orderBy. Create an index for: courses/instructorId/createdAt");const r=Qn(Mt(pe,"courses"),Jt("instructorId","==",e));return(await Xn(r)).docs.map(l=>{var c,u;return{id:l.id,...l.data(),createdAt:(c=l.data().createdAt)==null?void 0:c.toDate(),updatedAt:(u=l.data().updatedAt)==null?void 0:u.toDate()}}).sort((l,c)=>{var p,g;const u=((p=l.createdAt)==null?void 0:p.getTime())||0;return(((g=c.createdAt)==null?void 0:g.getTime())||0)-u})}throw s}}catch(s){throw console.error("Error fetching instructor courses:",s),new Error(`Failed to fetch courses: ${s.message}`)}}async getCourseById(e){var t,s;try{if(!pe)throw new Error("Firestore is not configured.");const r=xt(pe,"courses",e),i=await Yt(r);return i.exists()?{id:i.id,...i.data(),createdAt:(t=i.data().createdAt)==null?void 0:t.toDate(),updatedAt:(s=i.data().updatedAt)==null?void 0:s.toDate()}:null}catch(r){throw console.error("Error fetching course:",r),new Error(`Failed to fetch course: ${r.message}`)}}async enrollUserInCourse(e,t){try{if(!pe)throw new Error("Firestore is not configured.");const s=Qn(Mt(pe,"enrollments"),Jt("userId","==",e),Jt("courseId","==",t));if(!(await Xn(s)).empty)return;await Rl(Mt(pe,"enrollments"),{userId:e,courseId:t,enrolledAt:_e.now(),progress:0,completedLessons:[]})}catch(s){throw console.error("Error enrolling user in course:",s),new Error(`Failed to enroll in course: ${s.message}`)}}async isUserEnrolled(e,t){try{if(!pe)throw new Error("Firestore is not configured.");const s=Qn(Mt(pe,"enrollments"),Jt("userId","==",e),Jt("courseId","==",t));return!(await Xn(s)).empty}catch(s){return console.error("Error checking enrollment:",s),!1}}async getUserEnrollments(e){try{if(!pe)throw new Error("Firestore is not configured.");const t=Qn(Mt(pe,"enrollments"),Jt("userId","==",e));return(await Xn(t)).docs.map(r=>r.data().courseId)}catch(t){return console.error("Error fetching user enrollments:",t),[]}}async getPublishedCourses(){var e;try{if(!pe)throw new Error("Firestore is not configured.");try{const t=Qn(Mt(pe,"courses"),Jt("isPublished","==",!0),Vh("createdAt","desc"));return(await Xn(t)).docs.map(r=>{var i,o;return{id:r.id,...r.data(),createdAt:(i=r.data().createdAt)==null?void 0:i.toDate(),updatedAt:(o=r.data().updatedAt)==null?void 0:o.toDate()}})}catch(t){if(t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("index")){console.warn("Firestore index missing, fetching without orderBy. Create an index for: courses/isPublished/createdAt");const s=Qn(Mt(pe,"courses"),Jt("isPublished","==",!0));return(await Xn(s)).docs.map(o=>{var l,c;return{id:o.id,...o.data(),createdAt:(l=o.data().createdAt)==null?void 0:l.toDate(),updatedAt:(c=o.data().updatedAt)==null?void 0:c.toDate()}}).sort((o,l)=>{var m,p;const c=((m=o.createdAt)==null?void 0:m.getTime())||0;return(((p=l.createdAt)==null?void 0:p.getTime())||0)-c})}throw t}}catch(t){throw console.error("Error fetching published courses:",t),new Error(`Failed to fetch courses: ${t.message}`)}}}const St=new cA,Ii=ui()(di((n,e)=>({courses:[{id:"1",title:"Complete Web Development Bootcamp",description:"Learn HTML, CSS, JavaScript, React, Node.js and build real-world projects",instructor:"John Doe",duration:"40 hours",level:"Beginner",category:"Web Development",thumbnail:"/api/placeholder/300/200",price:99,rating:4.8,studentsCount:1250,lessons:[{id:"1-1",title:"Introduction to HTML",duration:"2 hours",isCompleted:!1,order:1},{id:"1-2",title:"CSS Fundamentals",duration:"3 hours",isCompleted:!1,order:2},{id:"1-3",title:"JavaScript Basics",duration:"4 hours",isCompleted:!1,order:3}]},{id:"2",title:"Data Science with Python",description:"Master data analysis, machine learning, and visualization with Python",instructor:"Jane Smith",duration:"50 hours",level:"Intermediate",category:"Data Science",thumbnail:"/api/placeholder/300/200",price:149,rating:4.9,studentsCount:890,lessons:[{id:"2-1",title:"Python Basics",duration:"3 hours",isCompleted:!1,order:1},{id:"2-2",title:"NumPy and Pandas",duration:"4 hours",isCompleted:!1,order:2},{id:"2-3",title:"Data Visualization",duration:"3 hours",isCompleted:!1,order:3}]},{id:"3",title:"Mobile App Development with React Native",description:"Build cross-platform mobile apps using React Native",instructor:"Mike Johnson",duration:"35 hours",level:"Intermediate",category:"Mobile Development",thumbnail:"/api/placeholder/300/200",price:129,rating:4.7,studentsCount:650,lessons:[{id:"3-1",title:"React Native Setup",duration:"2 hours",isCompleted:!1,order:1},{id:"3-2",title:"Navigation",duration:"3 hours",isCompleted:!1,order:2},{id:"3-3",title:"State Management",duration:"4 hours",isCompleted:!1,order:3}]},{id:"4",title:"UI/UX Design Fundamentals",description:"Learn the principles of user interface and user experience design",instructor:"Sarah Wilson",duration:"25 hours",level:"Beginner",category:"Design",thumbnail:"/api/placeholder/300/200",price:89,rating:4.6,studentsCount:420,lessons:[{id:"4-1",title:"Design Principles",duration:"3 hours",isCompleted:!1,order:1},{id:"4-2",title:"Color Theory",duration:"2 hours",isCompleted:!1,order:2},{id:"4-3",title:"Typography",duration:"2 hours",isCompleted:!1,order:3}]},{id:"5",title:"Digital Marketing Mastery",description:"Complete guide to digital marketing strategies and tools",instructor:"David Chen",duration:"30 hours",level:"Intermediate",category:"Marketing",thumbnail:"/api/placeholder/300/200",price:149,rating:4.8,studentsCount:780,lessons:[{id:"5-1",title:"SEO Fundamentals",duration:"4 hours",isCompleted:!1,order:1},{id:"5-2",title:"Social Media Marketing",duration:"3 hours",isCompleted:!1,order:2},{id:"5-3",title:"Content Marketing",duration:"3 hours",isCompleted:!1,order:3}]},{id:"6",title:"Financial Analysis & Investment",description:"Master financial analysis and investment strategies",instructor:"Emily Rodriguez",duration:"40 hours",level:"Advanced",category:"Finance",thumbnail:"/api/placeholder/300/200",price:199,rating:4.9,studentsCount:320,lessons:[{id:"6-1",title:"Financial Statements",duration:"5 hours",isCompleted:!1,order:1},{id:"6-2",title:"Investment Strategies",duration:"4 hours",isCompleted:!1,order:2},{id:"6-3",title:"Risk Management",duration:"4 hours",isCompleted:!1,order:3}]},{id:"7",title:"Business Strategy & Leadership",description:"Develop strategic thinking and leadership skills for business success",instructor:"Robert Kim",duration:"35 hours",level:"Advanced",category:"Business",thumbnail:"/api/placeholder/300/200",price:179,rating:4.7,studentsCount:450,lessons:[{id:"7-1",title:"Strategic Planning",duration:"4 hours",isCompleted:!1,order:1},{id:"7-2",title:"Team Leadership",duration:"3 hours",isCompleted:!1,order:2},{id:"7-3",title:"Change Management",duration:"3 hours",isCompleted:!1,order:3}]},{id:"8",title:"Advanced JavaScript & ES6+",description:"Deep dive into modern JavaScript features and best practices",instructor:"Alex Thompson",duration:"45 hours",level:"Advanced",category:"Web Development",thumbnail:"/api/placeholder/300/200",price:159,rating:4.8,studentsCount:520,lessons:[{id:"8-1",title:"ES6+ Features",duration:"5 hours",isCompleted:!1,order:1},{id:"8-2",title:"Async Programming",duration:"4 hours",isCompleted:!1,order:2},{id:"8-3",title:"Design Patterns",duration:"4 hours",isCompleted:!1,order:3}]}],userProgress:[],enrolledCourses:[],currentUserId:null,addCourse:t=>n(s=>({courses:[...s.courses,t]})),enrollInCourse:async(t,s)=>{try{await St.enrollUserInCourse(s,t),n(r=>r.enrolledCourses.includes(t)?r:{enrolledCourses:[...r.enrolledCourses,t],userProgress:[...r.userProgress,{courseId:t,completedLessons:[],progress:0,lastAccessed:new Date}],currentUserId:s})}catch(r){throw console.error("Error enrolling in course:",r),r}},checkEnrollment:async(t,s)=>{try{return await St.isUserEnrolled(s,t)}catch(r){return console.error("Error checking enrollment:",r),!1}},loadUserEnrollments:async t=>{try{const s=await St.getUserEnrollments(t);n({enrolledCourses:s,currentUserId:t})}catch(s){console.error("Error loading user enrollments:",s)}},clearEnrollments:()=>n({enrolledCourses:[],userProgress:[],currentUserId:null}),updateProgress:(t,s)=>n(r=>{const i=r.userProgress.findIndex(m=>m.courseId===t);if(i===-1)return r;const o=r.userProgress[i],l=r.courses.find(m=>m.id===t);if(!l)return r;const c={...o,completedLessons:[...o.completedLessons,s],progress:(o.completedLessons.length+1)/l.lessons.length*100,lastAccessed:new Date},u=[...r.userProgress];return u[i]=c,{userProgress:u}}),getCourseProgress:t=>{const s=e().userProgress.find(r=>r.courseId===t);return s?s.progress:0}}),{name:"course-storage"})),kl=Object.freeze(Object.defineProperty({__proto__:null,useCourseStore:Ii},Symbol.toStringTag,{value:"Module"})),Xa=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},uA=()=>{const{isDarkMode:n}=De(),{courses:e}=Ii(),{getTranslation:t}=ut(),[s,r]=V.useState(0),[i,o]=V.useState(!0),l=V.useRef(null),c=e.sort((C,k)=>k.rating-C.rating).slice(0,6),u=[];for(let C=0;C<c.length;C+=3)u.push(c.slice(C,C+3));V.useEffect(()=>(i&&u.length>0&&(l.current=setInterval(()=>{r(C=>C===u.length-1?0:C+1)},4e3)),()=>{l.current&&clearInterval(l.current)}),[i,u.length]);const m=()=>o(!1),p=()=>o(!0),g=()=>{r(s===0?u.length-1:s-1)},x=()=>{r(s===u.length-1?0:s+1)},b=C=>{r(C)},T=[{icon:Oe,label:t("coursesCount"),value:"500+"},{icon:Je,label:t("studentsCount"),value:"10K+"},{icon:vt,label:t("certificatesCount"),value:"5K+"},{icon:Ht,label:t("successRate"),value:"95%"}];return a.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:[a.jsxs("section",{className:"px-6 py-16 lg:py-24",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsxs(J.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:`text-4xl lg:text-6xl xl:text-7xl leading-none tracking-tight transition-colors duration-300 ${n?"text-purple-300":"text-[#3D065F]"}`,style:{fontFamily:"Arial Black, Helvetica Neue, Arial, sans-serif",fontWeight:900},children:[t("learn"),a.jsx("br",{}),t("grow"),a.jsx("br",{}),t("succeed")]}),a.jsx(J.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`text-lg lg:text-xl mt-6 max-w-2xl mx-auto transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:t("heroDescription")})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row gap-3 justify-center items-center mb-12 max-w-2xl mx-auto",children:[a.jsxs(tt,{to:"/courses",onClick:Xa,className:`px-6 py-3 rounded-full font-medium text-base transition-colors duration-300 flex items-center space-x-2 w-full sm:w-auto justify-center ${n?"bg-white text-black hover:bg-gray-200":"bg-black text-white hover:bg-gray-800"}`,children:[a.jsx(Ut,{size:18}),a.jsx("span",{children:t("startLearning")})]}),a.jsxs(tt,{to:"/mock-interview",onClick:Xa,className:`px-6 py-3 rounded-full font-medium text-base transition-colors duration-300 flex items-center space-x-2 border-2 w-full sm:w-auto justify-center ${n?"border-white text-white hover:bg-white hover:text-black":"border-black text-black hover:bg-black hover:text-white"}`,children:[a.jsx("span",{children:t("tryMockInterview")}),a.jsx(Hl,{size:18})]})]}),a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"grid grid-cols-2 lg:grid-cols-4 gap-8 max-w-4xl mx-auto mb-16",children:T.map((C,k)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-gray-800":"bg-white"}`,children:a.jsx(C.icon,{size:32,className:n?"text-blue-400":"text-blue-600"})}),a.jsx("div",{className:`text-3xl font-bold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:C.value}),a.jsx("div",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-600"}`,children:C.label})]},k))})]}),a.jsx("section",{className:"px-6 py-16",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"text-center mb-12",children:[a.jsx("h2",{className:`text-4xl lg:text-5xl font-bold mb-4 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:t("featuredCourses")}),a.jsx("p",{className:`text-lg transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:t("featuredCoursesDescription")})]}),a.jsxs("div",{className:"relative overflow-hidden rounded-2xl",onMouseEnter:m,onMouseLeave:p,children:[a.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${s*100}%)`},children:u.map((C,k)=>a.jsx("div",{className:"w-full flex-shrink-0 px-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:C.map((R,P)=>a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8+P*.1},className:`rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-105 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("div",{className:"h-48 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:a.jsx(Oe,{size:64,className:"text-white opacity-50"})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`text-sm font-medium px-3 py-1 rounded-full ${R.level==="Beginner"?"bg-green-100 text-green-800":R.level==="Intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:R.level}),a.jsx("span",{className:`text-sm font-medium px-3 py-1 rounded-full ${n?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:R.category})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Cn,{size:16,className:"text-yellow-400 fill-current"}),a.jsx("span",{className:"text-sm font-medium",children:R.rating})]})]}),a.jsx("h3",{className:`text-xl font-bold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:R.title}),a.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:R.description}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Tt,{size:16,className:n?"text-gray-400":"text-gray-500"}),a.jsx("span",{className:n?"text-gray-400":"text-gray-500",children:R.duration})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Je,{size:16,className:n?"text-gray-400":"text-gray-500"}),a.jsx("span",{className:n?"text-gray-400":"text-gray-500",children:R.studentsCount})]})]}),a.jsxs("div",{className:`text-lg font-bold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:["$",R.price]})]}),a.jsx(tt,{to:`/course/${R.id}`,onClick:Xa,className:"w-full py-2 rounded-lg font-medium text-center transition-colors duration-300 bg-blue-600 text-white hover:bg-blue-700",children:t("viewCourse")})]})]},R.id))})},k))}),a.jsx("button",{onClick:g,className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ${n?"bg-gray-800 text-white hover:bg-gray-700 shadow-lg":"bg-white text-gray-900 hover:bg-gray-50 shadow-lg"}`,children:a.jsx(Xy,{size:24})}),a.jsx("button",{onClick:x,className:`absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ${n?"bg-gray-800 text-white hover:bg-gray-700 shadow-lg":"bg-white text-gray-900 hover:bg-gray-50 shadow-lg"}`,children:a.jsx(Zy,{size:24})})]}),a.jsx("div",{className:"flex justify-center space-x-2 mt-8",children:u.map((C,k)=>a.jsx("button",{onClick:()=>b(k),className:`w-3 h-3 rounded-full transition-all duration-300 ${k===s?n?"bg-blue-500":"bg-blue-600":n?"bg-gray-600":"bg-gray-300"}`},k))})]})})]})},dA=()=>{const[n,e]=V.useState("student"),[t,s]=V.useState(!1),{isDarkMode:r}=De(),{login:i,loginWithGoogle:o,loginWithGitHub:l,isLoading:c}=Gt(),u=He(),[m,p]=V.useState({email:"",password:"",rememberMe:!1}),g=R=>{const{name:P,value:L,type:U,checked:F}=R.target;p(I=>({...I,[P]:U==="checkbox"?F:L}))},x=async R=>{R.preventDefault();try{await i({email:m.email,password:m.password,userType:n}),u("/dashboard")}catch(P){console.error("Login failed:",P)}},b=async()=>{try{await o(n),u("/dashboard")}catch(R){console.error("Google login failed:",R)}},T=async()=>{try{await l(n),u("/dashboard")}catch(R){console.error("GitHub login failed:",R)}},C=[{icon:Oe,text:"Access to 1000+ courses"},{icon:vt,text:"Earn certificates"},{icon:Je,text:"Join study groups"}],k=[{icon:tn,text:"Create custom courses"},{icon:Je,text:"Manage student progress"},{icon:vt,text:"Track teaching analytics"}];return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${r?"bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900":"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"}`,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",children:a.jsxs("div",{className:"max-w-6xl w-full grid lg:grid-cols-2 gap-8 items-center",children:[a.jsx(J.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},className:"hidden lg:block",children:a.jsxs("div",{className:`p-8 rounded-3xl ${r?"bg-gray-800/50 backdrop-blur-sm border border-gray-700":"bg-white/70 backdrop-blur-sm border border-white/20"} shadow-2xl`,children:[a.jsxs(J.div,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5,delay:.2},className:"text-center mb-8",children:[a.jsx("div",{className:`w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center ${n==="student"?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-green-500 to-teal-600"}`,children:n==="student"?a.jsx(tn,{className:"w-10 h-10 text-white"}):a.jsx(Je,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:`text-2xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:n==="student"?"Student Portal":"Instructor Portal"}),a.jsx("p",{className:`text-sm ${r?"text-gray-300":"text-gray-600"}`,children:n==="student"?"Learn, grow, and achieve your goals":"Teach, inspire, and make a difference"})]}),a.jsx(Um,{mode:"wait",children:a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(n==="student"?C:k).map((R,P)=>a.jsxs(J.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:P*.1},className:"flex items-center mb-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mr-4 ${r?"bg-gray-700":"bg-gray-100"}`,children:a.jsx(R.icon,{className:`w-5 h-5 ${r?"text-blue-400":"text-blue-600"}`})}),a.jsx("span",{className:`font-medium ${r?"text-gray-300":"text-gray-700"}`,children:R.text})]},P))},n)})]})}),a.jsxs(J.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:`p-8 rounded-3xl shadow-2xl ${r?"bg-gray-800/90 backdrop-blur-sm border border-gray-700":"bg-white/90 backdrop-blur-sm border border-white/20"}`,children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:`relative p-1 rounded-2xl ${r?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx(J.div,{className:`absolute top-1 bottom-1 w-1/2 rounded-xl ${n==="student"?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-green-500 to-teal-600"}`,animate:{x:n==="student"?0:"100%"},transition:{type:"spring",stiffness:300,damping:30}}),a.jsxs("div",{className:"relative flex",children:[a.jsxs("button",{onClick:()=>e("student"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-colors duration-200 flex items-center justify-center ${n==="student"?"text-white":r?"text-gray-400":"text-gray-600"}`,children:[a.jsx(tn,{className:"w-5 h-5 mr-2"}),"Student"]}),a.jsxs("button",{onClick:()=>e("instructor"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-colors duration-200 flex items-center justify-center ${n==="instructor"?"text-white":r?"text-gray-400":"text-gray-600"}`,children:[a.jsx(Je,{className:"w-5 h-5 mr-2"}),"Instructor"]})]})]})}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:"Email Address"}),a.jsx("input",{type:"email",id:"email",name:"email",value:m.email,onChange:g,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${r?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Enter your email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:t?"text":"password",id:"password",name:"password",value:m.password,onChange:g,required:!0,className:`w-full px-4 py-3 pr-12 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${r?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>s(!t),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${r?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,children:t?a.jsx(uo,{className:"w-5 h-5"}):a.jsx(zs,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:"rememberMe",checked:m.rememberMe,onChange:g,className:`w-4 h-4 rounded border-2 transition-colors duration-200 ${r?"bg-gray-700 border-gray-600 text-blue-600 focus:ring-blue-500":"bg-white border-gray-300 text-blue-600 focus:ring-blue-500"}`}),a.jsx("span",{className:`ml-2 text-sm ${r?"text-gray-300":"text-gray-600"}`,children:"Remember me"})]}),a.jsx("button",{type:"button",className:`text-sm font-medium transition-colors duration-200 ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Forgot password?"})]}),a.jsx(J.button,{type:"submit",disabled:c,className:`w-full py-3 px-6 rounded-xl font-medium transition-all duration-200 flex items-center justify-center ${n==="student"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700"} text-white shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed`,whileHover:{scale:1.02},whileTap:{scale:.98},children:c?a.jsx(J.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):a.jsxs(a.Fragment,{children:["Sign In as ",n==="student"?"Student":"Instructor",a.jsx(Hl,{className:"w-5 h-5 ml-2"})]})})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:`absolute inset-0 flex items-center ${r?"border-gray-700":"border-gray-300"}`,children:a.jsx("div",{className:`w-full border-t ${r?"border-gray-700":"border-gray-300"}`})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:`px-2 ${r?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Or continue with"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(J.button,{type:"button",onClick:b,disabled:c,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-3 ${r?"bg-white text-gray-900 hover:bg-gray-100":"bg-gray-50 text-gray-900 hover:bg-gray-100 border border-gray-300"} shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{children:"Continue with Google"})]}),a.jsxs(J.button,{type:"button",onClick:T,disabled:c,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-3 ${r?"bg-gray-800 text-white hover:bg-gray-700 border border-gray-700":"bg-gray-900 text-white hover:bg-gray-800"} shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsx(zl,{size:20}),a.jsx("span",{children:"Continue with GitHub"})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:["Don't have an account?"," ",a.jsx("button",{onClick:()=>u("/signup"),className:`font-medium transition-colors duration-200 ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Sign up here"})]})})]})]})})})},hA=()=>{const[n,e]=V.useState("student"),[t,s]=V.useState(!1),[r,i]=V.useState(!1),{isDarkMode:o}=De(),{register:l,loginWithGoogle:c,loginWithGitHub:u,isLoading:m}=Gt(),p=He(),[g,x]=V.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1,userType:"student"}),b=U=>{const{name:F,value:I,type:_,checked:w}=U.target;x(S=>({...S,[F]:_==="checkbox"?w:I}))},T=()=>g.firstName.trim()?g.lastName.trim()?g.email.trim()?g.password.length<6?(le.error("Password must be at least 6 characters"),!1):g.password!==g.confirmPassword?(le.error("Passwords do not match"),!1):g.agreeToTerms?!0:(le.error("Please agree to the terms and conditions"),!1):(le.error("Email is required"),!1):(le.error("Last name is required"),!1):(le.error("First name is required"),!1),C=async U=>{if(U.preventDefault(),!!T())try{await l({firstName:g.firstName,lastName:g.lastName,email:g.email,password:g.password,userType:n}),p("/dashboard")}catch(F){console.error("Registration failed:",F)}},k=async()=>{try{await c(n),p("/dashboard")}catch(U){console.error("Google signup failed:",U)}},R=async()=>{try{await u(n),p("/dashboard")}catch(U){console.error("GitHub signup failed:",U)}},P=[{icon:Oe,text:"Access to 1000+ courses"},{icon:vt,text:"Earn certificates"},{icon:Je,text:"Join study groups"},{icon:It,text:"Track learning progress"}],L=[{icon:tn,text:"Create custom courses"},{icon:Je,text:"Manage student progress"},{icon:vt,text:"Track teaching analytics"},{icon:It,text:"Build your teaching portfolio"}];return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${o?"bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900":"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"}`,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",children:a.jsxs("div",{className:"max-w-6xl w-full grid lg:grid-cols-2 gap-8 items-center",children:[a.jsx(J.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},className:"hidden lg:block",children:a.jsxs("div",{className:`p-8 rounded-3xl ${o?"bg-gray-800/50 backdrop-blur-sm border border-gray-700":"bg-white/70 backdrop-blur-sm border border-white/20"} shadow-2xl`,children:[a.jsxs(J.div,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5,delay:.2},className:"text-center mb-8",children:[a.jsx("div",{className:`w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center ${n==="student"?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-green-500 to-teal-600"}`,children:n==="student"?a.jsx(tn,{className:"w-10 h-10 text-white"}):a.jsx(Je,{className:"w-10 h-10 text-white"})}),a.jsxs("h2",{className:`text-2xl font-bold mb-2 ${o?"text-white":"text-gray-900"}`,children:["Join as ",n==="student"?"Student":"Instructor"]}),a.jsx("p",{className:`text-sm ${o?"text-gray-300":"text-gray-600"}`,children:n==="student"?"Start your learning journey today":"Share your knowledge with the world"})]}),a.jsx(Um,{mode:"wait",children:a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(n==="student"?P:L).map((U,F)=>a.jsxs(J.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:F*.1},className:"flex items-center mb-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mr-4 ${o?"bg-gray-700":"bg-gray-100"}`,children:a.jsx(U.icon,{className:`w-5 h-5 ${o?"text-blue-400":"text-blue-600"}`})}),a.jsx("span",{className:`font-medium ${o?"text-gray-300":"text-gray-700"}`,children:U.text})]},F))},n)})]})}),a.jsxs(J.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:`p-8 rounded-3xl shadow-2xl ${o?"bg-gray-800/90 backdrop-blur-sm border border-gray-700":"bg-white/90 backdrop-blur-sm border border-white/20"}`,children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:`relative p-1 rounded-2xl ${o?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx(J.div,{className:`absolute top-1 bottom-1 w-1/2 rounded-xl ${n==="student"?"bg-gradient-to-r from-blue-500 to-purple-600":"bg-gradient-to-r from-green-500 to-teal-600"}`,animate:{x:n==="student"?0:"100%"},transition:{type:"spring",stiffness:300,damping:30}}),a.jsxs("div",{className:"relative flex",children:[a.jsxs("button",{type:"button",onClick:()=>e("student"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-colors duration-200 flex items-center justify-center ${n==="student"?"text-white":o?"text-gray-400":"text-gray-600"}`,children:[a.jsx(tn,{className:"w-5 h-5 mr-2"}),"Student"]}),a.jsxs("button",{type:"button",onClick:()=>e("instructor"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-colors duration-200 flex items-center justify-center ${n==="instructor"?"text-white":o?"text-gray-400":"text-gray-600"}`,children:[a.jsx(Je,{className:"w-5 h-5 mr-2"}),"Instructor"]})]})]})}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"firstName",className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"First Name"}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",value:g.firstName,onChange:b,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${o?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Enter first name"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lastName",className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Last Name"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",value:g.lastName,onChange:b,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${o?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Enter last name"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Email Address"}),a.jsx("input",{type:"email",id:"email",name:"email",value:g.email,onChange:b,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${o?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Enter your email"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:t?"text":"password",id:"password",name:"password",value:g.password,onChange:b,required:!0,className:`w-full px-4 py-3 pr-12 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${o?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Create password"}),a.jsx("button",{type:"button",onClick:()=>s(!t),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,children:t?a.jsx(uo,{className:"w-5 h-5"}):a.jsx(zs,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-2 ${o?"text-gray-300":"text-gray-700"}`,children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:r?"text":"password",id:"confirmPassword",name:"confirmPassword",value:g.confirmPassword,onChange:b,required:!0,className:`w-full px-4 py-3 pr-12 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${o?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Confirm password"}),a.jsx("button",{type:"button",onClick:()=>i(!r),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${o?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,children:r?a.jsx(uo,{className:"w-5 h-5"}):a.jsx(zs,{className:"w-5 h-5"})})]})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",id:"agreeToTerms",name:"agreeToTerms",checked:g.agreeToTerms,onChange:b,className:`w-4 h-4 mt-1 rounded border-2 transition-colors duration-200 ${o?"bg-gray-700 border-gray-600 text-blue-600 focus:ring-blue-500":"bg-white border-gray-300 text-blue-600 focus:ring-blue-500"}`}),a.jsxs("label",{htmlFor:"agreeToTerms",className:`ml-3 text-sm ${o?"text-gray-300":"text-gray-600"}`,children:["I agree to the"," ",a.jsx("button",{type:"button",className:`font-medium transition-colors duration-200 ${o?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Terms and Conditions"})," ","and"," ",a.jsx("button",{type:"button",className:`font-medium transition-colors duration-200 ${o?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Privacy Policy"})]})]}),a.jsx(J.button,{type:"submit",disabled:m,className:`w-full py-3 px-6 rounded-xl font-medium transition-all duration-200 flex items-center justify-center ${n==="student"?"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700":"bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700"} text-white shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed`,whileHover:{scale:1.02},whileTap:{scale:.98},children:m?a.jsx(J.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):a.jsxs(a.Fragment,{children:["Create ",n==="student"?"Student":"Instructor"," Account",a.jsx(Hl,{className:"w-5 h-5 ml-2"})]})})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:`absolute inset-0 flex items-center ${o?"border-gray-700":"border-gray-300"}`,children:a.jsx("div",{className:`w-full border-t ${o?"border-gray-700":"border-gray-300"}`})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:`px-2 ${o?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Or continue with"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(J.button,{type:"button",onClick:k,disabled:m,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-3 ${o?"bg-white text-gray-900 hover:bg-gray-100":"bg-gray-50 text-gray-900 hover:bg-gray-100 border border-gray-300"} shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{children:"Continue with Google"})]}),a.jsxs(J.button,{type:"button",onClick:R,disabled:m,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-3 ${o?"bg-gray-800 text-white hover:bg-gray-700 border border-gray-700":"bg-gray-900 text-white hover:bg-gray-800"} shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsx(zl,{size:20}),a.jsx("span",{children:"Continue with GitHub"})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:`text-sm ${o?"text-gray-400":"text-gray-600"}`,children:["Already have an account?"," ",a.jsx("button",{onClick:()=>p("/login"),className:`font-medium transition-colors duration-200 ${o?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Sign in here"})]})})]})]})})})},fA=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},mA=()=>{const{isDarkMode:n}=De(),{courses:e}=Ii(),{getTranslation:t}=ut(),[s,r]=V.useState([]),[i,o]=V.useState(!0),[l,c]=V.useState(""),[u,m]=V.useState("All"),[p,g]=V.useState("All"),[x,b]=V.useState("popular"),[T,C]=V.useState("grid"),[k,R]=V.useState(!1),[P,L]=V.useState([0,1e4]),[U,F]=V.useState(0);V.useState("all"),V.useEffect(()=>{(async()=>{try{o(!0);const G=(await St.getPublishedCourses()).map(ne=>({id:ne.id||"",title:ne.title,description:ne.description,instructor:ne.instructorName||"Unknown Instructor",duration:`${ne.durationHours}h`,level:ne.difficultyLevel,category:ne.category,thumbnail:ne.thumbnailUrl||"",price:ne.price,rating:4.5,studentsCount:0,lessons:ne.lessons||[]}));r(G)}catch(Q){console.error("Error loading courses:",Q),le.error("Failed to load courses"),r(e)}finally{o(!1)}})()},[]);const I=[t("all"),t("webDevelopment"),t("dataScience"),t("mobileDevelopment"),t("design"),t("business"),t("marketing"),t("finance")],_=[t("all"),t("beginner"),t("intermediate"),t("advanced")],w=[{value:"popular",label:t("mostPopular"),icon:Ht},{value:"rating",label:t("highestRated"),icon:Cn},{value:"price-low",label:t("priceLowToHigh"),icon:vt},{value:"price-high",label:t("priceHighToLow"),icon:vt},{value:"newest",label:t("newestFirst"),icon:jm},{value:"duration",label:t("duration"),icon:Tt}],S=V.useMemo(()=>s.filter($=>{const Q=$.title.toLowerCase().includes(l.toLowerCase())||$.description.toLowerCase().includes(l.toLowerCase())||$.instructor.toLowerCase().includes(l.toLowerCase()),G=u===t("all")||$.category===u,ne=p===t("all")||$.level===p,de=$.price>=P[0]&&$.price<=P[1],z=$.rating>=U;return Q&&G&&ne&&de&&z}),[s,l,u,p,P,U]),N=V.useMemo(()=>[...S].sort(($,Q)=>{switch(x){case"rating":return Q.rating-$.rating;case"price-low":return $.price-Q.price;case"price-high":return Q.price-$.price;case"newest":return new Date(Q.id).getTime()-new Date($.id).getTime();case"duration":return parseInt($.duration)-parseInt(Q.duration);case"popular":default:return Q.studentsCount-$.studentsCount}}),[S,x]),D=()=>{c(""),m(t("all")),g(t("all")),L([0,1e4]),F(0)},A=[l,u!==t("all"),p!==t("all"),P[0]>0||P[1]<1e4,U>0].filter(Boolean).length;return i?a.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900":"bg-[#F5F1EB]"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:n?"text-gray-300":"text-gray-600",children:"Loading courses..."})]})}):a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[a.jsx("h1",{className:`text-4xl lg:text-5xl font-bold mb-4 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:t("allCourses")}),a.jsx("p",{className:`text-lg transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:t("coursesDescription")})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`rounded-2xl p-6 mb-8 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Bl,{size:20,className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`}),a.jsx("input",{type:"text",placeholder:t("searchPlaceholder"),value:l,onChange:$=>c($.target.value),className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors duration-300 ${n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>C("grid"),className:`p-2 rounded-lg transition-colors duration-300 ${T==="grid"?"bg-blue-600 text-white":n?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-600"}`,children:a.jsx(ev,{size:20})}),a.jsx("button",{onClick:()=>C("list"),className:`p-2 rounded-lg transition-colors duration-300 ${T==="list"?"bg-blue-600 text-white":n?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-600"}`,children:a.jsx(tv,{size:20})})]}),a.jsxs("button",{onClick:()=>R(!k),className:`flex items-center space-x-2 px-4 py-3 rounded-lg border transition-colors duration-300 ${k||A>0?"bg-blue-600 border-blue-500 text-white":n?"bg-gray-700 border-gray-600 text-gray-300":"bg-white border-gray-300 text-gray-700"}`,children:[a.jsx(nv,{size:20}),a.jsx("span",{children:"Filters"}),A>0&&a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-500",children:A})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[I.slice(0,6).map($=>a.jsx("button",{onClick:()=>m($),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-300 ${u===$?"bg-blue-600 text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:$},$)),I.length>6&&a.jsxs("button",{onClick:()=>R(!0),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-300 ${n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:["+",I.length-6," more"]})]}),k&&a.jsxs(J.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:`border-t pt-4 transition-colors duration-300 ${n?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:`font-semibold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:t("advancedFilters")}),a.jsxs("div",{className:"flex items-center space-x-2",children:[A>0&&a.jsxs("button",{onClick:D,className:`flex items-center space-x-1 px-3 py-1 rounded-lg text-sm transition-colors duration-300 ${n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[a.jsx(kn,{size:16}),a.jsx("span",{children:"Clear All"})]}),a.jsx("button",{onClick:()=>R(!1),className:`p-1 rounded-lg transition-colors duration-300 ${n?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-900"}`,children:a.jsx(kn,{size:20})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ${n?"text-gray-300":"text-gray-700"}`,children:"Category"}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:u,onChange:$=>m($.target.value),className:`w-full appearance-none pl-3 pr-8 py-2 rounded-lg border transition-colors duration-300 ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:I.map($=>a.jsx("option",{value:$,children:$},$))}),a.jsx(Ki,{size:16,className:`absolute right-2 top-1/2 transform -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ${n?"text-gray-300":"text-gray-700"}`,children:"Level"}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:p,onChange:$=>g($.target.value),className:`w-full appearance-none pl-3 pr-8 py-2 rounded-lg border transition-colors duration-300 ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:_.map($=>a.jsx("option",{value:$,children:$},$))}),a.jsx(Ki,{size:16,className:`absolute right-2 top-1/2 transform -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ${n?"text-gray-300":"text-gray-700"}`,children:[t("priceRange"),": â‚¹",P[0]," - â‚¹",P[1]]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"0",max:"10000",value:P[0],onChange:$=>L([parseInt($.target.value),P[1]]),className:`w-full h-2 rounded-lg appearance-none cursor-pointer ${n?"bg-gray-700":"bg-gray-200"}`}),a.jsx("input",{type:"range",min:"0",max:"10000",value:P[1],onChange:$=>L([P[0],parseInt($.target.value)]),className:`w-full h-2 rounded-lg appearance-none cursor-pointer ${n?"bg-gray-700":"bg-gray-200"}`})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ${n?"text-gray-300":"text-gray-700"}`,children:[t("minimumRating"),": ",U>0?`${U}+`:t("any")]}),a.jsx("div",{className:"flex items-center space-x-2",children:[0,3,4,4.5].map($=>a.jsxs("button",{onClick:()=>F($),className:`flex items-center space-x-1 px-2 py-1 rounded-lg text-sm transition-colors duration-300 ${U===$?"bg-blue-600 text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[a.jsx(Cn,{size:14,className:"text-yellow-400 fill-current"}),a.jsx("span",{children:$>0?$:t("any")})]},$))})]})]})]}),a.jsx("div",{className:"flex items-center justify-between mt-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-700"}`,children:"Sort by:"}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:x,onChange:$=>b($.target.value),className:`appearance-none pl-3 pr-8 py-2 rounded-lg border transition-colors duration-300 ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:w.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))}),a.jsx(Ki,{size:16,className:`absolute right-2 top-1/2 transform -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`})]})]})})]}),a.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},className:`mb-6 transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:[N.length," course",N.length!==1?"s":""," found"]}),a.jsx("div",{className:T==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8":"space-y-6",children:N.map(($,Q)=>a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4+Q*.1},className:`rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-105 ${n?"bg-gray-800":"bg-white"} ${T==="list"?"flex":""}`,children:[a.jsx("div",{className:`bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center overflow-hidden ${T==="list"?"w-64 h-48 flex-shrink-0":"h-48"}`,children:$.thumbnail?a.jsx("img",{src:$.thumbnail,alt:$.title,className:"w-full h-full object-cover"}):a.jsx(Oe,{size:64,className:"text-white opacity-50"})}),a.jsxs("div",{className:`p-6 ${T==="list"?"flex-1":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`text-sm font-medium px-3 py-1 rounded-full ${$.level===t("beginner")?"bg-green-100 text-green-800":$.level===t("intermediate")?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:$.level}),a.jsx("span",{className:`text-sm font-medium px-3 py-1 rounded-full ${n?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:$.category})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Cn,{size:16,className:"text-yellow-400 fill-current"}),a.jsx("span",{className:"text-sm font-medium",children:$.rating})]})]}),a.jsx("h3",{className:`text-xl font-bold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:$.title}),a.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"} ${T==="list"?"line-clamp-2":""}`,children:$.description}),a.jsxs("div",{className:`flex items-center justify-between mb-4 ${T==="list"?"flex-col space-y-2":""}`,children:[a.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Tt,{size:16,className:n?"text-gray-400":"text-gray-500"}),a.jsx("span",{className:n?"text-gray-400":"text-gray-500",children:$.duration})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Je,{size:16,className:n?"text-gray-400":"text-gray-500"}),a.jsx("span",{className:n?"text-gray-400":"text-gray-500",children:$.studentsCount})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Oe,{size:16,className:n?"text-gray-400":"text-gray-500"}),a.jsxs("span",{className:n?"text-gray-400":"text-gray-500",children:[$.lessons.length," lessons"]})]})]}),a.jsxs("div",{className:`text-lg font-bold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:["â‚¹",$.price.toLocaleString("en-IN")]})]}),a.jsxs("div",{className:`flex space-x-2 ${T==="list"?"justify-end":""}`,children:[a.jsx(tt,{to:`/course/${$.id}`,onClick:fA,className:"flex-1 py-2 rounded-lg font-medium text-center transition-colors duration-300 bg-blue-600 text-white hover:bg-blue-700",children:t("viewDetails")}),a.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors duration-300 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:t("enroll")})]})]})]},$.id))}),N.length===0&&a.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},className:"text-center py-16",children:[a.jsx(Oe,{size:64,className:`mx-auto mb-4 ${n?"text-gray-600":"text-gray-400"}`}),a.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"No courses found"}),a.jsx("p",{className:`transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:"Try adjusting your search criteria"})]})]})})};function pA(n){return new Promise((e,t)=>{if(window.Razorpay){e();return}const s=document.createElement("script");s.src=n,s.async=!0,s.onload=()=>e(),s.onerror=()=>t(new Error(`Failed to load script: ${n}`)),document.body.appendChild(s)})}class gA{constructor(){this.razorpayKeyId="rzp_test_ReF3vGPFrS4uey",this.razorpayKeyId||console.warn("Razorpay Key ID not found in environment variables")}async initializeRazorpay(){try{return await pA("https://checkout.razorpay.com/v1/checkout.js"),!0}catch(e){return console.error("Failed to load Razorpay script:",e),!1}}async createPaymentOrder(e,t,s,r){try{if(!pe)throw new Error("Firestore is not configured. Please check your Firebase configuration.");if(!e||!t||!s||!r)throw new Error("Missing required payment order fields");if(s<=0)throw new Error("Amount must be greater than 0");const i={courseId:e,courseTitle:t,amount:s,currency:"INR",userId:r,status:"pending",createdAt:_e.now(),updatedAt:_e.now()};return(await Rl(Mt(pe,"payments"),i)).id}catch(i){throw console.error("Error creating payment order:",i),i.code==="permission-denied"?new Error("Permission denied. Please check Firestore security rules for the payments collection."):i.message?new Error(`Failed to create payment order: ${i.message}`):new Error("Failed to create payment order. Please check your Firebase configuration and try again.")}}async initiatePayment(e,t,s,r,i,o){try{if(!await this.initializeRazorpay())throw new Error("Failed to initialize Razorpay");return{key:this.razorpayKeyId,amount:t*100,currency:"INR",name:"VP Learning Platform",description:`Payment for ${s}`,order_id:void 0,handler:async u=>u,prefill:{name:r,email:i,contact:o||"9999999999"},theme:{color:"#2563eb"},method:{upi:!0,card:!0,netbanking:!0,wallet:!0},config:{display:{blocks:{banks:{name:"All payment methods",instruments:[{method:"upi"},{method:"card"},{method:"netbanking"},{method:"wallet"}]}},sequence:["block.banks"],preferences:{show_default_blocks:!0}}},modal:{ondismiss:()=>{console.log("Payment cancelled by user")}}}}catch(l){throw console.error("Error initiating payment:",l),new Error("Failed to initiate payment")}}async verifyPayment(e,t,s,r){try{const i=xt(pe,"payments",e);if(!(await Yt(i)).exists())throw new Error("Order not found");return await Nl(i,{status:"completed",razorpayOrderId:t,razorpayPaymentId:s,razorpaySignature:r,updatedAt:_e.now()}),!0}catch(i){console.error("Error verifying payment:",i);try{const o=xt(pe,"payments",e);await Nl(o,{status:"failed",updatedAt:_e.now()})}catch(o){console.error("Error updating order status:",o)}return!1}}async getPaymentOrder(e){var t,s;try{const r=xt(pe,"payments",e),i=await Yt(r);return i.exists()?{id:i.id,...i.data(),createdAt:((t=i.data().createdAt)==null?void 0:t.toDate())||new Date,updatedAt:((s=i.data().updatedAt)==null?void 0:s.toDate())||new Date}:null}catch(r){return console.error("Error getting payment order:",r),null}}}const Za=new gA,yA=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},vA=()=>{const{courseId:n}=Mm(),e=He(),{isDarkMode:t}=De(),{courses:s,enrollInCourse:r,enrolledCourses:i,checkEnrollment:o,loadUserEnrollments:l,updateProgress:c,getCourseProgress:u}=Ii(),{getTranslation:m}=ut(),{user:p,isAuthenticated:g}=Gt(),[x,b]=V.useState(null),[T,C]=V.useState(null),[k,R]=V.useState(!0),[P,L]=V.useState(null),[U,F]=V.useState(!1),[I,_]=V.useState(!1),[w,S]=V.useState(!0);V.useEffect(()=>{(async()=>{if(!n){R(!1);return}try{R(!0);const Q=await St.getCourseById(n);if(Q)C(Q),L({id:Q.id||"",title:Q.title,description:Q.description,instructor:Q.instructorName||"Unknown Instructor",duration:`${Q.durationHours}h`,level:Q.difficultyLevel,category:Q.category,thumbnail:Q.thumbnailUrl||"",price:Q.price,rating:4.5,studentsCount:0,lessons:Q.lessons||[]});else{const G=s.find(ne=>ne.id===n);G&&L(G)}}catch(Q){console.error("Error loading course:",Q);const G=s.find(ne=>ne.id===n);G?L(G):le.error("Failed to load course")}finally{R(!1)}})()},[n,s]),V.useEffect(()=>{(async()=>{if(!n||!g){_(!1),S(!1);return}const Q=Te.currentUser;if(!Q){_(!1),S(!1);return}try{S(!0),await l(Q.uid);const G=await o(n,Q.uid);_(G)}catch(G){console.error("Error checking enrollment:",G),_(!1)}finally{S(!1)}})()},[n,g,o,l]);const N=u(n||"");if(k||w)return a.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-300 ${t?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:t?"text-gray-300":"text-gray-600",children:k?"Loading course...":"Checking enrollment..."})]})});if(!P)return a.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-300 ${t?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Course not found"}),a.jsx(tt,{to:"/courses",className:"text-blue-600 hover:text-blue-700",children:"Back to courses"})]})});const D=async()=>{if(!g||!p){le.error("Please login to enroll in this course"),e("/login");return}const $=Te.currentUser;if(!$){le.error("User not authenticated"),e("/login");return}if(P.price===0){await r(P.id,$.uid),_(!0),le.success("Successfully enrolled in the course!");return}try{F(!0);const Q=await Za.createPaymentOrder(P.id,P.title,P.price,$.uid),G=`${p.firstName||""} ${p.lastName||""}`.trim()||"User",ne=p.email||$.email||"",de=p.phone||"",z=await Za.initiatePayment(Q,P.price,P.title,G,ne,de);if(!window.Razorpay)throw new Error("Razorpay SDK not loaded");new window.Razorpay({...z,handler:async ie=>{try{await Za.verifyPayment(Q,ie.razorpay_order_id,ie.razorpay_payment_id,ie.razorpay_signature)?(await r(P.id,$.uid),_(!0),le.success("Payment successful! You are now enrolled in the course.")):le.error("Payment verification failed. Please contact support.")}catch(ce){console.error("Payment verification error:",ce),le.error("Payment verification failed. Please contact support.")}finally{F(!1)}},modal:{ondismiss:()=>{F(!1),le.error("Payment cancelled")}}}).open()}catch(Q){console.error("Payment initiation error:",Q),le.error(Q.message||"Failed to initiate payment. Please try again."),F(!1)}},A=$=>{I&&(b($),c(P.id,$))};return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsx(J.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8},className:"mb-6",children:a.jsxs(tt,{to:"/courses",onClick:yA,className:`inline-flex items-center space-x-2 font-medium transition-colors duration-300 hover:opacity-70 ${t?"text-gray-300":"text-gray-700"}`,children:[a.jsx(us,{size:20}),a.jsx("span",{children:m("backToCourses")})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`rounded-2xl p-8 mb-8 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[a.jsx("div",{className:"h-64 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mb-6 overflow-hidden",children:P.thumbnail?a.jsx("img",{src:P.thumbnail,alt:P.title,className:"w-full h-full object-cover"}):a.jsx(Oe,{size:96,className:"text-white opacity-50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("span",{className:`text-sm font-medium px-3 py-1 rounded-full ${P.level===m("beginner")?"bg-green-100 text-green-800":P.level===m("intermediate")?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:P.level}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Cn,{size:20,className:"text-yellow-400 fill-current"}),a.jsx("span",{className:"font-medium",children:P.rating})]})]}),a.jsx("h1",{className:`text-3xl lg:text-4xl font-bold mb-4 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:P.title}),a.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:P.description}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Tt,{size:16,className:t?"text-gray-400":"text-gray-500"}),a.jsx("span",{className:t?"text-gray-400":"text-gray-500",children:P.duration})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Je,{size:16,className:t?"text-gray-400":"text-gray-500"}),a.jsxs("span",{className:t?"text-gray-400":"text-gray-500",children:[P.studentsCount," students"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Oe,{size:16,className:t?"text-gray-400":"text-gray-500"}),a.jsxs("span",{className:t?"text-gray-400":"text-gray-500",children:[P.lessons.length," lessons"]})]})]})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:`rounded-2xl p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[a.jsx("h2",{className:`text-2xl font-bold mb-6 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:m("courseContent")}),a.jsx("div",{className:"space-y-3",children:P.lessons.map(($,Q)=>a.jsx("div",{onClick:()=>A($.id||String(Q)),className:`p-4 rounded-lg border transition-all duration-300 cursor-pointer ${I?"hover:shadow-md":"opacity-50 cursor-not-allowed"} ${t?"bg-gray-700 border-gray-600 hover:bg-gray-600":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${$.isCompleted?"bg-green-500 text-white":I?"bg-blue-500 text-white":"bg-gray-400 text-white"}`,children:$.isCompleted?a.jsx(It,{size:16}):I?a.jsx(Ut,{size:16}):a.jsx(ed,{size:16})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:$.title}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${t?"text-gray-400":"text-gray-500"}`,children:$.duration})]})]}),!I&&a.jsx(ed,{size:16,className:t?"text-gray-500":"text-gray-400"})]})},$.id||Q))})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(J.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.6},className:`rounded-2xl p-6 sticky top-8 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsxs("div",{className:`text-3xl font-bold mb-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:["â‚¹",P.price.toLocaleString("en-IN")]}),a.jsx("div",{className:`text-sm transition-colors duration-300 ${t?"text-gray-400":"text-gray-500"}`,children:"One-time payment"})]}),I?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:`p-4 rounded-lg transition-colors duration-300 ${t?"bg-green-900 bg-opacity-50":"bg-green-50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(It,{size:20,className:"text-green-500"}),a.jsx("span",{className:"font-medium text-green-700",children:"Enrolled"})]}),a.jsxs("div",{className:"text-sm text-green-600",children:["Progress: ",Math.round(N),"%"]})]}),a.jsx("button",{className:"w-full py-3 rounded-lg font-medium transition-colors duration-300 bg-blue-600 text-white hover:bg-blue-700",children:m("continueLearning")})]}):a.jsx("button",{onClick:D,disabled:U,className:`w-full py-3 rounded-lg font-medium transition-colors duration-300 flex items-center justify-center space-x-2 ${U?"bg-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:U?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(sv,{size:20}),a.jsx("span",{children:P.price>0?`Enroll for â‚¹${P.price.toLocaleString("en-IN")}`:"Enroll Now (Free)"})]})}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsx("h3",{className:`font-semibold mb-4 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:m("whatsIncluded")}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(It,{size:16,className:"text-green-500"}),a.jsxs("span",{className:`text-sm transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:[P.lessons.length," ",m("videoLessons")]})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(It,{size:16,className:"text-green-500"}),a.jsx("span",{className:`text-sm transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:m("lifetimeAccess")})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(It,{size:16,className:"text-green-500"}),a.jsx("span",{className:`text-sm transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:m("certificateOfCompletion")})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(It,{size:16,className:"text-green-500"}),a.jsx("span",{className:`text-sm transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:m("mobileAndDesktopAccess")})]})]})]}),a.jsxs("button",{className:`w-full mt-4 py-2 rounded-lg font-medium transition-colors duration-300 flex items-center justify-center space-x-2 border ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Wl,{size:16}),a.jsx("span",{children:m("downloadResources")})]})]})})]})]})})},xA=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},_A=()=>{const{isDarkMode:n}=De(),{getTranslation:e}=ut(),[t,s]=V.useState(!1),[r,i]=V.useState(!1),[o,l]=V.useState(0),[c,u]=V.useState(!1),m=[e("question1"),e("question2"),e("question3"),e("question4"),e("question5"),e("question6"),e("question7"),e("question8"),e("question9"),e("question10")],p=[{id:"technical",title:e("technicalInterview"),description:e("technicalDescription"),duration:"45 minutes",questions:8,icon:"ðŸ’»"},{id:"behavioral",title:e("behavioralInterview"),description:e("behavioralDescription"),duration:"30 minutes",questions:6,icon:"ðŸ¤"},{id:"leadership",title:e("leadershipInterview"),description:e("leadershipDescription"),duration:"60 minutes",questions:10,icon:"ðŸ‘‘"}],g=()=>{u(!0),l(0),xA()},x=()=>{o<m.length-1&&l(o+1)},b=()=>{o>0&&l(o-1)},T=()=>{s(!t)},C=()=>{i(!r)};return c?a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:`rounded-2xl p-6 mb-8 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:`text-xl font-semibold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:[e("question")," ",o+1," ",e("of")," ",m.length]}),a.jsxs("div",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:[Math.round((o+1)/m.length*100),"% ",e("complete")]})]}),a.jsx("div",{className:`w-full h-2 rounded-full transition-colors duration-300 ${n?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:"h-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500",style:{width:`${(o+1)/m.length*100}%`}})})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`rounded-2xl p-8 mb-8 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("h3",{className:`text-2xl font-bold mb-6 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:m[o]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-32 h-32 mx-auto mb-6 rounded-full flex items-center justify-center transition-colors duration-300 ${n?"bg-gray-700":"bg-gray-100"}`,children:a.jsx(rs,{size:48,className:n?"text-gray-400":"text-gray-500"})}),a.jsx("p",{className:`text-sm mb-6 transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Take your time to think about your answer. Click the microphone to start recording."})]})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:`rounded-2xl p-6 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[a.jsx("button",{onClick:T,className:`w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 ${t?"bg-red-500 text-white hover:bg-red-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:t?a.jsx(rv,{size:24}):a.jsx(iv,{size:24})}),a.jsx("button",{onClick:C,className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors duration-300 ${n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:r?a.jsx(ov,{size:20}):a.jsx(Ut,{size:20})}),a.jsx("button",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors duration-300 ${n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a.jsx(av,{size:20})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:b,disabled:o===0,className:`px-6 py-2 rounded-lg font-medium transition-colors duration-300 ${o===0?"bg-gray-300 text-gray-500 cursor-not-allowed":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e("previous")}),a.jsx("button",{onClick:x,disabled:o===m.length-1,className:`px-6 py-2 rounded-lg font-medium transition-colors duration-300 ${o===m.length-1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:o===m.length-1?e("finish"):e("next")})]})]})]})}):a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[a.jsx("h1",{className:`text-4xl lg:text-5xl font-bold mb-4 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:e("mockInterviewPractice")}),a.jsx("p",{className:`text-lg transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:e("mockInterviewDescription")})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:p.map((k,R)=>a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2+R*.1},className:`rounded-2xl p-8 text-center transition-all duration-300 hover:shadow-xl hover:scale-105 cursor-pointer ${n?"bg-gray-800":"bg-white"}`,onClick:g,children:[a.jsx("div",{className:"text-6xl mb-4",children:k.icon}),a.jsx("h3",{className:`text-2xl font-bold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:k.title}),a.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:k.description}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Tt,{size:16,className:n?"text-gray-400":"text-gray-500"}),a.jsx("span",{className:n?"text-gray-400":"text-gray-500",children:k.duration})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(rs,{size:16,className:n?"text-gray-400":"text-gray-500"}),a.jsxs("span",{className:n?"text-gray-400":"text-gray-500",children:[k.questions," questions"]})]})]})]},k.id))}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:`rounded-2xl p-8 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("h2",{className:`text-2xl font-bold mb-6 text-center transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Why Practice Mock Interviews?"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-blue-900":"bg-blue-100"}`,children:a.jsx(Cn,{size:32,className:"text-blue-600"})}),a.jsx("h3",{className:`font-semibold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Build Confidence"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Practice makes perfect"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-green-900":"bg-green-100"}`,children:a.jsx(rs,{size:32,className:"text-green-600"})}),a.jsx("h3",{className:`font-semibold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Instant Feedback"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"AI-powered analysis"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-purple-900":"bg-purple-100"}`,children:a.jsx(Tt,{size:32,className:"text-purple-600"})}),a.jsx("h3",{className:`font-semibold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Time Management"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Practice pacing"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-orange-900":"bg-orange-100"}`,children:a.jsx(Wl,{size:32,className:"text-orange-600"})}),a.jsx("h3",{className:`font-semibold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Record & Review"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Track your progress"})]})]})]})]})})},bA=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},wA=()=>{const{isDarkMode:n}=De(),{getTranslation:e}=ut(),t=He(),s=l=>({"Active Listening":e("activeListening"),"Public Speaking":e("publicSpeaking"),"Written Communication":e("writtenCommunication"),"Non-verbal Communication":e("nonVerbalCommunication"),"Team Building":e("teamBuilding"),"Decision Making":e("decisionMaking"),"Conflict Resolution":e("conflictResolution"),"Motivating Others":e("motivatingOthers"),"Prioritization Techniques":e("prioritizationTechniques"),"Goal Setting":e("goalSetting"),"Delegation Skills":e("delegationSkills"),"Work-Life Balance":e("workLifeBalance"),"Critical Thinking":e("criticalThinking"),"Creative Solutions":e("creativeSolutions"),"Risk Assessment":e("riskAssessment"),"Self-Awareness":e("selfAwareness"),"Self-Regulation":e("selfRegulation"),Empathy:e("empathy"),"Social Skills":e("socialSkills"),"Change Management":e("changeManagement"),"Learning Agility":e("learningAgility"),Resilience:e("resilience"),"Innovation Mindset":e("innovationMindset")})[l]||l,r=[{id:"communication",title:e("communication"),description:e("communicationDescription"),icon:rs,color:"blue",modules:[{title:s("Active Listening"),duration:"30 min",completed:!1},{title:s("Public Speaking"),duration:"45 min",completed:!1},{title:s("Written Communication"),duration:"40 min",completed:!1},{title:s("Non-verbal Communication"),duration:"25 min",completed:!1}]},{id:"leadership",title:e("leadership"),description:e("leadershipSkillsDescription"),icon:Je,color:"green",modules:[{title:s("Team Building"),duration:"50 min",completed:!1},{title:s("Decision Making"),duration:"35 min",completed:!1},{title:s("Conflict Resolution"),duration:"40 min",completed:!1},{title:s("Motivating Others"),duration:"30 min",completed:!1}]},{id:"time-management",title:e("timeManagement"),description:e("timeManagementDescription"),icon:Tt,color:"purple",modules:[{title:s("Prioritization Techniques"),duration:"25 min",completed:!1},{title:s("Goal Setting"),duration:"30 min",completed:!1},{title:s("Delegation Skills"),duration:"35 min",completed:!1},{title:s("Work-Life Balance"),duration:"40 min",completed:!1}]},{id:"problem-solving",title:e("problemSolving"),description:e("problemSolvingDescription"),icon:tr,color:"orange",modules:[{title:s("Critical Thinking"),duration:"45 min",completed:!1},{title:s("Creative Solutions"),duration:"35 min",completed:!1},{title:s("Decision Making"),duration:"30 min",completed:!1},{title:s("Risk Assessment"),duration:"40 min",completed:!1}]},{id:"emotional-intelligence",title:e("emotionalIntelligence"),description:e("emotionalIntelligenceDescription"),icon:Ht,color:"pink",modules:[{title:s("Self-Awareness"),duration:"35 min",completed:!1},{title:s("Self-Regulation"),duration:"30 min",completed:!1},{title:s("Empathy"),duration:"40 min",completed:!1},{title:s("Social Skills"),duration:"45 min",completed:!1}]},{id:"adaptability",title:e("adaptability"),description:e("adaptabilityDescription"),icon:vt,color:"indigo",modules:[{title:s("Change Management"),duration:"40 min",completed:!1},{title:s("Learning Agility"),duration:"35 min",completed:!1},{title:s("Resilience"),duration:"30 min",completed:!1},{title:s("Innovation Mindset"),duration:"45 min",completed:!1}]}],i=l=>{const c={blue:{bg:n?"bg-blue-900":"bg-blue-100",text:"text-blue-600",border:"border-blue-200",hover:n?"hover:bg-blue-800":"hover:bg-blue-200"},green:{bg:n?"bg-green-900":"bg-green-100",text:"text-green-600",border:"border-green-200",hover:n?"hover:bg-green-800":"hover:bg-green-200"},purple:{bg:n?"bg-purple-900":"bg-purple-100",text:"text-purple-600",border:"border-purple-200",hover:n?"hover:bg-purple-800":"hover:bg-purple-200"},orange:{bg:n?"bg-orange-900":"bg-orange-100",text:"text-orange-600",border:"border-orange-200",hover:n?"hover:bg-orange-800":"hover:bg-orange-200"},pink:{bg:n?"bg-pink-900":"bg-pink-100",text:"text-pink-600",border:"border-pink-200",hover:n?"hover:bg-pink-800":"hover:bg-pink-200"},indigo:{bg:n?"bg-indigo-900":"bg-indigo-100",text:"text-indigo-600",border:"border-indigo-200",hover:n?"hover:bg-indigo-800":"hover:bg-indigo-200"}};return c[l]||c.blue},o=l=>{t(`/soft-skills/${l}`),bA()};return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[a.jsx("h1",{className:`text-4xl lg:text-5xl font-bold mb-4 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:e("softSkillsDevelopment")}),a.jsx("p",{className:`text-lg transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:e("softSkillsDescription")})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((l,c)=>{const u=i(l.color),m=l.modules.filter(g=>g.completed).length,p=m/l.modules.length*100;return a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2+c*.1},onClick:()=>o(l.id),className:`rounded-2xl p-6 transition-all duration-300 hover:shadow-xl hover:scale-105 cursor-pointer ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${u.bg}`,children:a.jsx(l.icon,{size:24,className:u.text})}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-xl font-bold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:l.title}),a.jsxs("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:[m,"/",l.modules.length," modules"]})]})]}),a.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:l.description}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-xs font-medium transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:e("progress")}),a.jsxs("span",{className:`text-xs font-medium transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:[Math.round(p),"%"]})]}),a.jsx("div",{className:`w-full h-1 rounded-full transition-colors duration-300 ${n?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:`h-1 rounded-full transition-all duration-500 ${l.color==="blue"?"bg-blue-500":l.color==="green"?"bg-green-500":l.color==="purple"?"bg-purple-500":l.color==="orange"?"bg-orange-500":l.color==="pink"?"bg-pink-500":"bg-indigo-500"}`,style:{width:`${p}%`}})})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{className:`flex-1 py-2 rounded-lg font-medium transition-colors duration-300 ${n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e("continueLearning")})})]},l.id)})}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:`rounded-2xl p-8 mt-16 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("h2",{className:`text-2xl font-bold mb-6 text-center transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Why Soft Skills Matter"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-blue-900":"bg-blue-100"}`,children:a.jsx(Ht,{size:32,className:"text-blue-600"})}),a.jsx("h3",{className:`font-semibold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Career Growth"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Stand out in the job market"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-green-900":"bg-green-100"}`,children:a.jsx(Je,{size:32,className:"text-green-600"})}),a.jsx("h3",{className:`font-semibold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Better Relationships"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Build stronger connections"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${n?"bg-purple-900":"bg-purple-100"}`,children:a.jsx(vt,{size:32,className:"text-purple-600"})}),a.jsx("h3",{className:`font-semibold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Leadership Ready"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Prepare for management roles"})]})]})]})]})})},cr=ui()(di((n,e)=>({skillProgress:{},initializeSkill:(t,s)=>{n(r=>({skillProgress:{...r.skillProgress,[t]:{skillId:t,modules:s.map(i=>({moduleId:i.id,moduleTitle:i.title,videos:[],completed:!1,completionPercentage:0})),overallProgress:0}}}))},addVideoToModule:(t,s,r)=>{n(i=>{const o=i.skillProgress[t];if(!o)return i;const l=o.modules.map(p=>{if(p.moduleId===s){const g=p.videos.findIndex(k=>k.videoId===r.videoId);let x=[...p.videos];g>=0?x[g]=r:x.push(r);const b=x.filter(k=>k.completed).length,T=x.length>0?b/x.length*100:0,C=T===100&&x.length>0;return{...p,videos:x,completed:C,completionPercentage:T}}return p}),c=l.length,u=l.filter(p=>p.completed).length,m=c>0?u/c*100:0;return{skillProgress:{...i.skillProgress,[t]:{...o,modules:l,overallProgress:m}}}})},updateVideoProgress:(t,s,r,i,o)=>{n(l=>{const c=l.skillProgress[t];if(!c)return l;const u=c.modules.map(x=>{if(x.moduleId===s){const b=x.videos.map(R=>{if(R.videoId===r){const P=i>=o*.8;return{...R,watchTime:i,totalDuration:o,completed:P,lastWatched:new Date}}return R}),T=b.filter(R=>R.completed).length,C=b.length>0?T/b.length*100:0,k=C===100&&b.length>0;return{...x,videos:b,completed:k,completionPercentage:C}}return x}),m=u.length,p=u.filter(x=>x.completed).length,g=m>0?p/m*100:0;return{skillProgress:{...l.skillProgress,[t]:{...c,modules:u,overallProgress:g}}}})},markVideoCompleted:(t,s,r)=>{n(i=>{const o=i.skillProgress[t];if(!o)return i;const l=o.modules.map(p=>{if(p.moduleId===s){const g=p.videos.map(C=>C.videoId===r?{...C,completed:!0,lastWatched:new Date}:C),x=g.filter(C=>C.completed).length,b=g.length>0?x/g.length*100:0,T=b===100&&g.length>0;return{...p,videos:g,completed:T,completionPercentage:b}}return p}),c=l.length,u=l.filter(p=>p.completed).length,m=c>0?u/c*100:0;return{skillProgress:{...i.skillProgress,[t]:{...o,modules:l,overallProgress:m}}}})},markModuleCompleted:(t,s)=>{n(r=>{const i=r.skillProgress[t];if(!i)return r;const o=i.modules.map(m=>m.moduleId===s?{...m,completed:!0,completionPercentage:100}:m),l=o.length,c=o.filter(m=>m.completed).length,u=l>0?c/l*100:0;return{skillProgress:{...r.skillProgress,[t]:{...i,modules:o,overallProgress:u}}}})},getModuleProgress:(t,s)=>{const r=e().skillProgress[t];return r&&r.modules.find(i=>i.moduleId===s)||null},getSkillProgress:t=>e().skillProgress[t]||null,resetSkillProgress:t=>{n(s=>{const r={...s};return delete r.skillProgress[t],r})},resetAllProgress:()=>{n({skillProgress:{}})}}),{name:"video-progress-storage",version:1})),ur=({skillId:n,title:e,description:t,icon:s,color:r,modules:i,onBack:o})=>{const{isDarkMode:l}=De(),{getTranslation:c}=ut(),u=He(),p=(T=>{const C={blue:{bg:l?"bg-blue-900":"bg-blue-100",text:"text-blue-600",border:"border-blue-200",hover:l?"hover:bg-blue-800":"hover:bg-blue-200"},green:{bg:l?"bg-green-900":"bg-green-100",text:"text-green-600",border:"border-green-200",hover:l?"hover:bg-green-800":"hover:bg-green-200"},purple:{bg:l?"bg-purple-900":"bg-purple-100",text:"text-purple-600",border:"border-purple-200",hover:l?"hover:bg-purple-800":"hover:bg-purple-200"},orange:{bg:l?"bg-orange-900":"bg-orange-100",text:"text-orange-600",border:"border-orange-200",hover:l?"hover:bg-orange-800":"hover:bg-orange-200"},pink:{bg:l?"bg-pink-900":"bg-pink-100",text:"text-pink-600",border:"border-pink-200",hover:l?"hover:bg-pink-800":"hover:bg-pink-200"},indigo:{bg:l?"bg-indigo-900":"bg-indigo-100",text:"text-indigo-600",border:"border-indigo-200",hover:l?"hover:bg-indigo-800":"hover:bg-indigo-200"}};return C[T]||C.blue})(r),g=i.filter(T=>T.completed).length,x=g/i.length*100,b=T=>{const C=new URLSearchParams({topic:T,skillId:n,moduleId:T.toLowerCase().replace(/\s+/g,"-")});u(`/youtube-results?${C.toString()}`)};return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${l?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[a.jsxs(J.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8},onClick:o,className:`inline-flex items-center space-x-2 font-medium transition-colors duration-300 hover:opacity-70 mb-6 ${l?"text-gray-300":"text-gray-700"}`,children:["â† ",c("backToSkills")]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`rounded-2xl p-8 mb-8 transition-colors duration-300 ${l?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[a.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${p.bg}`,children:a.jsx(s,{size:32,className:p.text})}),a.jsxs("div",{children:[a.jsx("h1",{className:`text-3xl font-bold transition-colors duration-300 ${l?"text-white":"text-gray-900"}`,children:e}),a.jsx("p",{className:`text-lg transition-colors duration-300 ${l?"text-gray-300":"text-gray-600"}`,children:t})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${l?"text-gray-300":"text-gray-600"}`,children:c("progress")}),a.jsxs("span",{className:`text-sm font-medium transition-colors duration-300 ${l?"text-gray-300":"text-gray-600"}`,children:[g," of ",i.length," ",c("modulesCompleted")]})]}),a.jsx("div",{className:`w-full h-2 rounded-full transition-colors duration-300 ${l?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${r==="blue"?"bg-blue-500":r==="green"?"bg-green-500":r==="purple"?"bg-purple-500":r==="orange"?"bg-orange-500":r==="pink"?"bg-pink-500":"bg-indigo-500"}`,style:{width:`${x}%`}})})]})]}),a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"space-y-4",children:i.map((T,C)=>a.jsx("div",{className:`rounded-xl p-6 transition-all duration-300 hover:shadow-md ${l?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${T.completed?"bg-green-500 text-white":p.bg}`,children:T.completed?a.jsx(It,{size:20}):a.jsx(Ut,{size:20,className:p.text})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-semibold transition-colors duration-300 ${l?"text-white":"text-gray-900"}`,children:T.title}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${l?"text-gray-400":"text-gray-500"}`,children:T.duration})]})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>b(T.title),className:`px-4 py-2 rounded-lg font-medium transition-colors duration-300 ${T.completed?"bg-green-100 text-green-800":"bg-blue-600 text-white hover:bg-blue-700"}`,children:T.completed?c("completed"):c("start")})})]})},C))})]})})},TA=()=>{const n=He(),{getTranslation:e}=ut(),{initializeSkill:t}=cr(),s=o=>({"Active Listening":e("activeListening"),"Public Speaking":e("publicSpeaking"),"Written Communication":e("writtenCommunication"),"Non-verbal Communication":e("nonVerbalCommunication")})[o]||o,r=[{title:s("Active Listening"),duration:"30 min",completed:!1},{title:s("Public Speaking"),duration:"45 min",completed:!1},{title:s("Written Communication"),duration:"40 min",completed:!1},{title:s("Non-verbal Communication"),duration:"25 min",completed:!1}];V.useEffect(()=>{const o=r.map(l=>({id:l.title.toLowerCase().replace(/\s+/g,"-"),title:l.title}));t("communication",o)},[t]);const i=()=>{n("/soft-skills")};return a.jsx(ur,{skillId:"communication",title:e("communication"),description:e("communicationDescription"),icon:rs,color:"blue",modules:r,onBack:i})},EA=()=>{const n=He(),{getTranslation:e}=ut(),{initializeSkill:t}=cr(),s=o=>({"Team Building":e("teamBuilding"),"Decision Making":e("decisionMaking"),"Conflict Resolution":e("conflictResolution"),"Motivating Others":e("motivatingOthers")})[o]||o,r=[{title:s("Team Building"),duration:"50 min",completed:!1},{title:s("Decision Making"),duration:"35 min",completed:!1},{title:s("Conflict Resolution"),duration:"40 min",completed:!1},{title:s("Motivating Others"),duration:"30 min",completed:!1}];V.useEffect(()=>{const o=r.map(l=>({id:l.title.toLowerCase().replace(/\s+/g,"-"),title:l.title}));t("leadership",o)},[t]);const i=()=>{n("/soft-skills")};return a.jsx(ur,{skillId:"leadership",title:e("leadership"),description:e("leadershipSkillsDescription"),icon:Je,color:"green",modules:r,onBack:i})},IA=()=>{const n=He(),{getTranslation:e}=ut(),{initializeSkill:t}=cr(),s=o=>({"Prioritization Techniques":e("prioritizationTechniques"),"Goal Setting":e("goalSetting"),"Delegation Skills":e("delegationSkills"),"Work-Life Balance":e("workLifeBalance")})[o]||o,r=[{title:s("Prioritization Techniques"),duration:"25 min",completed:!1},{title:s("Goal Setting"),duration:"30 min",completed:!1},{title:s("Delegation Skills"),duration:"35 min",completed:!1},{title:s("Work-Life Balance"),duration:"40 min",completed:!1}];V.useEffect(()=>{const o=r.map(l=>({id:l.title.toLowerCase().replace(/\s+/g,"-"),title:l.title}));t("time-management",o)},[t]);const i=()=>{n("/soft-skills")};return a.jsx(ur,{skillId:"time-management",title:e("timeManagement"),description:e("timeManagementDescription"),icon:Tt,color:"purple",modules:r,onBack:i})},CA=()=>{const n=He(),{getTranslation:e}=ut(),{initializeSkill:t}=cr(),s=o=>({"Critical Thinking":e("criticalThinking"),"Creative Solutions":e("creativeSolutions"),"Decision Making":e("decisionMaking"),"Risk Assessment":e("riskAssessment")})[o]||o,r=[{title:s("Critical Thinking"),duration:"45 min",completed:!1},{title:s("Creative Solutions"),duration:"35 min",completed:!1},{title:s("Decision Making"),duration:"30 min",completed:!1},{title:s("Risk Assessment"),duration:"40 min",completed:!1}];V.useEffect(()=>{const o=r.map(l=>({id:l.title.toLowerCase().replace(/\s+/g,"-"),title:l.title}));t("problem-solving",o)},[t]);const i=()=>{n("/soft-skills")};return a.jsx(ur,{skillId:"problem-solving",title:e("problemSolving"),description:e("problemSolvingDescription"),icon:tr,color:"orange",modules:r,onBack:i})},AA=()=>{const n=He(),{getTranslation:e}=ut(),{initializeSkill:t}=cr(),s=o=>({"Self-Awareness":e("selfAwareness"),"Self-Regulation":e("selfRegulation"),Empathy:e("empathy"),"Social Skills":e("socialSkills")})[o]||o,r=[{title:s("Self-Awareness"),duration:"35 min",completed:!1},{title:s("Self-Regulation"),duration:"30 min",completed:!1},{title:s("Empathy"),duration:"40 min",completed:!1},{title:s("Social Skills"),duration:"45 min",completed:!1}];V.useEffect(()=>{const o=r.map(l=>({id:l.title.toLowerCase().replace(/\s+/g,"-"),title:l.title}));t("emotional-intelligence",o)},[t]);const i=()=>{n("/soft-skills")};return a.jsx(ur,{skillId:"emotional-intelligence",title:e("emotionalIntelligence"),description:e("emotionalIntelligenceDescription"),icon:Ht,color:"pink",modules:r,onBack:i})},SA=()=>{const n=He(),{getTranslation:e}=ut(),{initializeSkill:t}=cr(),s=o=>({"Change Management":e("changeManagement"),"Learning Agility":e("learningAgility"),Resilience:e("resilience"),"Innovation Mindset":e("innovationMindset")})[o]||o,r=[{title:s("Change Management"),duration:"40 min",completed:!1},{title:s("Learning Agility"),duration:"35 min",completed:!1},{title:s("Resilience"),duration:"30 min",completed:!1},{title:s("Innovation Mindset"),duration:"45 min",completed:!1}];V.useEffect(()=>{const o=r.map(l=>({id:l.title.toLowerCase().replace(/\s+/g,"-"),title:l.title}));t("adaptability",o)},[t]);const i=()=>{n("/soft-skills")};return a.jsx(ur,{skillId:"adaptability",title:e("adaptability"),description:e("adaptabilityDescription"),icon:vt,color:"indigo",modules:r,onBack:i})};class NA{constructor(e){this.apiKey=e}async searchVideos(e,t=5){try{const s=await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(e)}&type=video&maxResults=${t}&videoDuration=medium&key=${this.apiKey}`);if(!s.ok)throw new Error(`YouTube API error: ${s.status}`);return(await s.json()).items.map(i=>({video_id:i.id.videoId,title:i.snippet.title}))}catch(s){return console.error("Error searching videos:",s),[]}}async getVideoStats(e){try{const t=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=statistics,snippet&id=${e}&key=${this.apiKey}`);if(!t.ok)throw new Error(`YouTube API error: ${t.status}`);const s=await t.json();if(!s.items||s.items.length===0)return null;const r=s.items[0].statistics,i=s.items[0].snippet.title,o=parseInt(r.viewCount||"0"),l=parseInt(r.likeCount||"0"),c=parseInt(r.commentCount||"0"),u=o<1e4&&l<50;return{video_id:e,title:i,views:o,likes:l,comments_count:c,suspicious:u}}catch(t){return console.error("Error getting video stats:",t),null}}async getVideoComments(e,t=50){var s;try{const r=await fetch(`https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&videoId=${e}&maxResults=${t}&textFormat=plainText&key=${this.apiKey}`);if(!r.ok)throw new Error(`YouTube API error: ${r.status}`);return((s=(await r.json()).items)==null?void 0:s.map(o=>o.snippet.topLevelComment.snippet.textDisplay))||[]}catch(r){return console.error("Error getting comments:",r),[]}}analyzeSentiment(e){if(!e.length)return 0;const t=["good","great","excellent","amazing","love","awesome","fantastic","wonderful","perfect","best"],s=["bad","terrible","awful","hate","worst","horrible","disappointing","boring","stupid","useless"];let r=0,i=0;e.forEach(l=>{const c=l.toLowerCase();t.forEach(u=>{c.includes(u)&&r++}),s.forEach(u=>{c.includes(u)&&i++})});const o=r+i;return o===0?0:(r-i)/o}filterSpamComments(e){const t=["subscribe","like","follow","click here","buy now","free money","win cash"];return e.filter(s=>{const r=s.toLowerCase();return!t.some(i=>r.includes(i))})}computeEngagementScore(e){const t=e.views/1e3,s=e.likes,r=e.comments_count;return(t+s+r)/3}computeCompositeScore(e,t,s,r=.7,i=.3){return(s?.5:1)*(r*e+i*(t*100))}async rankVideosForTopic(e){try{const t=await this.searchVideos(e),s=[];for(const r of t){const i=await this.getVideoStats(r.video_id);if(!i)continue;const o=await this.getVideoComments(r.video_id),l=this.filterSpamComments(o),c=this.analyzeSentiment(l),u=this.computeEngagementScore(i),m=this.computeCompositeScore(u,c,i.suspicious);s.push({video_id:r.video_id,title:i.title,engagement:u,sentiment:c,suspicious:i.suspicious,composite_score:m})}return s.sort((r,i)=>i.composite_score-r.composite_score)}catch(t){return console.error("Error ranking videos:",t),[]}}}const RA=()=>{const n=He(),[e]=Lm(),{isDarkMode:t}=De(),{getTranslation:s}=ut(),r=e.get("topic")||"Active Listening",i=e.get("skillId")||"communication",o=e.get("moduleId")||"active-listening",[l,c]=V.useState([]),[u,m]=V.useState(!0),[p,g]=V.useState(null);V.useEffect(()=>{(async()=>{try{m(!0),g(null);const R="AIzaSyAICQdNGP-JPmsp-eysSVMdLl78EYRLQKg",L=await new NA(R).rankVideosForTopic(r);c(L)}catch(R){g("Failed to fetch videos. Please try again."),console.error("Error fetching videos:",R)}finally{m(!1)}})()},[r]);const x=k=>Math.round(k*100)/100,b=k=>k>=80?"text-green-500":k>=60?"text-yellow-500":"text-red-500",T=k=>k>=80?"bg-green-100 dark:bg-green-900":k>=60?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900",C=()=>{n(`/soft-skills/${i}`)};return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[a.jsxs(J.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8},onClick:C,className:`inline-flex items-center space-x-2 font-medium transition-colors duration-300 hover:opacity-70 mb-6 ${t?"text-gray-300":"text-gray-700"}`,children:[a.jsx(us,{size:20}),a.jsxs("span",{children:["Back to ",s("communication")]})]}),a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`rounded-2xl p-8 mb-8 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:['Recommended Videos for "',r,'"']}),a.jsx("p",{className:`text-lg transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:"AI-ranked videos based on engagement and sentiment analysis"})]})}),a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:u?a.jsx("div",{className:`rounded-2xl p-8 text-center transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),a.jsxs("span",{className:`text-lg font-medium transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:['Finding the best videos for "',r,'"...']})]})}):p?a.jsxs("div",{className:`rounded-2xl p-8 text-center transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[a.jsx(Fm,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),a.jsx("h3",{className:`text-lg font-semibold mb-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:"Error Loading Videos"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${t?"text-gray-400":"text-gray-600"}`,children:p})]}):l.length===0?a.jsxs("div",{className:`rounded-2xl p-8 text-center transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:[a.jsx(Ut,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:`text-lg font-semibold mb-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:"No Videos Found"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${t?"text-gray-400":"text-gray-600"}`,children:"Try a different search term or check your internet connection."})]}):a.jsx("div",{className:"space-y-6",children:l.map((k,R)=>a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:R*.1},className:`rounded-xl p-6 transition-all duration-300 hover:shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"flex items-start space-x-6",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:`https://img.youtube.com/vi/${k.video_id}/mqdefault.jpg`,alt:k.title,className:"w-48 h-32 rounded-lg object-cover"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(Ut,{className:"h-12 w-12 text-white drop-shadow-lg"})})]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:`text-xl font-semibold mb-3 line-clamp-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:k.title}),a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsxs("span",{className:`text-sm font-medium px-3 py-1 rounded-full ${T(k.composite_score)} ${b(k.composite_score)}`,children:["Score: ",x(k.composite_score)]}),k.suspicious&&a.jsx("span",{className:"text-sm font-medium px-3 py-1 rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Suspicious"})]}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(zs,{className:"h-4 w-4"}),a.jsxs("span",{children:["Engagement: ",x(k.engagement)]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($m,{className:"h-4 w-4"}),a.jsxs("span",{children:["Sentiment: ",x(k.sentiment)]})]})]})]}),a.jsxs("div",{className:"flex-shrink-0 flex space-x-3",children:[a.jsxs("button",{onClick:()=>{const P=new URLSearchParams({videoId:k.video_id,title:k.title,score:k.composite_score.toString(),engagement:k.engagement.toString(),sentiment:k.sentiment.toString(),suspicious:k.suspicious.toString(),skillId:i,moduleId:o});n(`/video-player?${P.toString()}`)},className:"inline-flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-colors duration-300 bg-blue-600 text-white hover:bg-blue-700",children:[a.jsx(Ut,{className:"h-5 w-5"}),a.jsx("span",{children:"Watch"})]}),a.jsx("a",{href:`https://www.youtube.com/watch?v=${k.video_id}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 px-4 py-3 rounded-lg font-medium transition-colors duration-300 bg-gray-600 text-white hover:bg-gray-700",children:a.jsx(lv,{className:"h-5 w-5"})})]})]})},k.video_id))})}),a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:`rounded-2xl p-6 mt-8 text-center transition-colors duration-300 ${t?"bg-gray-800":"bg-gray-50"}`,children:a.jsx("p",{className:`text-sm transition-colors duration-300 ${t?"text-gray-400":"text-gray-600"}`,children:"Videos are ranked using AI analysis of engagement metrics and comment sentiment"})})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let PA,kA;function DA(){return{geminiUrl:PA,vertexUrl:kA}}function MA(n,e,t,s){var r,i;if(!(n!=null&&n.baseUrl)){const o=DA();return e?(r=o.vertexUrl)!==null&&r!==void 0?r:t:(i=o.geminiUrl)!==null&&i!==void 0?i:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class As{}function ee(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(n,e,t){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in n))if(Array.isArray(t))n[l]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[l])){const c=n[l];if(Array.isArray(t))for(let u=0;u<c.length;u++){const m=c[u];f(m,e.slice(i+1),t[u])}else for(const u of c)f(u,e.slice(i+1),t)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in n||(n[l]=[{}]);const c=n[l];f(c[0],e.slice(i+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const o=n[i];return Array.isArray(o)?o.map(l=>d(l,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function LA(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),i=s.split("."),o=new Set;let l=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){l=c;break}if(l!==-1&&i.length>l)for(let c=l;c<i.length;c++){const u=i[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}Dl(n,r,i,0,o)}}function Dl(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2),l=n;if(o in l&&Array.isArray(l[o]))for(const c of l[o])Dl(c,e,t,s+1,r)}else if(i==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const o=n,l=Object.keys(o).filter(u=>!u.startsWith("_")&&!r.has(u)),c={};for(const u of l)c[u]=o[u];for(const[u,m]of Object.entries(c)){const p=[];for(const g of t.slice(s))g==="*"?p.push(u):p.push(g);f(o,p,m)}for(const u of l)delete o[u]}}else{const o=n;i in o&&Dl(o[i],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kc(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VA(n){const e={},t=d(n,["operationName"]);t!=null&&f(e,["operationName"],t);const s=d(n,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function UA(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const i=d(n,["error"]);i!=null&&f(e,["error"],i);const o=d(n,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],FA(o)),e}function jA(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const i=d(n,["error"]);i!=null&&f(e,["error"],i);const o=d(n,["response"]);return o!=null&&f(e,["response"],$A(o)),e}function FA(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>OA(o))),f(e,["generatedVideos"],i)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function $A(n){const e={},t=d(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>qA(o))),f(e,["generatedVideos"],i)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function OA(n){const e={},t=d(n,["video"]);return t!=null&&f(e,["video"],HA(t)),e}function qA(n){const e={},t=d(n,["_self"]);return t!=null&&f(e,["video"],zA(t)),e}function BA(n){const e={},t=d(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function GA(n){const e={},t=d(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function HA(n){const e={},t=d(n,["uri"]);t!=null&&f(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&f(e,["videoBytes"],Kc(s));const r=d(n,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function zA(n){const e={},t=d(n,["gcsUri"]);t!=null&&f(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Kc(s));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wh;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Wh||(Wh={}));var Jh;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Jh||(Jh={}));var Kh;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Kh||(Kh={}));var In;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(In||(In={}));var Yh;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Yh||(Yh={}));var Qh;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Qh||(Qh={}));var Xh;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Xh||(Xh={}));var Zh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Zh||(Zh={}));var ef;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(ef||(ef={}));var tf;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(tf||(tf={}));var nf;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(nf||(nf={}));var sf;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(sf||(sf={}));var rf;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(rf||(rf={}));var of;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(of||(of={}));var af;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(af||(af={}));var lf;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lf||(lf={}));var Do;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Do||(Do={}));var cf;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cf||(cf={}));var Ml;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ml||(Ml={}));var uf;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(uf||(uf={}));var df;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(df||(df={}));var hf;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(hf||(hf={}));var ff;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ff||(ff={}));var mf;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(mf||(mf={}));var pf;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(pf||(pf={}));var gf;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(gf||(gf={}));var yf;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(yf||(yf={}));var vf;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(vf||(vf={}));var xf;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(xf||(xf={}));var _f;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(_f||(_f={}));var bf;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bf||(bf={}));var wf;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wf||(wf={}));var Tf;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Tf||(Tf={}));var Ef;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ef||(Ef={}));var If;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(If||(If={}));var Cf;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Cf||(Cf={}));var Af;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Af||(Af={}));var Sf;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Sf||(Sf={}));var Nf;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Nf||(Nf={}));var Rf;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Rf||(Rf={}));var Pf;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Pf||(Pf={}));var kf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(kf||(kf={}));var Df;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Df||(Df={}));var Mf;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Mf||(Mf={}));var Lf;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Lf||(Lf={}));var Vf;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Vf||(Vf={}));var Uf;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Uf||(Uf={}));var jf;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(jf||(jf={}));var Us;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Us||(Us={}));class Ll{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Mr{get text(){var e,t,s,r,i,o,l,c;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",m=!1;const p=[];for(const g of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(g))x!=="text"&&x!=="thought"&&(b!==null||b!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;m=!0,u+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?u:void 0}get data(){var e,t,s,r,i,o,l,c;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const m=[];for(const p of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&m.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,s,r,i,o,l,c;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,t,s,r,i,o,l,c,u;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(u=m==null?void 0:m[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,s,r,i,o,l,c,u;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(u=m==null?void 0:m[0])===null||u===void 0?void 0:u.output}}class Ff{}class $f{}class WA{}class JA{}class KA{}class YA{}class Of{}class qf{}class Bf{}class QA{}class Mo{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Mo;let r;const i=e;return t?r=jA(i):r=UA(i),Object.assign(s,r),s}}class Gf{}class Hf{}class zf{}class XA{}class ZA{}class eS{}class Wf{}class tS{get text(){var e,t,s;let r="",i=!1;const o=[];for(const l of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[c,u]of Object.entries(l))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,r+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,t,s;let r="";const i=[];for(const o of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&i.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function we(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function j0(n,e){const t=we(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function F0(n){return Array.isArray(n)?n.map(e=>Lo(e)):[Lo(n)]}function Lo(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function $0(n){const e=Lo(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function O0(n){const e=Lo(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jf(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function q0(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Jf(e)):[Jf(n)]}function Vl(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Kf(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Yf(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function it(n){if(n==null)throw new Error("ContentUnion is required");return Vl(n)?n:{role:"user",parts:q0(n)}}function Yc(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=it(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=it(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>it(t)):[it(e)]}function wt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Kf(n)||Yf(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[it(n)]}const e=[],t=[],s=Vl(n[0]);for(const r of n){const i=Vl(r);if(i!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Kf(r)||Yf(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:q0(t)}),e}function sS(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(In).includes(t[0].toUpperCase())?t[0].toUpperCase():In.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(In).includes(s.toUpperCase())?s.toUpperCase():In.TYPE_UNSPECIFIED})}}function Bs(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=n.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,n=i[1]):i[1].type==="null"&&(e.nullable=!0,n=i[0])),n.type instanceof Array&&sS(n.type,e);for(const[o,l]of Object.entries(n))if(l!=null)if(o=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(In).includes(l.toUpperCase())?l.toUpperCase():In.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=Bs(l);else if(s.includes(o)){const c=[];for(const u of l){if(u.type=="null"){e.nullable=!0;continue}c.push(Bs(u))}e[o]=c}else if(r.includes(o)){const c={};for(const[u,m]of Object.entries(l))c[u]=Bs(m);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=l}return e}function Qc(n){return Bs(n)}function Xc(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Zc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function dr(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Bs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Bs(e.response));return n}function hr(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function rS(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function hn(n,e){if(typeof e!="string")throw new Error("name must be a string");return rS(n,e,"cachedContents")}function B0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Hn(n){return Kc(n)}function iS(n){return n!=null&&typeof n=="object"&&"name"in n}function oS(n){return n!=null&&typeof n=="object"&&"video"in n}function aS(n){return n!=null&&typeof n=="object"&&"uri"in n}function G0(n){var e;let t;if(iS(n)&&(t=n.name),!(aS(n)&&(t=n.uri,t===void 0))&&!(oS(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function H0(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function z0(n){for(const e of["models","tunedModels","publisherModels"])if(lS(n,e))return n[e];return[]}function lS(n,e){return n!==null&&typeof n=="object"&&e in n}function cS(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function uS(n,e={}){const t=[],s=new Set;for(const r of n){const i=r.name;if(s.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);s.add(i);const o=cS(r,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function W0(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function dS(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function J0(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let i=!1;for(const o of r){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function fr(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function K0(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hS(n){const e={},t=d(n,["responsesFile"]);t!=null&&f(e,["fileName"],t);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>BS(o))),f(e,["inlinedResponses"],i)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["inlinedEmbedContentResponses"],i)}return e}function fS(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&f(e,["format"],t);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function mS(n){const e={},t=d(n,["format"]);t!=null&&f(e,["predictionsFormat"],t);const s=d(n,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const r=d(n,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ao(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const r=d(n,["metadata","state"]);r!=null&&f(e,["state"],K0(r));const i=d(n,["metadata","createTime"]);i!=null&&f(e,["createTime"],i);const o=d(n,["metadata","endTime"]);o!=null&&f(e,["endTime"],o);const l=d(n,["metadata","updateTime"]);l!=null&&f(e,["updateTime"],l);const c=d(n,["metadata","model"]);c!=null&&f(e,["model"],c);const u=d(n,["metadata","output"]);return u!=null&&f(e,["dest"],hS(J0(u))),e}function Ul(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["displayName"]);s!=null&&f(e,["displayName"],s);const r=d(n,["state"]);r!=null&&f(e,["state"],K0(r));const i=d(n,["error"]);i!=null&&f(e,["error"],i);const o=d(n,["createTime"]);o!=null&&f(e,["createTime"],o);const l=d(n,["startTime"]);l!=null&&f(e,["startTime"],l);const c=d(n,["endTime"]);c!=null&&f(e,["endTime"],c);const u=d(n,["updateTime"]);u!=null&&f(e,["updateTime"],u);const m=d(n,["model"]);m!=null&&f(e,["model"],m);const p=d(n,["inputConfig"]);p!=null&&f(e,["src"],pS(p));const g=d(n,["outputConfig"]);return g!=null&&f(e,["dest"],fS(J0(g))),e}function pS(n){const e={},t=d(n,["instancesFormat"]);t!=null&&f(e,["format"],t);const s=d(n,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function gS(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&f(t,["fileName"],s);const r=d(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>qS(n,o))),f(t,["requests","requests"],i)}return t}function yS(n){const e={},t=d(n,["format"]);t!=null&&f(e,["instancesFormat"],t);const s=d(n,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const r=d(n,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function vS(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&f(e,["data"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function xS(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],fr(n,s)),t}function _S(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],fr(n,s)),t}function bS(n){const e={},t=d(n,["content"]);t!=null&&f(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],wS(s));const r=d(n,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const i=d(n,["finishReason"]);i!=null&&f(e,["finishReason"],i);const o=d(n,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const l=d(n,["avgLogprobs"]);l!=null&&f(e,["avgLogprobs"],l);const c=d(n,["groundingMetadata"]);c!=null&&f(e,["groundingMetadata"],c);const u=d(n,["index"]);u!=null&&f(e,["index"],u);const m=d(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const p=d(n,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>x)),f(e,["safetyRatings"],g)}return e}function wS(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["citations"],s)}return e}function Y0(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>YS(i))),f(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&f(e,["role"],s),e}function TS(n,e){const t={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function ES(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=d(n,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],mS(dS(r))),t}function Qf(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["src"]);r!=null&&f(t,["batch","inputConfig"],gS(n,W0(n,r)));const i=d(e,["config"]);return i!=null&&TS(i,t),t}function IS(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["model"],we(n,s));const r=d(e,["src"]);r!=null&&f(t,["inputConfig"],yS(W0(n,r)));const i=d(e,["config"]);return i!=null&&ES(i,t),t}function CS(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),t}function AS(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["src"]);r!=null&&f(t,["batch","inputConfig"],MS(n,r));const i=d(e,["config"]);return i!=null&&CS(i,t),t}function SS(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],fr(n,s)),t}function NS(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],fr(n,s)),t}function RS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&f(e,["name"],s);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const i=d(n,["error"]);return i!=null&&f(e,["error"],i),e}function PS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&f(e,["name"],s);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const i=d(n,["error"]);return i!=null&&f(e,["error"],i),e}function kS(n,e){const t={},s=d(e,["contents"]);if(s!=null){let i=Yc(n,s);Array.isArray(i)&&(i=i.map(o=>o)),f(t,["requests[]","request","content"],i)}const r=d(e,["config"]);return r!=null&&(f(t,["_self"],DS(r,t)),LA(t,{"requests[].*":"requests[].request.*"})),t}function DS(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const i=d(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&f(e,["requests[]","outputDimensionality"],i),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function MS(n,e){const t={},s=d(e,["fileName"]);s!=null&&f(t,["file_name"],s);const r=d(e,["inlinedRequests"]);return r!=null&&f(t,["requests"],kS(n,r)),t}function LS(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function VS(n,e,t){const s={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&f(t,["systemInstruction"],Y0(it(r)));const i=d(e,["temperature"]);i!=null&&f(s,["temperature"],i);const o=d(e,["topP"]);o!=null&&f(s,["topP"],o);const l=d(e,["topK"]);l!=null&&f(s,["topK"],l);const c=d(e,["candidateCount"]);c!=null&&f(s,["candidateCount"],c);const u=d(e,["maxOutputTokens"]);u!=null&&f(s,["maxOutputTokens"],u);const m=d(e,["stopSequences"]);m!=null&&f(s,["stopSequences"],m);const p=d(e,["responseLogprobs"]);p!=null&&f(s,["responseLogprobs"],p);const g=d(e,["logprobs"]);g!=null&&f(s,["logprobs"],g);const x=d(e,["presencePenalty"]);x!=null&&f(s,["presencePenalty"],x);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const T=d(e,["seed"]);T!=null&&f(s,["seed"],T);const C=d(e,["responseMimeType"]);C!=null&&f(s,["responseMimeType"],C);const k=d(e,["responseSchema"]);k!=null&&f(s,["responseSchema"],Qc(k));const R=d(e,["responseJsonSchema"]);if(R!=null&&f(s,["responseJsonSchema"],R),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(t!==void 0&&P!=null){let D=P;Array.isArray(D)&&(D=D.map(A=>QS(A))),f(t,["safetySettings"],D)}const L=d(e,["tools"]);if(t!==void 0&&L!=null){let D=hr(L);Array.isArray(D)&&(D=D.map(A=>XS(dr(A)))),f(t,["tools"],D)}const U=d(e,["toolConfig"]);if(t!==void 0&&U!=null&&f(t,["toolConfig"],U),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=d(e,["cachedContent"]);t!==void 0&&F!=null&&f(t,["cachedContent"],hn(n,F));const I=d(e,["responseModalities"]);I!=null&&f(s,["responseModalities"],I);const _=d(e,["mediaResolution"]);_!=null&&f(s,["mediaResolution"],_);const w=d(e,["speechConfig"]);if(w!=null&&f(s,["speechConfig"],Xc(w)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const S=d(e,["thinkingConfig"]);S!=null&&f(s,["thinkingConfig"],S);const N=d(e,["imageConfig"]);return N!=null&&f(s,["imageConfig"],N),s}function US(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(u=>bS(u))),f(e,["candidates"],c)}const r=d(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const i=d(n,["promptFeedback"]);i!=null&&f(e,["promptFeedback"],i);const o=d(n,["responseId"]);o!=null&&f(e,["responseId"],o);const l=d(n,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function jS(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],fr(n,s)),t}function FS(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],fr(n,s)),t}function $S(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function OS(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&f(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function qS(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["request","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let l=wt(r);Array.isArray(l)&&(l=l.map(c=>Y0(c))),f(t,["request","contents"],l)}const i=d(e,["metadata"]);i!=null&&f(t,["metadata"],i);const o=d(e,["config"]);return o!=null&&f(t,["request","generationConfig"],VS(n,o,d(t,["request"],{}))),t}function BS(n){const e={},t=d(n,["response"]);t!=null&&f(e,["response"],US(t));const s=d(n,["error"]);return s!=null&&f(e,["error"],s),e}function GS(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function HS(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const i=d(n,["filter"]);return e!==void 0&&i!=null&&f(e,["_query","filter"],i),t}function zS(n){const e={},t=d(n,["config"]);return t!=null&&GS(t,e),e}function WS(n){const e={},t=d(n,["config"]);return t!=null&&HS(t,e),e}function JS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(n,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>ao(o))),f(e,["batchJobs"],i)}return e}function KS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(n,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ul(o))),f(e,["batchJobs"],i)}return e}function YS(n){const e={},t=d(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],t);const s=d(n,["thought"]);s!=null&&f(e,["thought"],s);const r=d(n,["inlineData"]);r!=null&&f(e,["inlineData"],vS(r));const i=d(n,["fileData"]);i!=null&&f(e,["fileData"],LS(i));const o=d(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const l=d(n,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=d(n,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const u=d(n,["executableCode"]);u!=null&&f(e,["executableCode"],u);const m=d(n,["functionResponse"]);m!=null&&f(e,["functionResponse"],m);const p=d(n,["text"]);return p!=null&&f(e,["text"],p),e}function QS(n){const e={};if(d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=d(n,["category"]);t!=null&&f(e,["category"],t);const s=d(n,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function XS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let u=t;Array.isArray(u)&&(u=u.map(m=>m)),f(e,["functionDeclarations"],u)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],OS(s));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=d(n,["googleMaps"]);i!=null&&f(e,["googleMaps"],$S(i));const o=d(n,["urlContext"]);o!=null&&f(e,["urlContext"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=d(n,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(xs||(xs={}));class Ci{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!s||Object.keys(s).length===0?o={config:{}}:typeof s=="object"?o=Object.assign({},s):o=s,o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZS extends As{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Ci(xs.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Qf(this.apiClient,e),s=t._url,r=ee("{model}:batchGenerateContent",s),l=t.batch.inputConfig.requests,c=l.requests,u=[];for(const m of c){const p=Object.assign({},m);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const x=p.request;x.systemInstruction=g,p.request=x}u.push(p)}return l.requests=u,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?s.dest=`${i.slice(0,-6)}/dest`:s.dest=`${i}_dest_${r}`;else if(o)s.dest=`${o}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=IS(this.apiClient,e);return l=ee("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Ul(m))}else{const u=Qf(this.apiClient,e);return l=ee("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>ao(m))}}async createEmbeddingsInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=AS(this.apiClient,e);return i=ee("{model}:asyncBatchEmbedContent",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r.then(c=>ao(c))}}async get(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=FS(this.apiClient,e);return l=ee("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Ul(m))}else{const u=jS(this.apiClient,e);return l=ee("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>ao(m))}}async cancel(e){var t,s,r,i;let o="",l={};if(this.apiClient.isVertexAI()){const c=_S(this.apiClient,e);o=ee("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const c=xS(this.apiClient,e);o=ee("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=WS(e);return l=ee("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=KS(m),g=new Wf;return Object.assign(g,p),g})}else{const u=zS(e);return l=ee("batches",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=JS(m),g=new Wf;return Object.assign(g,p),g})}}async delete(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=NS(this.apiClient,e);return l=ee("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>PS(m))}else{const u=SS(this.apiClient,e);return l=ee("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>RS(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&f(e,["data"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Xf(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>bN(i))),f(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&f(e,["role"],s),e}function tN(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const i=d(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=d(n,["contents"]);if(e!==void 0&&o!=null){let m=wt(o);Array.isArray(m)&&(m=m.map(p=>Xf(p))),f(e,["contents"],m)}const l=d(n,["systemInstruction"]);e!==void 0&&l!=null&&f(e,["systemInstruction"],Xf(it(l)));const c=d(n,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>wN(p))),f(e,["tools"],m)}const u=d(n,["toolConfig"]);if(e!==void 0&&u!=null&&f(e,["toolConfig"],u),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function nN(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const i=d(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=d(n,["contents"]);if(e!==void 0&&o!=null){let p=wt(o);Array.isArray(p)&&(p=p.map(g=>g)),f(e,["contents"],p)}const l=d(n,["systemInstruction"]);e!==void 0&&l!=null&&f(e,["systemInstruction"],it(l));const c=d(n,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>TN(g))),f(e,["tools"],p)}const u=d(n,["toolConfig"]);e!==void 0&&u!=null&&f(e,["toolConfig"],u);const m=d(n,["kmsKeyName"]);return e!==void 0&&m!=null&&f(e,["encryption_spec","kmsKeyName"],m),t}function sN(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["model"],j0(n,s));const r=d(e,["config"]);return r!=null&&tN(r,t),t}function rN(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["model"],j0(n,s));const r=d(e,["config"]);return r!=null&&nN(r,t),t}function iN(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],hn(n,s)),t}function oN(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],hn(n,s)),t}function aN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function lN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function cN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function uN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&f(e,["description"],t);const s=d(n,["name"]);s!=null&&f(e,["name"],s);const r=d(n,["parameters"]);r!=null&&f(e,["parameters"],r);const i=d(n,["parametersJsonSchema"]);i!=null&&f(e,["parametersJsonSchema"],i);const o=d(n,["response"]);o!=null&&f(e,["response"],o);const l=d(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function dN(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],hn(n,s)),t}function hN(n,e){const t={},s=d(e,["name"]);return s!=null&&f(t,["_url","name"],hn(n,s)),t}function fN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function mN(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&f(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function pN(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function gN(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function yN(n){const e={},t=d(n,["config"]);return t!=null&&pN(t,e),e}function vN(n){const e={},t=d(n,["config"]);return t!=null&&gN(t,e),e}function xN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(n,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["cachedContents"],i)}return e}function _N(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(n,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["cachedContents"],i)}return e}function bN(n){const e={},t=d(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],t);const s=d(n,["thought"]);s!=null&&f(e,["thought"],s);const r=d(n,["inlineData"]);r!=null&&f(e,["inlineData"],eN(r));const i=d(n,["fileData"]);i!=null&&f(e,["fileData"],cN(i));const o=d(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const l=d(n,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=d(n,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const u=d(n,["executableCode"]);u!=null&&f(e,["executableCode"],u);const m=d(n,["functionResponse"]);m!=null&&f(e,["functionResponse"],m);const p=d(n,["text"]);return p!=null&&f(e,["text"],p),e}function wN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let u=t;Array.isArray(u)&&(u=u.map(m=>m)),f(e,["functionDeclarations"],u)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],mN(s));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=d(n,["googleMaps"]);i!=null&&f(e,["googleMaps"],fN(i));const o=d(n,["urlContext"]);o!=null&&f(e,["urlContext"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=d(n,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}function TN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>uN(g))),f(e,["functionDeclarations"],p)}const s=d(n,["retrieval"]);s!=null&&f(e,["retrieval"],s);const r=d(n,["googleSearch"]);r!=null&&f(e,["googleSearch"],r);const i=d(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(n,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const l=d(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=d(n,["urlContext"]);c!=null&&f(e,["urlContext"],c);const u=d(n,["computerUse"]);u!=null&&f(e,["computerUse"],u);const m=d(n,["codeExecution"]);return m!=null&&f(e,["codeExecution"],m),e}function EN(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),t}function IN(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),t}function CN(n,e){const t={},s=d(e,["name"]);s!=null&&f(t,["_url","name"],hn(n,s));const r=d(e,["config"]);return r!=null&&EN(r,t),t}function AN(n,e){const t={},s=d(e,["name"]);s!=null&&f(t,["_url","name"],hn(n,s));const r=d(e,["config"]);return r!=null&&IN(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SN extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ci(xs.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=rN(this.apiClient,e);return l=ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const u=sN(this.apiClient,e);return l=ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=hN(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const u=dN(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=oN(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=lN(m),g=new Hf;return Object.assign(g,p),g})}else{const u=iN(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=aN(m),g=new Hf;return Object.assign(g,p),g})}}async update(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=AN(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const u=CN(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async listInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=vN(e);return l=ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=_N(m),g=new zf;return Object.assign(g,p),g})}else{const u=yN(e);return l=ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=xN(m),g=new zf;return Object.assign(g,p),g})}}}function Zf(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ne(n){return this instanceof Ne?(this.v=n,this):new Ne(n)}function Gs(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(x){return function(b){return Promise.resolve(b).then(x,p)}}function l(x,b){s[x]&&(r[x]=function(T){return new Promise(function(C,k){i.push([x,T,C,k])>1||c(x,T)})},b&&(r[x]=b(r[x])))}function c(x,b){try{u(s[x](b))}catch(T){g(i[0][3],T)}}function u(x){x.value instanceof Ne?Promise.resolve(x.value.v).then(m,p):g(i[0][2],x)}function m(x){c("next",x)}function p(x){c("throw",x)}function g(x,b){x(b),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Jr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Zf=="function"?Zf(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(i){t[i]=n[i]&&function(o){return new Promise(function(l,c){o=n[i](o),r(l,c,o.done,o.value)})}}function r(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Q0(t)}function Q0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function RN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function em(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let i=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),i&&!Q0(n[s])&&(i=!1),s++;i?e.push(...r):e.pop()}return e}class PN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new kN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class kN{constructor(e,t,s,r={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),RN(i)}async sendMessage(e){var t;await this.sendPromise;const s=it(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var i,o,l;const c=await r,u=(o=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,m=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];m!=null&&(g=(l=m.slice(p))!==null&&l!==void 0?l:[]);const x=u?[u]:[];this.recordHistory(s,x,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=it(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,s)}getHistory(e=!1){const t=e?em(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return Gs(this,arguments,function*(){var o,l,c,u;const m=[];try{for(var p=!0,g=Jr(e),x;x=yield Ne(g.next()),o=x.done,!o;p=!0){u=x.value,p=!1;const b=u;if(NN(b)){const T=(r=(s=b.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;T!==void 0&&m.push(T)}yield yield Ne(b)}}catch(b){l={error:b}}finally{try{!p&&!o&&(c=g.return)&&(yield Ne(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(t,m)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(i=>i.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...em(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ca extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ca.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DN(n){const e={},t=d(n,["file"]);return t!=null&&f(e,["file"],t),e}function MN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function LN(n){const e={},t=d(n,["name"]);return t!=null&&f(e,["_url","file"],G0(t)),e}function VN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function UN(n){const e={},t=d(n,["name"]);return t!=null&&f(e,["_url","file"],G0(t)),e}function jN(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),t}function FN(n){const e={},t=d(n,["config"]);return t!=null&&jN(t,e),e}function $N(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(n,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ON extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ci(xs.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=FN(e);return i=ee("files",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(u=>{const m=u;return m.sdkHttpResponse={headers:c.headers},m})),r.then(c=>{const u=$N(c),m=new XA;return Object.assign(m,u),m})}}async createInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=DN(e);return i=ee("upload/v1beta/files",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r.then(c=>{const u=MN(c),m=new ZA;return Object.assign(m,u),m})}}async get(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UN(e);return i=ee("files/{file}",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=LN(e);return i=ee("files/{file}",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(u=>{const m=u;return m.sdkHttpResponse={headers:c.headers},m})),r.then(c=>{const u=VN(c),m=new eS;return Object.assign(m,u),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lo(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&f(e,["data"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function qN(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>sR(i))),f(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&f(e,["role"],s),e}function BN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function GN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&f(e,["description"],t);const s=d(n,["name"]);s!=null&&f(e,["name"],s);const r=d(n,["parameters"]);r!=null&&f(e,["parameters"],r);const i=d(n,["parametersJsonSchema"]);i!=null&&f(e,["parametersJsonSchema"],i);const o=d(n,["response"]);o!=null&&f(e,["response"],o);const l=d(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function HN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&f(e,["modelConfig"],t);const s=d(n,["audioTimestamp"]);s!=null&&f(e,["audioTimestamp"],s);const r=d(n,["candidateCount"]);r!=null&&f(e,["candidateCount"],r);const i=d(n,["enableAffectiveDialog"]);i!=null&&f(e,["enableAffectiveDialog"],i);const o=d(n,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const l=d(n,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=d(n,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const u=d(n,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const m=d(n,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const p=d(n,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const g=d(n,["responseLogprobs"]);g!=null&&f(e,["responseLogprobs"],g);const x=d(n,["responseMimeType"]);x!=null&&f(e,["responseMimeType"],x);const b=d(n,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const T=d(n,["responseSchema"]);T!=null&&f(e,["responseSchema"],T);const C=d(n,["routingConfig"]);C!=null&&f(e,["routingConfig"],C);const k=d(n,["seed"]);k!=null&&f(e,["seed"],k);const R=d(n,["speechConfig"]);R!=null&&f(e,["speechConfig"],X0(R));const P=d(n,["stopSequences"]);P!=null&&f(e,["stopSequences"],P);const L=d(n,["temperature"]);L!=null&&f(e,["temperature"],L);const U=d(n,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const F=d(n,["topK"]);F!=null&&f(e,["topK"],F);const I=d(n,["topP"]);if(I!=null&&f(e,["topP"],I),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function WN(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&f(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function JN(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const i=d(n,["temperature"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","temperature"],i);const o=d(n,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const l=d(n,["topK"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topK"],l);const c=d(n,["maxOutputTokens"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","maxOutputTokens"],c);const u=d(n,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const m=d(n,["seed"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","seed"],m);const p=d(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Zc(p));const g=d(n,["thinkingConfig"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","thinkingConfig"],g);const x=d(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],x);const b=d(n,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],qN(it(b)));const T=d(n,["tools"]);if(e!==void 0&&T!=null){let F=hr(T);Array.isArray(F)&&(F=F.map(I=>iR(dr(I)))),f(e,["setup","tools"],F)}const C=d(n,["sessionResumption"]);e!==void 0&&C!=null&&f(e,["setup","sessionResumption"],rR(C));const k=d(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);const R=d(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const P=d(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const U=d(n,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),t}function KN(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],HN(s));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const i=d(n,["temperature"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","temperature"],i);const o=d(n,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const l=d(n,["topK"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topK"],l);const c=d(n,["maxOutputTokens"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","maxOutputTokens"],c);const u=d(n,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const m=d(n,["seed"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","seed"],m);const p=d(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],X0(Zc(p)));const g=d(n,["thinkingConfig"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","thinkingConfig"],g);const x=d(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],x);const b=d(n,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],it(b));const T=d(n,["tools"]);if(e!==void 0&&T!=null){let F=hr(T);Array.isArray(F)&&(F=F.map(I=>oR(dr(I)))),f(e,["setup","tools"],F)}const C=d(n,["sessionResumption"]);e!==void 0&&C!=null&&f(e,["setup","sessionResumption"],C);const k=d(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);const R=d(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const P=d(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const U=d(n,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),t}function YN(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["setup","model"],we(n,s));const r=d(e,["config"]);return r!=null&&f(t,["config"],JN(r,t)),t}function QN(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["setup","model"],we(n,s));const r=d(e,["config"]);return r!=null&&f(t,["config"],KN(r,t)),t}function XN(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&f(e,["musicGenerationConfig"],t),e}function ZN(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["weightedPrompts"],s)}return e}function eR(n){const e={},t=d(n,["media"]);if(t!=null){let u=F0(t);Array.isArray(u)&&(u=u.map(m=>lo(m))),f(e,["mediaChunks"],u)}const s=d(n,["audio"]);s!=null&&f(e,["audio"],lo(O0(s)));const r=d(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const i=d(n,["video"]);i!=null&&f(e,["video"],lo($0(i)));const o=d(n,["text"]);o!=null&&f(e,["text"],o);const l=d(n,["activityStart"]);l!=null&&f(e,["activityStart"],l);const c=d(n,["activityEnd"]);return c!=null&&f(e,["activityEnd"],c),e}function tR(n){const e={},t=d(n,["media"]);if(t!=null){let u=F0(t);Array.isArray(u)&&(u=u.map(m=>m)),f(e,["mediaChunks"],u)}const s=d(n,["audio"]);s!=null&&f(e,["audio"],O0(s));const r=d(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const i=d(n,["video"]);i!=null&&f(e,["video"],$0(i));const o=d(n,["text"]);o!=null&&f(e,["text"],o);const l=d(n,["activityStart"]);l!=null&&f(e,["activityStart"],l);const c=d(n,["activityEnd"]);return c!=null&&f(e,["activityEnd"],c),e}function nR(n){const e={},t=d(n,["setupComplete"]);t!=null&&f(e,["setupComplete"],t);const s=d(n,["serverContent"]);s!=null&&f(e,["serverContent"],s);const r=d(n,["toolCall"]);r!=null&&f(e,["toolCall"],r);const i=d(n,["toolCallCancellation"]);i!=null&&f(e,["toolCallCancellation"],i);const o=d(n,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],aR(o));const l=d(n,["goAway"]);l!=null&&f(e,["goAway"],l);const c=d(n,["sessionResumptionUpdate"]);return c!=null&&f(e,["sessionResumptionUpdate"],c),e}function sR(n){const e={},t=d(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],t);const s=d(n,["thought"]);s!=null&&f(e,["thought"],s);const r=d(n,["inlineData"]);r!=null&&f(e,["inlineData"],lo(r));const i=d(n,["fileData"]);i!=null&&f(e,["fileData"],BN(i));const o=d(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const l=d(n,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=d(n,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const u=d(n,["executableCode"]);u!=null&&f(e,["executableCode"],u);const m=d(n,["functionResponse"]);m!=null&&f(e,["functionResponse"],m);const p=d(n,["text"]);return p!=null&&f(e,["text"],p),e}function rR(n){const e={},t=d(n,["handle"]);if(t!=null&&f(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X0(n){const e={},t=d(n,["voiceConfig"]);if(t!=null&&f(e,["voiceConfig"],t),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=d(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function iR(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let u=t;Array.isArray(u)&&(u=u.map(m=>m)),f(e,["functionDeclarations"],u)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],WN(s));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=d(n,["googleMaps"]);i!=null&&f(e,["googleMaps"],zN(i));const o=d(n,["urlContext"]);o!=null&&f(e,["urlContext"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=d(n,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}function oR(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>GN(g))),f(e,["functionDeclarations"],p)}const s=d(n,["retrieval"]);s!=null&&f(e,["retrieval"],s);const r=d(n,["googleSearch"]);r!=null&&f(e,["googleSearch"],r);const i=d(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(n,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const l=d(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=d(n,["urlContext"]);c!=null&&f(e,["urlContext"],c);const u=d(n,["computerUse"]);u!=null&&f(e,["computerUse"],u);const m=d(n,["codeExecution"]);return m!=null&&f(e,["codeExecution"],m),e}function aR(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&f(e,["promptTokenCount"],t);const s=d(n,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const r=d(n,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const i=d(n,["toolUsePromptTokenCount"]);i!=null&&f(e,["toolUsePromptTokenCount"],i);const o=d(n,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);const l=d(n,["totalTokenCount"]);l!=null&&f(e,["totalTokenCount"],l);const c=d(n,["promptTokensDetails"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(b=>b)),f(e,["promptTokensDetails"],x)}const u=d(n,["cacheTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(b=>b)),f(e,["cacheTokensDetails"],x)}const m=d(n,["candidatesTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(b=>b)),f(e,["responseTokensDetails"],x)}const p=d(n,["toolUsePromptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>b)),f(e,["toolUsePromptTokensDetails"],x)}const g=d(n,["trafficType"]);return g!=null&&f(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lR(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&f(e,["data"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function cR(n){const e={},t=d(n,["content"]);t!=null&&f(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],uR(s));const r=d(n,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const i=d(n,["finishReason"]);i!=null&&f(e,["finishReason"],i);const o=d(n,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const l=d(n,["avgLogprobs"]);l!=null&&f(e,["avgLogprobs"],l);const c=d(n,["groundingMetadata"]);c!=null&&f(e,["groundingMetadata"],c);const u=d(n,["index"]);u!=null&&f(e,["index"],u);const m=d(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const p=d(n,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>x)),f(e,["safetyRatings"],g)}return e}function uR(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["citations"],s)}return e}function dR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let i=wt(r);Array.isArray(i)&&(i=i.map(o=>o)),f(t,["contents"],i)}return t}function hR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["tokensInfo"],r)}return e}function fR(n){const e={},t=d(n,["values"]);t!=null&&f(e,["values"],t);const s=d(n,["statistics"]);return s!=null&&f(e,["statistics"],mR(s)),e}function mR(n){const e={},t=d(n,["truncated"]);t!=null&&f(e,["truncated"],t);const s=d(n,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function ua(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>xP(i))),f(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&f(e,["role"],s),e}function pR(n){const e={},t=d(n,["controlType"]);t!=null&&f(e,["controlType"],t);const s=d(n,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function gR(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function yR(n,e){const t={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],it(s));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>sy(l))),f(e,["tools"],o)}const i=d(n,["generationConfig"]);return e!==void 0&&i!=null&&f(e,["generationConfig"],oP(i)),t}function vR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let o=wt(r);Array.isArray(o)&&(o=o.map(l=>ua(l))),f(t,["contents"],o)}const i=d(e,["config"]);return i!=null&&gR(i),t}function xR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let o=wt(r);Array.isArray(o)&&(o=o.map(l=>l)),f(t,["contents"],o)}const i=d(e,["config"]);return i!=null&&yR(i,t),t}function _R(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const r=d(n,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function bR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function wR(n,e){const t={},s=d(e,["model"]);return s!=null&&f(t,["_url","name"],we(n,s)),t}function TR(n,e){const t={},s=d(e,["model"]);return s!=null&&f(t,["_url","name"],we(n,s)),t}function ER(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function IR(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function CR(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const l=d(n,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=d(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const g=d(n,["includeRaiReason"]);e!==void 0&&g!=null&&f(e,["parameters","includeRaiReason"],g);const x=d(n,["language"]);e!==void 0&&x!=null&&f(e,["parameters","language"],x);const b=d(n,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","compressionQuality"],T);const C=d(n,["addWatermark"]);e!==void 0&&C!=null&&f(e,["parameters","addWatermark"],C);const k=d(n,["labels"]);e!==void 0&&k!=null&&f(e,["labels"],k);const R=d(n,["editMode"]);e!==void 0&&R!=null&&f(e,["parameters","editMode"],R);const P=d(n,["baseSteps"]);return e!==void 0&&P!=null&&f(e,["parameters","editConfig","baseSteps"],P),t}function AR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);const i=d(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>IP(c))),f(t,["instances[0]","referenceImages"],l)}const o=d(e,["config"]);return o!=null&&CR(o,t),t}function SR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>da(i))),f(e,["generatedImages"],r)}return e}function NR(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const i=d(n,["outputDimensionality"]);if(e!==void 0&&i!=null&&f(e,["requests[]","outputDimensionality"],i),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function RR(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const i=d(n,["outputDimensionality"]);e!==void 0&&i!=null&&f(e,["parameters","outputDimensionality"],i);const o=d(n,["mimeType"]);e!==void 0&&o!=null&&f(e,["instances[]","mimeType"],o);const l=d(n,["autoTruncate"]);return e!==void 0&&l!=null&&f(e,["parameters","autoTruncate"],l),t}function PR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let l=Yc(n,r);Array.isArray(l)&&(l=l.map(c=>c)),f(t,["requests[]","content"],l)}const i=d(e,["config"]);i!=null&&NR(i,t);const o=d(e,["model"]);return o!==void 0&&f(t,["requests[]","model"],we(n,o)),t}function kR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let o=Yc(n,r);Array.isArray(o)&&(o=o.map(l=>l)),f(t,["instances[]","content"],o)}const i=d(e,["config"]);return i!=null&&RR(i,t),t}function DR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["embeddings"],i)}const r=d(n,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function MR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>fR(o))),f(e,["embeddings"],i)}const r=d(n,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function LR(n){const e={},t=d(n,["endpoint"]);t!=null&&f(e,["name"],t);const s=d(n,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function VR(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function UR(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&f(e,["description"],t);const s=d(n,["name"]);s!=null&&f(e,["name"],s);const r=d(n,["parameters"]);r!=null&&f(e,["parameters"],r);const i=d(n,["parametersJsonSchema"]);i!=null&&f(e,["parametersJsonSchema"],i);const o=d(n,["response"]);o!=null&&f(e,["response"],o);const l=d(n,["responseJsonSchema"]);return l!=null&&f(e,["responseJsonSchema"],l),e}function jR(n,e,t){const s={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&f(t,["systemInstruction"],ua(it(r)));const i=d(e,["temperature"]);i!=null&&f(s,["temperature"],i);const o=d(e,["topP"]);o!=null&&f(s,["topP"],o);const l=d(e,["topK"]);l!=null&&f(s,["topK"],l);const c=d(e,["candidateCount"]);c!=null&&f(s,["candidateCount"],c);const u=d(e,["maxOutputTokens"]);u!=null&&f(s,["maxOutputTokens"],u);const m=d(e,["stopSequences"]);m!=null&&f(s,["stopSequences"],m);const p=d(e,["responseLogprobs"]);p!=null&&f(s,["responseLogprobs"],p);const g=d(e,["logprobs"]);g!=null&&f(s,["logprobs"],g);const x=d(e,["presencePenalty"]);x!=null&&f(s,["presencePenalty"],x);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const T=d(e,["seed"]);T!=null&&f(s,["seed"],T);const C=d(e,["responseMimeType"]);C!=null&&f(s,["responseMimeType"],C);const k=d(e,["responseSchema"]);k!=null&&f(s,["responseSchema"],Qc(k));const R=d(e,["responseJsonSchema"]);if(R!=null&&f(s,["responseJsonSchema"],R),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(t!==void 0&&P!=null){let D=P;Array.isArray(D)&&(D=D.map(A=>CP(A))),f(t,["safetySettings"],D)}const L=d(e,["tools"]);if(t!==void 0&&L!=null){let D=hr(L);Array.isArray(D)&&(D=D.map(A=>kP(dr(A)))),f(t,["tools"],D)}const U=d(e,["toolConfig"]);if(t!==void 0&&U!=null&&f(t,["toolConfig"],U),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=d(e,["cachedContent"]);t!==void 0&&F!=null&&f(t,["cachedContent"],hn(n,F));const I=d(e,["responseModalities"]);I!=null&&f(s,["responseModalities"],I);const _=d(e,["mediaResolution"]);_!=null&&f(s,["mediaResolution"],_);const w=d(e,["speechConfig"]);if(w!=null&&f(s,["speechConfig"],Xc(w)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const S=d(e,["thinkingConfig"]);S!=null&&f(s,["thinkingConfig"],S);const N=d(e,["imageConfig"]);return N!=null&&f(s,["imageConfig"],N),s}function FR(n,e,t){const s={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&f(t,["systemInstruction"],it(r));const i=d(e,["temperature"]);i!=null&&f(s,["temperature"],i);const o=d(e,["topP"]);o!=null&&f(s,["topP"],o);const l=d(e,["topK"]);l!=null&&f(s,["topK"],l);const c=d(e,["candidateCount"]);c!=null&&f(s,["candidateCount"],c);const u=d(e,["maxOutputTokens"]);u!=null&&f(s,["maxOutputTokens"],u);const m=d(e,["stopSequences"]);m!=null&&f(s,["stopSequences"],m);const p=d(e,["responseLogprobs"]);p!=null&&f(s,["responseLogprobs"],p);const g=d(e,["logprobs"]);g!=null&&f(s,["logprobs"],g);const x=d(e,["presencePenalty"]);x!=null&&f(s,["presencePenalty"],x);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const T=d(e,["seed"]);T!=null&&f(s,["seed"],T);const C=d(e,["responseMimeType"]);C!=null&&f(s,["responseMimeType"],C);const k=d(e,["responseSchema"]);k!=null&&f(s,["responseSchema"],Qc(k));const R=d(e,["responseJsonSchema"]);R!=null&&f(s,["responseJsonSchema"],R);const P=d(e,["routingConfig"]);P!=null&&f(s,["routingConfig"],P);const L=d(e,["modelSelectionConfig"]);L!=null&&f(s,["modelConfig"],L);const U=d(e,["safetySettings"]);if(t!==void 0&&U!=null){let G=U;Array.isArray(G)&&(G=G.map(ne=>ne)),f(t,["safetySettings"],G)}const F=d(e,["tools"]);if(t!==void 0&&F!=null){let G=hr(F);Array.isArray(G)&&(G=G.map(ne=>sy(dr(ne)))),f(t,["tools"],G)}const I=d(e,["toolConfig"]);t!==void 0&&I!=null&&f(t,["toolConfig"],I);const _=d(e,["labels"]);t!==void 0&&_!=null&&f(t,["labels"],_);const w=d(e,["cachedContent"]);t!==void 0&&w!=null&&f(t,["cachedContent"],hn(n,w));const S=d(e,["responseModalities"]);S!=null&&f(s,["responseModalities"],S);const N=d(e,["mediaResolution"]);N!=null&&f(s,["mediaResolution"],N);const D=d(e,["speechConfig"]);D!=null&&f(s,["speechConfig"],ny(Xc(D)));const A=d(e,["audioTimestamp"]);A!=null&&f(s,["audioTimestamp"],A);const $=d(e,["thinkingConfig"]);$!=null&&f(s,["thinkingConfig"],$);const Q=d(e,["imageConfig"]);return Q!=null&&f(s,["imageConfig"],Q),s}function tm(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let o=wt(r);Array.isArray(o)&&(o=o.map(l=>ua(l))),f(t,["contents"],o)}const i=d(e,["config"]);return i!=null&&f(t,["generationConfig"],jR(n,i,t)),t}function nm(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["contents"]);if(r!=null){let o=wt(r);Array.isArray(o)&&(o=o.map(l=>l)),f(t,["contents"],o)}const i=d(e,["config"]);return i!=null&&f(t,["generationConfig"],FR(n,i,t)),t}function sm(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(u=>cR(u))),f(e,["candidates"],c)}const r=d(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const i=d(n,["promptFeedback"]);i!=null&&f(e,["promptFeedback"],i);const o=d(n,["responseId"]);o!=null&&f(e,["responseId"],o);const l=d(n,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function rm(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(m=>m)),f(e,["candidates"],u)}const r=d(n,["createTime"]);r!=null&&f(e,["createTime"],r);const i=d(n,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=d(n,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const l=d(n,["responseId"]);l!=null&&f(e,["responseId"],l);const c=d(n,["usageMetadata"]);return c!=null&&f(e,["usageMetadata"],c),e}function $R(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const i=d(n,["guidanceScale"]);if(e!==void 0&&i!=null&&f(e,["parameters","guidanceScale"],i),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&f(e,["parameters","includeSafetyAttributes"],c);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);const m=d(n,["language"]);e!==void 0&&m!=null&&f(e,["parameters","language"],m);const p=d(n,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const g=d(n,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=d(n,["imageSize"]);if(e!==void 0&&x!=null&&f(e,["parameters","sampleImageSize"],x),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function OR(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const l=d(n,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=d(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const g=d(n,["includeRaiReason"]);e!==void 0&&g!=null&&f(e,["parameters","includeRaiReason"],g);const x=d(n,["language"]);e!==void 0&&x!=null&&f(e,["parameters","language"],x);const b=d(n,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","compressionQuality"],T);const C=d(n,["addWatermark"]);e!==void 0&&C!=null&&f(e,["parameters","addWatermark"],C);const k=d(n,["labels"]);e!==void 0&&k!=null&&f(e,["labels"],k);const R=d(n,["imageSize"]);e!==void 0&&R!=null&&f(e,["parameters","sampleImageSize"],R);const P=d(n,["enhancePrompt"]);return e!==void 0&&P!=null&&f(e,["parameters","enhancePrompt"],P),t}function qR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);const i=d(e,["config"]);return i!=null&&$R(i,t),t}function BR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);const i=d(e,["config"]);return i!=null&&OR(i,t),t}function GR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>nP(o))),f(e,["generatedImages"],i)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],ey(r)),e}function HR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>da(o))),f(e,["generatedImages"],i)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],ty(r)),e}function zR(n,e){const t={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=d(n,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const o=d(n,["resolution"]);e!==void 0&&o!=null&&f(e,["parameters","resolution"],o);const l=d(n,["personGeneration"]);if(e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=d(n,["negativePrompt"]);e!==void 0&&c!=null&&f(e,["parameters","negativePrompt"],c);const u=d(n,["enhancePrompt"]);if(e!==void 0&&u!=null&&f(e,["parameters","enhancePrompt"],u),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=d(n,["lastFrame"]);e!==void 0&&m!=null&&f(e,["instances[0]","lastFrame"],ha(m));const p=d(n,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>HP(x))),f(e,["instances[0]","referenceImages"],g)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function WR(n,e){const t={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=d(n,["fps"]);e!==void 0&&i!=null&&f(e,["parameters","fps"],i);const o=d(n,["durationSeconds"]);e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o);const l=d(n,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const u=d(n,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=d(n,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const x=d(n,["enhancePrompt"]);e!==void 0&&x!=null&&f(e,["parameters","enhancePrompt"],x);const b=d(n,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const T=d(n,["lastFrame"]);e!==void 0&&T!=null&&f(e,["instances[0]","lastFrame"],Pt(T));const C=d(n,["referenceImages"]);if(e!==void 0&&C!=null){let P=C;Array.isArray(P)&&(P=P.map(L=>zP(L))),f(e,["instances[0]","referenceImages"],P)}const k=d(n,["mask"]);e!==void 0&&k!=null&&f(e,["instances[0]","mask"],GP(k));const R=d(n,["compressionQuality"]);return e!==void 0&&R!=null&&f(e,["parameters","compressionQuality"],R),t}function JR(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const i=d(n,["error"]);i!=null&&f(e,["error"],i);const o=d(n,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],XR(o)),e}function KR(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const i=d(n,["error"]);i!=null&&f(e,["error"],i);const o=d(n,["response"]);return o!=null&&f(e,["response"],ZR(o)),e}function YR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);const i=d(e,["image"]);i!=null&&f(t,["instances[0]","image"],ha(i));const o=d(e,["video"]);o!=null&&f(t,["instances[0]","video"],ry(o));const l=d(e,["source"]);l!=null&&eP(l,t);const c=d(e,["config"]);return c!=null&&zR(c,t),t}function QR(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["prompt"]);r!=null&&f(t,["instances[0]","prompt"],r);const i=d(e,["image"]);i!=null&&f(t,["instances[0]","image"],Pt(i));const o=d(e,["video"]);o!=null&&f(t,["instances[0]","video"],iy(o));const l=d(e,["source"]);l!=null&&tP(l,t);const c=d(e,["config"]);return c!=null&&WR(c,t),t}function XR(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>rP(o))),f(e,["generatedVideos"],i)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function ZR(n){const e={},t=d(n,["videos"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>iP(o))),f(e,["generatedVideos"],i)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function eP(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],ha(r));const i=d(n,["video"]);return e!==void 0&&i!=null&&f(e,["instances[0]","video"],ry(i)),t}function tP(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Pt(r));const i=d(n,["video"]);return e!==void 0&&i!=null&&f(e,["instances[0]","video"],iy(i)),t}function nP(n){const e={},t=d(n,["_self"]);t!=null&&f(e,["image"],dP(t));const s=d(n,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const r=d(n,["_self"]);return r!=null&&f(e,["safetyAttributes"],ey(r)),e}function da(n){const e={},t=d(n,["_self"]);t!=null&&f(e,["image"],Z0(t));const s=d(n,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const r=d(n,["_self"]);r!=null&&f(e,["safetyAttributes"],ty(r));const i=d(n,["prompt"]);return i!=null&&f(e,["enhancedPrompt"],i),e}function sP(n){const e={},t=d(n,["_self"]);t!=null&&f(e,["mask"],Z0(t));const s=d(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["labels"],r)}return e}function rP(n){const e={},t=d(n,["video"]);return t!=null&&f(e,["video"],qP(t)),e}function iP(n){const e={},t=d(n,["_self"]);return t!=null&&f(e,["video"],BP(t)),e}function oP(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&f(e,["modelConfig"],t);const s=d(n,["audioTimestamp"]);s!=null&&f(e,["audioTimestamp"],s);const r=d(n,["candidateCount"]);r!=null&&f(e,["candidateCount"],r);const i=d(n,["enableAffectiveDialog"]);i!=null&&f(e,["enableAffectiveDialog"],i);const o=d(n,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const l=d(n,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=d(n,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const u=d(n,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const m=d(n,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const p=d(n,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const g=d(n,["responseLogprobs"]);g!=null&&f(e,["responseLogprobs"],g);const x=d(n,["responseMimeType"]);x!=null&&f(e,["responseMimeType"],x);const b=d(n,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const T=d(n,["responseSchema"]);T!=null&&f(e,["responseSchema"],T);const C=d(n,["routingConfig"]);C!=null&&f(e,["routingConfig"],C);const k=d(n,["seed"]);k!=null&&f(e,["seed"],k);const R=d(n,["speechConfig"]);R!=null&&f(e,["speechConfig"],ny(R));const P=d(n,["stopSequences"]);P!=null&&f(e,["stopSequences"],P);const L=d(n,["temperature"]);L!=null&&f(e,["temperature"],L);const U=d(n,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const F=d(n,["topK"]);F!=null&&f(e,["topK"],F);const I=d(n,["topP"]);if(I!=null&&f(e,["topP"],I),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function aP(n,e){const t={},s=d(e,["model"]);return s!=null&&f(t,["_url","name"],we(n,s)),t}function lP(n,e){const t={},s=d(e,["model"]);return s!=null&&f(t,["_url","name"],we(n,s)),t}function cP(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function uP(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&f(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function dP(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&f(e,["imageBytes"],Hn(t));const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Z0(n){const e={},t=d(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],Hn(s));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function ha(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&f(e,["bytesBase64Encoded"],Hn(t));const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Pt(n){const e={},t=d(n,["gcsUri"]);t!=null&&f(e,["gcsUri"],t);const s=d(n,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Hn(s));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function hP(n,e,t){const s={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const i=d(e,["pageToken"]);t!==void 0&&i!=null&&f(t,["_query","pageToken"],i);const o=d(e,["filter"]);t!==void 0&&o!=null&&f(t,["_query","filter"],o);const l=d(e,["queryBase"]);return t!==void 0&&l!=null&&f(t,["_url","models_url"],H0(n,l)),s}function fP(n,e,t){const s={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const i=d(e,["pageToken"]);t!==void 0&&i!=null&&f(t,["_query","pageToken"],i);const o=d(e,["filter"]);t!==void 0&&o!=null&&f(t,["_query","filter"],o);const l=d(e,["queryBase"]);return t!==void 0&&l!=null&&f(t,["_url","models_url"],H0(n,l)),s}function mP(n,e){const t={},s=d(e,["config"]);return s!=null&&hP(n,s,t),t}function pP(n,e){const t={},s=d(e,["config"]);return s!=null&&fP(n,s,t),t}function gP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(n,["_self"]);if(r!=null){let i=z0(r);Array.isArray(i)&&(i=i.map(o=>jl(o))),f(e,["models"],i)}return e}function yP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=d(n,["_self"]);if(r!=null){let i=z0(r);Array.isArray(i)&&(i=i.map(o=>Fl(o))),f(e,["models"],i)}return e}function vP(n){const e={},t=d(n,["maskMode"]);t!=null&&f(e,["maskMode"],t);const s=d(n,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const r=d(n,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function jl(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["displayName"]);s!=null&&f(e,["displayName"],s);const r=d(n,["description"]);r!=null&&f(e,["description"],r);const i=d(n,["version"]);i!=null&&f(e,["version"],i);const o=d(n,["_self"]);o!=null&&f(e,["tunedModelInfo"],DP(o));const l=d(n,["inputTokenLimit"]);l!=null&&f(e,["inputTokenLimit"],l);const c=d(n,["outputTokenLimit"]);c!=null&&f(e,["outputTokenLimit"],c);const u=d(n,["supportedGenerationMethods"]);return u!=null&&f(e,["supportedActions"],u),e}function Fl(n){const e={},t=d(n,["name"]);t!=null&&f(e,["name"],t);const s=d(n,["displayName"]);s!=null&&f(e,["displayName"],s);const r=d(n,["description"]);r!=null&&f(e,["description"],r);const i=d(n,["versionId"]);i!=null&&f(e,["version"],i);const o=d(n,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>LR(g))),f(e,["endpoints"],p)}const l=d(n,["labels"]);l!=null&&f(e,["labels"],l);const c=d(n,["_self"]);c!=null&&f(e,["tunedModelInfo"],MP(c));const u=d(n,["defaultCheckpointId"]);u!=null&&f(e,["defaultCheckpointId"],u);const m=d(n,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>g)),f(e,["checkpoints"],p)}return e}function xP(n){const e={},t=d(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],t);const s=d(n,["thought"]);s!=null&&f(e,["thought"],s);const r=d(n,["inlineData"]);r!=null&&f(e,["inlineData"],lR(r));const i=d(n,["fileData"]);i!=null&&f(e,["fileData"],VR(i));const o=d(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const l=d(n,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=d(n,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const u=d(n,["executableCode"]);u!=null&&f(e,["executableCode"],u);const m=d(n,["functionResponse"]);m!=null&&f(e,["functionResponse"],m);const p=d(n,["text"]);return p!=null&&f(e,["text"],p),e}function _P(n){const e={},t=d(n,["productImage"]);return t!=null&&f(e,["image"],Pt(t)),e}function bP(n,e){const t={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","editConfig","baseSteps"],r);const i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=d(n,["seed"]);e!==void 0&&o!=null&&f(e,["parameters","seed"],o);const l=d(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const c=d(n,["personGeneration"]);e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c);const u=d(n,["addWatermark"]);e!==void 0&&u!=null&&f(e,["parameters","addWatermark"],u);const m=d(n,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);const p=d(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const g=d(n,["enhancePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g);const x=d(n,["labels"]);return e!==void 0&&x!=null&&f(e,["labels"],x),t}function wP(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["source"]);r!=null&&EP(r,t);const i=d(e,["config"]);return i!=null&&bP(i,t),t}function TP(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>da(r))),f(e,["generatedImages"],s)}return e}function EP(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const r=d(n,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],Pt(r));const i=d(n,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>_P(l))),f(e,["instances[0]","productImages"],o)}return t}function IP(n){const e={},t=d(n,["referenceImage"]);t!=null&&f(e,["referenceImage"],Pt(t));const s=d(n,["referenceId"]);s!=null&&f(e,["referenceId"],s);const r=d(n,["referenceType"]);r!=null&&f(e,["referenceType"],r);const i=d(n,["maskImageConfig"]);i!=null&&f(e,["maskImageConfig"],vP(i));const o=d(n,["controlImageConfig"]);o!=null&&f(e,["controlImageConfig"],pR(o));const l=d(n,["styleImageConfig"]);l!=null&&f(e,["styleImageConfig"],l);const c=d(n,["subjectImageConfig"]);return c!=null&&f(e,["subjectImageConfig"],c),e}function ey(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const r=d(n,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function ty(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&f(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const r=d(n,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function CP(n){const e={};if(d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=d(n,["category"]);t!=null&&f(e,["category"],t);const s=d(n,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function AP(n){const e={},t=d(n,["image"]);return t!=null&&f(e,["image"],Pt(t)),e}function SP(n,e){const t={},s=d(n,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&f(e,["parameters","maxPredictions"],r);const i=d(n,["confidenceThreshold"]);e!==void 0&&i!=null&&f(e,["parameters","confidenceThreshold"],i);const o=d(n,["maskDilation"]);e!==void 0&&o!=null&&f(e,["parameters","maskDilation"],o);const l=d(n,["binaryColorThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","binaryColorThreshold"],l);const c=d(n,["labels"]);return e!==void 0&&c!=null&&f(e,["labels"],c),t}function NP(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["source"]);r!=null&&PP(r,t);const i=d(e,["config"]);return i!=null&&SP(i,t),t}function RP(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>sP(r))),f(e,["generatedMasks"],s)}return e}function PP(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Pt(r));const i=d(n,["scribbleImage"]);return e!==void 0&&i!=null&&f(e,["instances[0]","scribble"],AP(i)),t}function ny(n){const e={},t=d(n,["voiceConfig"]);if(t!=null&&f(e,["voiceConfig"],t),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=d(n,["languageCode"]);return s!=null&&f(e,["languageCode"],s),e}function kP(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let u=t;Array.isArray(u)&&(u=u.map(m=>m)),f(e,["functionDeclarations"],u)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],uP(s));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=d(n,["googleMaps"]);i!=null&&f(e,["googleMaps"],cP(i));const o=d(n,["urlContext"]);o!=null&&f(e,["urlContext"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=d(n,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}function sy(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(g=>UR(g))),f(e,["functionDeclarations"],p)}const s=d(n,["retrieval"]);s!=null&&f(e,["retrieval"],s);const r=d(n,["googleSearch"]);r!=null&&f(e,["googleSearch"],r);const i=d(n,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(n,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const l=d(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=d(n,["urlContext"]);c!=null&&f(e,["urlContext"],c);const u=d(n,["computerUse"]);u!=null&&f(e,["computerUse"],u);const m=d(n,["codeExecution"]);return m!=null&&f(e,["codeExecution"],m),e}function DP(n){const e={},t=d(n,["baseModel"]);t!=null&&f(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&f(e,["createTime"],s);const r=d(n,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function MP(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&f(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&f(e,["createTime"],s);const r=d(n,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function LP(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=d(n,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const i=d(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&f(e,["defaultCheckpointId"],i),t}function VP(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=d(n,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const i=d(n,["defaultCheckpointId"]);return e!==void 0&&i!=null&&f(e,["defaultCheckpointId"],i),t}function UP(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","name"],we(n,s));const r=d(e,["config"]);return r!=null&&LP(r,t),t}function jP(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["config"]);return r!=null&&VP(r,t),t}function FP(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const r=d(n,["includeRaiReason"]);e!==void 0&&r!=null&&f(e,["parameters","includeRaiReason"],r);const i=d(n,["outputMimeType"]);e!==void 0&&i!=null&&f(e,["parameters","outputOptions","mimeType"],i);const o=d(n,["outputCompressionQuality"]);e!==void 0&&o!=null&&f(e,["parameters","outputOptions","compressionQuality"],o);const l=d(n,["enhanceInputImage"]);e!==void 0&&l!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],l);const c=d(n,["imagePreservationFactor"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const u=d(n,["labels"]);e!==void 0&&u!=null&&f(e,["labels"],u);const m=d(n,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const p=d(n,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),t}function $P(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["_url","model"],we(n,s));const r=d(e,["image"]);r!=null&&f(t,["instances[0]","image"],Pt(r));const i=d(e,["upscaleFactor"]);i!=null&&f(t,["parameters","upscaleConfig","upscaleFactor"],i);const o=d(e,["config"]);return o!=null&&FP(o,t),t}function OP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>da(i))),f(e,["generatedImages"],r)}return e}function qP(n){const e={},t=d(n,["uri"]);t!=null&&f(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&f(e,["videoBytes"],Hn(s));const r=d(n,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function BP(n){const e={},t=d(n,["gcsUri"]);t!=null&&f(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Hn(s));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function GP(n){const e={},t=d(n,["image"]);t!=null&&f(e,["_self"],Pt(t));const s=d(n,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function HP(n){const e={},t=d(n,["image"]);t!=null&&f(e,["image"],ha(t));const s=d(n,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function zP(n){const e={},t=d(n,["image"]);t!=null&&f(e,["image"],Pt(t));const s=d(n,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function ry(n){const e={},t=d(n,["uri"]);t!=null&&f(e,["uri"],t);const s=d(n,["videoBytes"]);s!=null&&f(e,["encodedVideo"],Hn(s));const r=d(n,["mimeType"]);return r!=null&&f(e,["encoding"],r),e}function iy(n){const e={},t=d(n,["uri"]);t!=null&&f(e,["gcsUri"],t);const s=d(n,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Hn(s));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WP="Content-Type",JP="X-Server-Timeout",KP="User-Agent",$l="x-goog-api-client",YP="1.27.0",QP=`google-genai-sdk/${YP}`,XP="v1beta1",ZP="v1beta",im=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ek{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:XP,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:ZP,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))r.searchParams.append(o,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(t))typeof i=="object"?s[r]=Object.assign(Object.assign({},s[r]),i):i!==void 0&&(s[r]=i);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const i=new AbortController,o=i.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const l=setTimeout(()=>i.abort(),t.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return t&&t.extraBody!==null&&tk(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await om(r),new Ll(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await om(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Gs(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield Ne(r.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=i.decode(c,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),x=g.status,b=g.code,T=`got status: ${x}. ${JSON.stringify(p)}`;if(b>=400&&b<600)throw new ca({message:T,status:b})}}catch(p){if(p.name==="ApiError")throw p}o+=u;let m=o.match(im);for(;m;){const p=m[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ne(new Ll(g)),o=o.slice(m[0].length),m=o.match(im)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=QP+" "+this.clientOptions.userAgentExtra;return e[KP]=t,e[$l]=t,e[WP]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))s.append(r,i);e.timeout&&e.timeout>0&&s.append(JP,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);r.sizeBytes=String(o.size);const l=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const c=await this.fetchUploadUrl(r,t);return i.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},o=await this.request({path:ee("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:r});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(s=o==null?void 0:o.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function om(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new ca({message:r,status:t}):new Error(r)}}function tk(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const i=JSON.parse(n.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))t=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(i,o){const l=Object.assign({},i);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const u=o[c],m=l[c];u&&typeof u=="object"&&!Array.isArray(u)&&m&&typeof m=="object"&&!Array.isArray(m)?l[c]=s(m,u):(m&&u&&typeof m!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof m}, New type: ${typeof u}. Overwriting.`),l[c]=u)}return l}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nk="mcp_used/unknown";let sk=!1;function oy(n){for(const e of n)if(rk(e)||typeof e=="object"&&"inputSchema"in e)return!0;return sk}function ay(n){var e;const t=(e=n[$l])!==null&&e!==void 0?e:"";n[$l]=(t+` ${nk}`).trimStart()}function rk(n){return n!==null&&typeof n=="object"&&n instanceof eu}function ik(n,e=100){return Gs(this,arguments,function*(){let s,r=0;for(;r<e;){const i=yield Ne(n.listTools({cursor:s}));for(const o of i.tools)yield yield Ne(o),r++;if(!i.nextCursor)break;s=i.nextCursor}})}class eu{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new eu(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const i={},o=[];for(const m of this.mcpClients)try{for(var l=!0,c=(t=void 0,Jr(ik(m))),u;u=await c.next(),e=u.done,!e;l=!0){r=u.value,l=!1;const p=r;o.push(p);const g=p.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=m}}catch(p){t={error:p}}finally{try{!l&&!e&&(s=c.return)&&await s.call(c)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),uS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await r.callTool({name:s.name,arguments:s.args},void 0,i);t.push({functionResponse:{name:s.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ok(n,e,t){const s=new nS;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class ak{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=uk(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let u=()=>{};const m=new Promise(P=>{u=P}),p=e.callbacks,g=function(){u({})},x=this.apiClient,b={onopen:g,onmessage:P=>{ok(x,p.onmessage,P)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(P){},onclose:(s=p==null?void 0:p.onclose)!==null&&s!==void 0?s:function(P){}},T=this.webSocketFactory.create(c,ck(o),b);T.connect(),await m;const R={setup:{model:we(this.apiClient,e.model)}};return T.send(JSON.stringify(R)),new lk(T,this.apiClient)}}class lk{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=ZN(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=XN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Us.PLAY)}pause(){this.sendPlaybackControl(Us.PAUSE)}stop(){this.sendPlaybackControl(Us.STOP)}resetContext(){this.sendPlaybackControl(Us.RESET_CONTEXT)}close(){this.conn.close()}}function ck(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function uk(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dk="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hk(n,e,t){const s=new tS;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const i=JSON.parse(r);if(n.isVertexAI()){const o=nR(i);Object.assign(s,o)}else Object.assign(s,i);e(s)}class fk{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new ak(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,i,o,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let m;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&oy(e.config.tools)&&ay(p);const g=yk(p);if(this.apiClient.isVertexAI())m=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,m);else{const w=this.apiClient.getApiKey();let S="BidiGenerateContent",N="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),S="BidiGenerateContentConstrained",N="access_token"),m=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${S}?${N}=${w}`}let x=()=>{};const b=new Promise(w=>{x=w}),T=e.callbacks,C=function(){var w;(w=T==null?void 0:T.onopen)===null||w===void 0||w.call(T),x({})},k=this.apiClient,R={onopen:C,onmessage:w=>{hk(k,T.onmessage,w)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(w){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(w){}},P=this.webSocketFactory.create(m,gk(g),R);P.connect(),await b;let L=we(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const w=this.apiClient.getProject(),S=this.apiClient.getLocation();L=`projects/${w}/locations/${S}/`+L}let U={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Do.AUDIO]}:e.config.responseModalities=[Do.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(l=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[],I=[];for(const w of F)if(this.isCallableTool(w)){const S=w;I.push(await S.tool())}else I.push(w);I.length>0&&(e.config.tools=I);const _={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=QN(this.apiClient,_):U=YN(this.apiClient,_),delete U.config,P.send(JSON.stringify(U)),new pk(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const mk={turnComplete:!0};class pk{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=wt(t.turns),e.isVertexAI()||(s=s.map(r=>ua(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(dk)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},mk),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:tR(e)}:t={realtimeInput:eR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function gk(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function yk(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const am=10;function lm(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Hs(o)){r=!0;break}if(!r)return!0;const i=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Hs(n){return"callTool"in n&&typeof n.callTool=="function"}function vk(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Hs(r)))!==null&&s!==void 0?s:!1}function xk(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!Hs(r)))!==null&&s!==void 0?s:!1}function cm(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _k extends As{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,i,o,l;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!vk(t)||lm(t.config))return await this.generateContentInternal(c);if(xk(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,m;const p=wt(c.contents),g=(i=(r=(s=c.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:am;let x=0;for(;x<g&&(u=await this.generateContentInternal(c),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,T=[];for(const C of(l=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(Hs(C)){const R=await C.callTool(u.functionCalls);T.push(...R)}x++,m={role:"user",parts:T},c.contents=wt(c.contents),c.contents.push(b),c.contents.push(m),cm(c.config)&&(p.push(b),p.push(m))}return cm(c.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),lm(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let i;const o=[];if(s!=null&&s.generatedImages)for(const c of s.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:o.push(c);let l;return i?l={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:s.sdkHttpResponse}:l={generatedImages:o,sdkHttpResponse:s.sdkHttpResponse},l}),this.list=async t=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Ci(xs.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,i,o,l,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((o=(i=t.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const i=(t=e.config)===null||t===void 0?void 0:t.tools;if(!i)return e;const o=await Promise.all(i.map(async c=>Hs(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(l.config.tools=o,e.config&&e.config.tools&&oy(e.config.tools)){const c=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),ay(u),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return l}async initAfcToolsMap(e){var t,s,r;const i=new Map;for(const o of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Hs(o)){const l=o,c=await l.tool();for(const u of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(i.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);i.set(u.name,l)}}return i}async processAfcStream(e){var t,s,r;const i=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:am;let o=!1,l=0;const c=await this.initAfcToolsMap(e);return function(u,m,p){var g,x;return Gs(this,arguments,function*(){for(var b,T,C,k;l<i;){o&&(l++,o=!1);const U=yield Ne(u.processParamsMaybeAddMcpUsage(p)),F=yield Ne(u.generateContentStreamInternal(U)),I=[],_=[];try{for(var R=!0,P=(T=void 0,Jr(F)),L;L=yield Ne(P.next()),b=L.done,!b;R=!0){k=L.value,R=!1;const w=k;if(yield yield Ne(w),w.candidates&&(!((g=w.candidates[0])===null||g===void 0)&&g.content)){_.push(w.candidates[0].content);for(const S of(x=w.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(l<i&&S.functionCall){if(!S.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(S.functionCall.name)){const N=yield Ne(m.get(S.functionCall.name).callTool([S.functionCall]));I.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${S.functionCall.name}`)}}}}catch(w){T={error:w}}finally{try{!R&&!b&&(C=P.return)&&(yield Ne(C.call(P)))}finally{if(T)throw T.error}}if(I.length>0){o=!0;const w=new Mr;w.candidates=[{content:{role:"user",parts:I}}],yield yield Ne(w);const S=[];S.push(..._),S.push({role:"user",parts:I});const N=wt(p.contents).concat(S);p.contents=N}else break}})}(this,c,e)}async generateContentInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=nm(this.apiClient,e);return l=ee("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=rm(m),g=new Mr;return Object.assign(g,p),g})}else{const u=tm(this.apiClient,e);return l=ee("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=sm(m),g=new Mr;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=nm(this.apiClient,e);return l=ee("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Gs(this,arguments,function*(){var g,x,b,T;try{for(var C=!0,k=Jr(p),R;R=yield Ne(k.next()),g=R.done,!g;C=!0){T=R.value,C=!1;const P=T,L=rm(yield Ne(P.json()));L.sdkHttpResponse={headers:P.headers};const U=new Mr;Object.assign(U,L),yield yield Ne(U)}}catch(P){x={error:P}}finally{try{!C&&!g&&(b=k.return)&&(yield Ne(b.call(k)))}finally{if(x)throw x.error}}})})}else{const u=tm(this.apiClient,e);return l=ee("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return Gs(this,arguments,function*(){var g,x,b,T;try{for(var C=!0,k=Jr(p),R;R=yield Ne(k.next()),g=R.done,!g;C=!0){T=R.value,C=!1;const P=T,L=sm(yield Ne(P.json()));L.sdkHttpResponse={headers:P.headers};const U=new Mr;Object.assign(U,L),yield yield Ne(U)}}catch(P){x={error:P}}finally{try{!C&&!g&&(b=k.return)&&(yield Ne(b.call(k)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=kR(this.apiClient,e);return l=ee("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=MR(m),g=new Ff;return Object.assign(g,p),g})}else{const u=PR(this.apiClient,e);return l=ee("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=DR(m),g=new Ff;return Object.assign(g,p),g})}}async generateImagesInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=BR(this.apiClient,e);return l=ee("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=HR(m),g=new $f;return Object.assign(g,p),g})}else{const u=qR(this.apiClient,e);return l=ee("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=GR(m),g=new $f;return Object.assign(g,p),g})}}async editImageInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const l=AR(this.apiClient,e);return i=ee("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(u=>{const m=u;return m.sdkHttpResponse={headers:c.headers},m})),r.then(c=>{const u=SR(c),m=new WA;return Object.assign(m,u),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const l=$P(this.apiClient,e);return i=ee("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(u=>{const m=u;return m.sdkHttpResponse={headers:c.headers},m})),r.then(c=>{const u=OP(c),m=new JA;return Object.assign(m,u),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const l=wP(this.apiClient,e);return i=ee("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r.then(c=>{const u=TP(c),m=new KA;return Object.assign(m,u),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const l=NP(this.apiClient,e);return i=ee("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r.then(c=>{const u=RP(c),m=new YA;return Object.assign(m,u),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=lP(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Fl(m))}else{const u=aP(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>jl(m))}}async listInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=pP(this.apiClient,e);return l=ee("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=yP(m),g=new Of;return Object.assign(g,p),g})}else{const u=mP(this.apiClient,e);return l=ee("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=gP(m),g=new Of;return Object.assign(g,p),g})}}async update(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=jP(this.apiClient,e);return l=ee("{model}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Fl(m))}else{const u=UP(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>jl(m))}}async delete(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=TR(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=IR(m),g=new qf;return Object.assign(g,p),g})}else{const u=wR(this.apiClient,e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=ER(m),g=new qf;return Object.assign(g,p),g})}}async countTokens(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=xR(this.apiClient,e);return l=ee("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=bR(m),g=new Bf;return Object.assign(g,p),g})}else{const u=vR(this.apiClient,e);return l=ee("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=_R(m),g=new Bf;return Object.assign(g,p),g})}}async computeTokens(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const l=dR(this.apiClient,e);return i=ee("{model}:computeTokens",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(u=>{const m=u;return m.sdkHttpResponse={headers:c.headers},m})),r.then(c=>{const u=hR(c),m=new QA;return Object.assign(m,u),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=QR(this.apiClient,e);return l=ee("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const p=KR(m),g=new Mo;return Object.assign(g,p),g})}else{const u=YR(this.apiClient,e);return l=ee("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=JR(m),g=new Mo;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bk extends As{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:i}});return t._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:i}});return t._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=GA(e);return l=ee("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o}else{const u=BA(e);return l=ee("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}}async fetchPredictVideosOperationInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const l=VA(e);return i=ee("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wk(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&f(e,["data"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Tk(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>Pk(i))),f(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&f(e,["role"],s),e}function Ek(n,e,t){const s={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const i=d(e,["newSessionExpireTime"]);t!==void 0&&i!=null&&f(t,["newSessionExpireTime"],i);const o=d(e,["uses"]);t!==void 0&&o!=null&&f(t,["uses"],o);const l=d(e,["liveConnectConstraints"]);t!==void 0&&l!=null&&f(t,["bidiGenerateContentSetup"],Rk(n,l));const c=d(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&f(t,["fieldMask"],c),s}function Ik(n,e){const t={},s=d(e,["config"]);return s!=null&&f(t,["config"],Ek(n,s,t)),t}function Ck(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Ak(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function Sk(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&f(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nk(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const i=d(n,["temperature"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","temperature"],i);const o=d(n,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const l=d(n,["topK"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topK"],l);const c=d(n,["maxOutputTokens"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","maxOutputTokens"],c);const u=d(n,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const m=d(n,["seed"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","seed"],m);const p=d(n,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Zc(p));const g=d(n,["thinkingConfig"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","thinkingConfig"],g);const x=d(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],x);const b=d(n,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],Tk(it(b)));const T=d(n,["tools"]);if(e!==void 0&&T!=null){let F=hr(T);Array.isArray(F)&&(F=F.map(I=>Dk(dr(I)))),f(e,["setup","tools"],F)}const C=d(n,["sessionResumption"]);e!==void 0&&C!=null&&f(e,["setup","sessionResumption"],kk(C));const k=d(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);const R=d(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","outputAudioTranscription"],R);const P=d(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&f(e,["setup","realtimeInputConfig"],P);const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const U=d(n,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),t}function Rk(n,e){const t={},s=d(e,["model"]);s!=null&&f(t,["setup","model"],we(n,s));const r=d(e,["config"]);return r!=null&&f(t,["config"],Nk(r,t)),t}function Pk(n){const e={},t=d(n,["videoMetadata"]);t!=null&&f(e,["videoMetadata"],t);const s=d(n,["thought"]);s!=null&&f(e,["thought"],s);const r=d(n,["inlineData"]);r!=null&&f(e,["inlineData"],wk(r));const i=d(n,["fileData"]);i!=null&&f(e,["fileData"],Ck(i));const o=d(n,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const l=d(n,["functionCall"]);l!=null&&f(e,["functionCall"],l);const c=d(n,["codeExecutionResult"]);c!=null&&f(e,["codeExecutionResult"],c);const u=d(n,["executableCode"]);u!=null&&f(e,["executableCode"],u);const m=d(n,["functionResponse"]);m!=null&&f(e,["functionResponse"],m);const p=d(n,["text"]);return p!=null&&f(e,["text"],p),e}function kk(n){const e={},t=d(n,["handle"]);if(t!=null&&f(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Dk(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let u=t;Array.isArray(u)&&(u=u.map(m=>m)),f(e,["functionDeclarations"],u)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearch"]);s!=null&&f(e,["googleSearch"],Sk(s));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&f(e,["googleSearchRetrieval"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=d(n,["googleMaps"]);i!=null&&f(e,["googleMaps"],Ak(i));const o=d(n,["urlContext"]);o!=null&&f(e,["urlContext"],o);const l=d(n,["computerUse"]);l!=null&&f(e,["computerUse"],l);const c=d(n,["codeExecution"]);return c!=null&&f(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mk(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(i=>`${t}.${i}`);e.push(...r)}else e.push(t)}return e.join(",")}function Lk(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const i=s.setup;typeof i=="object"&&i!==null?(n.bidiGenerateContentSetup=i,t=i):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const i=Mk(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?n.fieldMask=i:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(u=>o.includes(u)?`generationConfig.${u}`:u));const c=[];i&&c.push(i),l.length>0&&c.push(...l),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Vk extends As{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=Ik(this.apiClient,e);i=ee("auth_tokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query;const c=Lk(l,e.config);return r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uk(n,e){const t={},s=d(n,["name"]);return s!=null&&f(t,["_url","name"],s),t}function jk(n,e){const t={},s=d(n,["name"]);return s!=null&&f(t,["_url","name"],s),t}function Fk(n,e,t){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=d(n,["epochCount"]);e!==void 0&&i!=null&&f(e,["tuningTask","hyperparameters","epochCount"],i);const o=d(n,["learningRateMultiplier"]);if(o!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],o),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=d(n,["batchSize"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","batchSize"],l);const c=d(n,["learningRate"]);if(e!==void 0&&c!=null&&f(e,["tuningTask","hyperparameters","learningRate"],c),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return s}function $k(n,e,t){const s={},r=d(n,["validationDataset"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec"],tD(r));const i=d(n,["tunedModelDisplayName"]);e!==void 0&&i!=null&&f(e,["tunedModelDisplayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const l=d(n,["epochCount"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=d(n,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const m=d(n,["adapterSize"]);if(e!==void 0&&m!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=d(n,["labels"]);return e!==void 0&&p!=null&&f(e,["labels"],p),s}function Ok(n,e){const t={},s=d(n,["baseModel"]);s!=null&&f(t,["baseModel"],s);const r=d(n,["preTunedModel"]);r!=null&&f(t,["preTunedModel"],r);const i=d(n,["trainingDataset"]);i!=null&&f(t,["tuningTask","trainingData"],Xk(i));const o=d(n,["config"]);return o!=null&&Fk(o,t),t}function qk(n,e){const t={},s=d(n,["baseModel"]);s!=null&&f(t,["baseModel"],s);const r=d(n,["preTunedModel"]);r!=null&&f(t,["preTunedModel"],r);const i=d(n,["trainingDataset"]);i!=null&&Zk(i,t);const o=d(n,["config"]);return o!=null&&$k(o,t),t}function Bk(n,e){const t={},s=d(n,["name"]);return s!=null&&f(t,["_url","name"],s),t}function Gk(n,e){const t={},s=d(n,["name"]);return s!=null&&f(t,["_url","name"],s),t}function Hk(n,e,t){const s={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=d(n,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const o=d(n,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),s}function zk(n,e,t){const s={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=d(n,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const o=d(n,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),s}function Wk(n,e){const t={},s=d(n,["config"]);return s!=null&&Hk(s,t),t}function Jk(n,e){const t={},s=d(n,["config"]);return s!=null&&zk(s,t),t}function Kk(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&f(t,["sdkHttpResponse"],s);const r=d(n,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=d(n,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>ly(l))),f(t,["tuningJobs"],o)}return t}function Yk(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&f(t,["sdkHttpResponse"],s);const r=d(n,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const i=d(n,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Ol(l))),f(t,["tuningJobs"],o)}return t}function Qk(n,e){const t={},s=d(n,["name"]);s!=null&&f(t,["model"],s);const r=d(n,["name"]);return r!=null&&f(t,["endpoint"],r),t}function Xk(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(i=>i)),f(t,["examples","examples"],r)}return t}function Zk(n,e,t){const s={},r=d(n,["gcsUri"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=d(n,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function ly(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&f(t,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&f(t,["name"],r);const i=d(n,["state"]);i!=null&&f(t,["state"],B0(i));const o=d(n,["createTime"]);o!=null&&f(t,["createTime"],o);const l=d(n,["tuningTask","startTime"]);l!=null&&f(t,["startTime"],l);const c=d(n,["tuningTask","completeTime"]);c!=null&&f(t,["endTime"],c);const u=d(n,["updateTime"]);u!=null&&f(t,["updateTime"],u);const m=d(n,["description"]);m!=null&&f(t,["description"],m);const p=d(n,["baseModel"]);p!=null&&f(t,["baseModel"],p);const g=d(n,["_self"]);return g!=null&&f(t,["tunedModel"],Qk(g)),t}function Ol(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&f(t,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&f(t,["name"],r);const i=d(n,["state"]);i!=null&&f(t,["state"],B0(i));const o=d(n,["createTime"]);o!=null&&f(t,["createTime"],o);const l=d(n,["startTime"]);l!=null&&f(t,["startTime"],l);const c=d(n,["endTime"]);c!=null&&f(t,["endTime"],c);const u=d(n,["updateTime"]);u!=null&&f(t,["updateTime"],u);const m=d(n,["error"]);m!=null&&f(t,["error"],m);const p=d(n,["description"]);p!=null&&f(t,["description"],p);const g=d(n,["baseModel"]);g!=null&&f(t,["baseModel"],g);const x=d(n,["tunedModel"]);x!=null&&f(t,["tunedModel"],x);const b=d(n,["preTunedModel"]);b!=null&&f(t,["preTunedModel"],b);const T=d(n,["supervisedTuningSpec"]);T!=null&&f(t,["supervisedTuningSpec"],T);const C=d(n,["tuningDataStats"]);C!=null&&f(t,["tuningDataStats"],C);const k=d(n,["encryptionSpec"]);k!=null&&f(t,["encryptionSpec"],k);const R=d(n,["partnerModelTuningSpec"]);R!=null&&f(t,["partnerModelTuningSpec"],R);const P=d(n,["customBaseModel"]);P!=null&&f(t,["customBaseModel"],P);const L=d(n,["experiment"]);L!=null&&f(t,["experiment"],L);const U=d(n,["labels"]);U!=null&&f(t,["labels"],U);const F=d(n,["outputUri"]);F!=null&&f(t,["outputUri"],F);const I=d(n,["pipelineJob"]);I!=null&&f(t,["pipelineJob"],I);const _=d(n,["serviceAccount"]);_!=null&&f(t,["serviceAccount"],_);const w=d(n,["tunedModelDisplayName"]);w!=null&&f(t,["tunedModelDisplayName"],w);const S=d(n,["veoTuningSpec"]);return S!=null&&f(t,["veoTuningSpec"],S),t}function eD(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&f(t,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&f(t,["name"],r);const i=d(n,["metadata"]);i!=null&&f(t,["metadata"],i);const o=d(n,["done"]);o!=null&&f(t,["done"],o);const l=d(n,["error"]);return l!=null&&f(t,["error"],l),t}function tD(n,e){const t={},s=d(n,["gcsUri"]);s!=null&&f(t,["validationDatasetUri"],s);const r=d(n,["vertexDatasetResource"]);return r!=null&&f(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nD extends As{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Ci(xs.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},t),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Ml.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Gk(e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>Ol(m))}else{const u=Bk(e);return l=ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>ly(m))}}async listInternal(e){var t,s,r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Jk(e);return l=ee("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=Yk(m),g=new Gf;return Object.assign(g,p),g})}else{const u=Wk(e);return l=ee("tunedModels",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=Kk(m),g=new Gf;return Object.assign(g,p),g})}}async cancel(e){var t,s,r,i;let o="",l={};if(this.apiClient.isVertexAI()){const c=jk(e);o=ee("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const c=Uk(e);o=ee("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI()){const l=qk(e);return i=ee("tuningJobs",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(u=>{const m=u;return m.sdkHttpResponse={headers:c.headers},m})),r.then(c=>Ol(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Ok(e);return i=ee("tunedModels",l._url),o=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(u=>{const m=u;return m.sdkHttpResponse={headers:c.headers},m})),r.then(c=>eD(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const rD=1024*1024*8,iD=3,oD=1e3,aD=2,el="x-goog-upload-status";async function lD(n,e,t){var s,r,i;let o=0,l=0,c=new Ll(new Response),u="upload";for(o=n.size;l<o;){const p=Math.min(rD,o-l),g=n.slice(l,l+p);l+p>=o&&(u+=", finalize");let x=0,b=oD;for(;x<iD&&(c=await t.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((s=c==null?void 0:c.headers)===null||s===void 0)&&s[el]));)x++,await uD(b),b=b*aD;if(l+=p,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[el])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(c==null?void 0:c.json());if(((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[el])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function cD(n){return{size:n.size,type:n.type}}function uD(n){return new Promise(e=>setTimeout(e,n))}class dD{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lD(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hD{create(e,t,s){return new fD(e,t,s)}}class fD{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const um="x-goog-api-key";class mD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(um)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(um,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pD="gl-node/";class gD{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=MA(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new mD(this.apiKey);this.apiClient=new ek({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:pD+"web",uploader:new dD,downloader:new sD}),this.models=new _k(this.apiClient),this.live=new fk(this.apiClient,r,new hD),this.batches=new ZS(this.apiClient),this.chats=new PN(this.models,this.apiClient),this.caches=new SN(this.apiClient),this.files=new ON(this.apiClient),this.operations=new bk(this.apiClient),this.authTokens=new Vk(this.apiClient),this.tunings=new nD(this.apiClient)}}class yD{constructor(){const e="AIzaSyAncE2TfOjhaU8SxlijCUg7mTD7GoS2oho";this.ai=new gD({apiKey:e}),this.model="gemini-2.5-flash-preview-09-2025"}async generateGamifiedContent(e,t){const r={maxOutputTokens:65535,temperature:.8,topP:.95,seed:0,safetySettings:[{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"OFF"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"OFF"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"OFF"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"OFF"}],systemInstruction:{parts:[{text:`You are an instructional designer specializing in gamified learning. Your task is to create an engaging game or activity that encourages active participation and reinforces learning objectives for a video.

      Create a gamified learning experience based on the video content. The game should:
      1. Be interactive and engaging
      2. Reinforce key learning objectives from the video
      3. Encourage active participation
      4. Be appropriate for the topic and skill level
      5. Include clear instructions and feedback

      Return your response as a JSON object with the following structure:
      {
        "title": "Game Title",
        "description": "Brief description of the game",
        "type": "quiz|scenario|interactive|challenge",
        "questions": [
          {
            "id": "q1",
            "question": "Question text",
            "options": ["Option 1", "Option 2", "Option 3", "Option 4"],
            "correctAnswer": 0,
            "explanation": "Why this answer is correct"
          }
        ],
        "scenarios": [
          {
            "id": "s1",
            "title": "Scenario Title",
            "description": "Scenario description",
            "choices": [
              {
                "id": "c1",
                "text": "Choice text",
                "isCorrect": true,
                "feedback": "Feedback for this choice"
              }
            ]
          }
        ],
        "instructions": "How to play the game",
        "learningObjectives": ["Objective 1", "Objective 2"]
      }`}]}},i=`Create an interactive learning game for a video titled "${e}" about "${t}". 
    
    Design a scenario-based quiz game that:
    - Presents real-world situations related to the video content
    - Tests practical application of concepts from the video
    - Provides immediate feedback with explanations
    - Uses engaging, interactive scenarios
    - Focuses on practical skills learners can apply

    Create 3-4 scenario-based questions that test understanding of the video content. Each question should:
    - Present a realistic situation
    - Test application of video concepts
    - Have 4 multiple choice options
    - Include detailed explanations for the correct answer

    IMPORTANT: Return ONLY a valid JSON object. Do not include any text before or after the JSON. The JSON must follow this exact structure:
    {
      "title": "Interactive Game Title",
      "description": "Brief description of the interactive game",
      "type": "quiz",
      "questions": [
        {
          "id": "q1",
          "question": "Realistic scenario question based on video content",
          "options": ["Option 1", "Option 2", "Option 3", "Option 4"],
          "correctAnswer": 0,
          "explanation": "Detailed explanation of why this answer is correct and how it relates to the video"
        }
      ],
      "instructions": "Clear instructions on how to play the interactive game",
      "learningObjectives": ["Specific objective 1", "Specific objective 2", "Specific objective 3"]
    }`;try{const o={model:this.model,contents:[{parts:[{text:i}]}],config:r},c=(await this.ai.models.generateContent(o)).text;console.log("Raw AI response:",c);let u=c.trim();u.startsWith("```json")?u=u.replace(/^```json\s*/,"").replace(/\s*```$/,""):u.startsWith("```")&&(u=u.replace(/^```\s*/,"").replace(/\s*```$/,""));const m=u.match(/\{[\s\S]*\}/);m&&(u=m[0]),console.log("Cleaned JSON content:",u);const p=JSON.parse(u);if(!p.title||!p.questions||!Array.isArray(p.questions))throw new Error("Invalid game content structure");return p}catch(o){return console.error("Error generating gamified content:",o),{title:`Learning Quiz: ${t}`,description:`Test your understanding of ${t} concepts with this interactive quiz.`,type:"quiz",questions:[{id:"q1",question:`What is the most important aspect of ${t}?`,options:["Understanding the basics","Practical application","Theoretical knowledge","All of the above"],correctAnswer:3,explanation:"All aspects are important for mastering this topic."},{id:"q2",question:`How can you improve your ${t} skills?`,options:["Practice regularly","Study theory only","Watch videos only","Ignore feedback"],correctAnswer:0,explanation:"Regular practice is essential for skill development."}],instructions:"Answer the questions based on what you learned from the video. Select the best answer for each question.",learningObjectives:[`Understand key concepts of ${t}`,`Apply ${t} principles in practice`,`Identify important aspects of ${t}`]}}}}const vD=({videoTitle:n,videoTopic:e})=>{const{isDarkMode:t}=De(),[s,r]=V.useState(null),[i,o]=V.useState(!1),[l,c]=V.useState(null),[u,m]=V.useState(0),[p,g]=V.useState({}),[x,b]=V.useState(!1),[T,C]=V.useState(0),[k,R]=V.useState(!1),[P,L]=V.useState(null),[U,F]=V.useState(!1),[I,_]=V.useState(!1),w=async()=>{try{o(!0),c(null);const G="AIzaSyAncE2TfOjhaU8SxlijCUg7mTD7GoS2oho",de=await new yD().generateGamifiedContent(n,e);r(de),R(!0),_(!1),m(0),L(null),F(!1),g({}),b(!1)}catch(G){const ne=G instanceof Error?G.message:"Failed to generate game content. Please try again.";c(ne),console.error("Error generating game:",G);const de=S();r(de),R(!0),_(!1),m(0),L(null),F(!1),g({}),b(!1)}finally{o(!1)}},S=()=>({title:`Interactive ${e} Challenge`,description:`Test your understanding of ${e} with this interactive scenario-based game.`,type:"quiz",questions:[{id:"q1",question:`In a conversation about ${e}, what should you do first?`,options:["Start talking immediately","Listen actively and show engagement","Check your phone","Interrupt with your own story"],correctAnswer:1,explanation:"Active listening requires full attention and engagement with the speaker."},{id:"q2",question:`When someone is explaining a problem related to ${e}, you should:`,options:["Jump to solutions immediately","Ask clarifying questions first","Change the subject","Give advice without listening"],correctAnswer:1,explanation:"Asking clarifying questions shows you are truly listening and understanding."},{id:"q3",question:`What is the most important aspect of ${e}?`,options:["Being the loudest voice","Understanding others' perspectives","Always being right","Talking more than listening"],correctAnswer:1,explanation:"Understanding others' perspectives is key to effective communication."}],instructions:"Read each scenario carefully and choose the response that best demonstrates active listening principles.",learningObjectives:[`Apply ${e} principles in real conversations`,"Develop active listening skills","Practice empathy and understanding"]}),N=G=>{if(U||!s||!s.questions)return;const ne=s.questions[u];L(G),F(!0),g(de=>({...de,[ne.id]:G}))},D=()=>{var G;if(s&&u<s.questions.length-1)m(ne=>ne+1),L(null),F(!1);else{let ne=0;(G=s.questions)==null||G.forEach(de=>{p[de.id]===de.correctAnswer&&ne++}),C(ne),b(!0)}},A=()=>{r(null),m(0),g({}),b(!1),C(0),R(!1),_(!1),L(null),F(!1)},$=G=>G>=80?"text-green-500":G>=60?"text-yellow-500":"text-red-500",Q=G=>G>=80?"bg-green-100 dark:bg-green-900":G>=60?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900";return i?a.jsx("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),a.jsx("span",{className:`text-lg font-medium transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:"Creating your learning game..."})]})}):l?a.jsx("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(td,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),a.jsx("h3",{className:`text-lg font-semibold mb-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:"Error Creating Game"}),a.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ${t?"text-gray-400":"text-gray-600"}`,children:l}),l.includes("API key")&&a.jsx("div",{className:`p-3 rounded-lg mb-4 text-left transition-colors duration-300 ${t?"bg-yellow-900/20 border border-yellow-700":"bg-yellow-50 border border-yellow-200"}`,children:a.jsxs("p",{className:`text-xs transition-colors duration-300 ${t?"text-yellow-200":"text-yellow-800"}`,children:[a.jsx("strong",{children:"Setup Required:"})," Add your Google Cloud API key to the .env file:",a.jsx("br",{}),a.jsx("code",{className:"bg-gray-800 text-green-400 px-1 rounded",children:"VITE_GOOGLE_CLOUD_API_KEY=your_key_here"})]})}),a.jsx("button",{onClick:w,className:"px-4 py-2 rounded-lg font-medium transition-colors duration-300 bg-blue-600 text-white hover:bg-blue-700",children:"Try Again"})]})}):!s&&!k?a.jsx("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${t?"bg-blue-900":"bg-blue-100"}`,children:a.jsx(Ut,{size:32,className:"text-blue-600"})}),a.jsx("h3",{className:`text-xl font-bold mb-4 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:"Gamified Learning"}),a.jsx("p",{className:`text-sm mb-6 transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:"Generate an interactive learning game based on this video to reinforce your understanding."}),a.jsxs("button",{onClick:w,className:"inline-flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-colors duration-300 bg-blue-600 text-white hover:bg-blue-700",children:[a.jsx(Ut,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Learning Game"})]})]})}):x?a.jsx("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center ${Q(T)}`,children:a.jsx(cv,{className:`h-10 w-10 ${$(T)}`})}),a.jsx("h3",{className:`text-2xl font-bold mb-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:"Game Complete!"}),a.jsxs("div",{className:`text-4xl font-bold mb-4 ${$(T)}`,children:[T,"%"]}),a.jsx("p",{className:`text-sm mb-6 transition-colors duration-300 ${t?"text-gray-300":"text-gray-600"}`,children:T>=80?"Excellent work! You have a strong understanding of the concepts.":T>=60?"Good job! Review the explanations to improve further.":"Keep learning! Review the video and try the game again."}),a.jsx("div",{className:"flex space-x-3",children:a.jsxs("button",{onClick:A,className:`flex-1 inline-flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors duration-300 ${t?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[a.jsx(uv,{className:"h-4 w-4"}),a.jsx("span",{children:"Play Again"})]})})]})}):s?a.jsx("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:I?s.questions&&s.questions.length>0&&a.jsxs("div",{className:"space-y-6",children:[(()=>{const G=s.questions[u];return G?a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`p-6 rounded-xl transition-colors duration-300 ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${t?"bg-blue-900 text-blue-100":"bg-blue-100 text-blue-900"}`,children:u+1}),a.jsxs("h4",{className:`text-lg font-semibold transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:["Question ",u+1," of ",s.questions.length]})]}),a.jsx("p",{className:`text-base mb-4 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:G.question}),a.jsx("div",{className:"space-y-3",children:G.options.map((ne,de)=>{const z=P===de,X=G.correctAnswer===de,ie=U&&(z||X);return a.jsxs(J.button,{whileHover:U?{}:{scale:1.02},whileTap:U?{}:{scale:.98},onClick:()=>N(de),disabled:U,className:`w-full text-left flex items-center space-x-3 p-4 rounded-lg transition-all duration-300 ${z?U?X?"bg-green-100 text-green-900 border-2 border-green-500":"bg-red-100 text-red-900 border-2 border-red-500":"bg-blue-100 text-blue-900 border-2 border-blue-500":U&&X?"bg-green-50 text-green-800 border-2 border-green-300":t?"hover:bg-gray-600 border-2 border-transparent":"hover:bg-gray-100 border-2 border-transparent"} ${U?"cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${z?"border-blue-500 bg-blue-500":t?"border-gray-400":"border-gray-300"}`,children:z&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${z?U?X?"text-green-900":"text-red-900":"text-blue-900":U&&X?"text-green-800":t?"text-white":"text-gray-900"}`,children:ne}),ie&&a.jsx("div",{className:"ml-auto",children:X?a.jsx(It,{className:"h-5 w-5 text-green-600"}):z?a.jsx(td,{className:"h-5 w-5 text-red-600"}):null})]},de)})}),U&&a.jsxs(J.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},className:`mt-4 p-4 rounded-lg ${P===G.correctAnswer?t?"bg-green-900 text-green-100 border border-green-700":"bg-green-100 text-green-800 border border-green-300":t?"bg-red-900 text-red-100 border border-red-700":"bg-red-100 text-red-800 border border-red-300"}`,children:[a.jsx("p",{className:"font-semibold mb-2",children:P===G.correctAnswer?"âœ… Correct!":"âŒ Incorrect"}),a.jsx("p",{className:"text-sm",children:G.explanation})]})]},G.id):null})(),a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"flex justify-end",children:a.jsx("button",{onClick:D,disabled:!U,className:`px-6 py-3 rounded-lg font-medium transition-all duration-300 ${U?"bg-blue-600 text-white hover:bg-blue-700":t?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,children:u<s.questions.length-1?"Next Question â†’":"Submit Quiz ðŸŽ®"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[a.jsx("h3",{className:`text-2xl font-bold mb-4 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:s.title}),a.jsx("p",{className:`text-sm mb-6 transition-colors duration-300 ${t?"text-gray-300":"text-gray-700"}`,children:"Test your ability to apply core active listening techniques in realistic, professional, and personal situations. Choose the response that best demonstrates engagement, non-judgment, and understanding."})]}),s.learningObjectives&&s.learningObjectives.length>0&&a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`p-6 rounded-xl transition-colors duration-300 ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("h4",{className:`text-lg font-semibold mb-4 flex items-center space-x-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:[a.jsx(tr,{className:"h-5 w-5 text-blue-500"}),a.jsx("span",{children:"Learning Objectives"})]}),a.jsx("ul",{className:"space-y-2",children:s.learningObjectives.map((G,ne)=>a.jsxs("li",{className:`flex items-start space-x-2 text-sm transition-colors duration-300 ${t?"text-gray-300":"text-gray-700"}`,children:[a.jsx(cs,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:G})]},ne))})]}),a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"text-center",children:a.jsxs("button",{onClick:()=>_(!0),className:"inline-flex items-center space-x-2 px-8 py-4 rounded-lg font-medium transition-all duration-300 transform hover:scale-105 bg-green-600 text-white hover:bg-green-700",children:[a.jsx(Ut,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Quiz"})]})})]})}):null},xD=()=>{const n=He(),[e]=Lm(),{isDarkMode:t}=De(),s=e.get("videoId")||"",r=e.get("title")||"Video",i=e.get("skillId")||"communication",o=e.get("moduleId")||"active-listening",l=e.get("originalTopic")||"Active Listening",c=()=>{n(`/youtube-results?topic=${encodeURIComponent(l)}&skillId=${i}&moduleId=${o}`)};return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"w-full py-8",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"flex items-center justify-between mb-6 px-6",children:[a.jsxs(J.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8},onClick:c,className:`inline-flex items-center space-x-2 font-medium transition-colors duration-300 hover:opacity-70 ${t?"text-gray-300":"text-gray-700"}`,children:[a.jsx(us,{size:20}),a.jsx("span",{children:"Back to Results"})]}),a.jsx(J.h1,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.3},className:`text-lg lg:text-xl font-bold transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:r})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 px-6",children:[a.jsx(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:`lg:col-span-2 rounded-2xl p-8 transition-colors duration-300 ${t?"bg-gray-800":"bg-white"}`,children:s?a.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:a.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full rounded-lg",src:`https://www.youtube.com/embed/${s}?autoplay=1&rel=0&modestbranding=1&showinfo=0`,title:r,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):a.jsxs("div",{className:"text-center py-16",children:[a.jsx(Fm,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),a.jsx("h3",{className:`text-lg font-semibold mb-2 transition-colors duration-300 ${t?"text-white":"text-gray-900"}`,children:"Video Not Found"}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${t?"text-gray-400":"text-gray-600"}`,children:"The video could not be loaded. Please try again."})]})}),a.jsx(J.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.6},className:"lg:col-span-1 min-h-[400px]",children:a.jsx(vD,{videoTitle:r,videoTopic:l})})]})]})})},_D=()=>{const{isDarkMode:n}=De(),{courses:e,userProgress:t,enrolledCourses:s}=Ii(),{getTranslation:r}=ut(),{user:i,isAuthenticated:o}=Gt(),l=He();Vm.useEffect(()=>{o&&(i==null?void 0:i.userType)==="instructor"&&l("/instructor/dashboard")},[i,o,l]);const c=e.filter(b=>s.includes(b.id)),u=t.reduce((b,T)=>b+T.progress,0)/t.length||0,m=t.filter(b=>b.progress===100).length,p=c.reduce((b,T)=>{const C=parseInt(T.duration.split(" ")[0]);return b+C},0),g=[{type:"course",title:r("completeWebDevBootcamp"),action:r("completedLesson3"),time:`2 ${r("hoursAgo")}`},{type:"interview",title:r("mockInterviewPracticeActivity"),action:r("completedTechnicalInterview"),time:`1 ${r("dayAgo")}`},{type:"skill",title:r("communicationSkills"),action:r("completedActiveListening"),time:`2 ${r("daysAgo")}`},{type:"course",title:r("dataScienceWithPython"),action:r("startedLesson5"),time:`3 ${r("daysAgo")}`}],x=[{title:r("firstCourse"),description:r("completedFirstCourse"),icon:Oe,earned:!0},{title:r("interviewReady"),description:r("completed5MockInterviews"),icon:vt,earned:!0},{title:r("skillMaster"),description:r("completed3SoftSkillModules"),icon:Cn,earned:!1},{title:r("learningStreak"),description:`7 ${r("daysConsecutiveLearning")}`,icon:Ht,earned:!1}];return a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8",children:[a.jsx("h1",{className:`text-4xl lg:text-5xl font-bold mb-2 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("welcomeBack")}),a.jsx("p",{className:`text-lg transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:r("continueYourJourney")})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n?"bg-blue-900":"bg-blue-100"}`,children:a.jsx(Oe,{size:24,className:"text-blue-600"})}),a.jsx("span",{className:`text-2xl font-bold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:s.length})]}),a.jsx("h3",{className:`font-semibold mb-1 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("enrolledCourses")}),a.jsxs("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:[m," completed"]})]}),a.jsxs("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n?"bg-green-900":"bg-green-100"}`,children:a.jsx(Ht,{size:24,className:"text-green-600"})}),a.jsxs("span",{className:`text-2xl font-bold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:[Math.round(u),"%"]})]}),a.jsx("h3",{className:`font-semibold mb-1 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("overallProgress")}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:"Across all courses"})]}),a.jsxs("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n?"bg-purple-900":"bg-purple-100"}`,children:a.jsx(Tt,{size:24,className:"text-purple-600"})}),a.jsxs("span",{className:`text-2xl font-bold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:[p,"h"]})]}),a.jsx("h3",{className:`font-semibold mb-1 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("studyTime")}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:"Total learning hours"})]}),a.jsxs("div",{className:`rounded-2xl p-6 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n?"bg-orange-900":"bg-orange-100"}`,children:a.jsx(vt,{size:24,className:"text-orange-600"})}),a.jsx("span",{className:`text-2xl font-bold transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:x.filter(b=>b.earned).length})]}),a.jsx("h3",{className:`font-semibold mb-1 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("achievements")}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:"Badges earned"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:`rounded-2xl p-6 mb-8 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("h2",{className:`text-2xl font-bold mb-6 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:"Continue Learning"}),a.jsx("div",{className:"space-y-4",children:c.slice(0,3).map((b,T)=>{const C=t.find(R=>R.courseId===b.id),k=C?C.progress:0;return a.jsx("div",{className:`p-4 rounded-lg transition-all duration-300 hover:shadow-md ${n?"bg-gray-700":"bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(Oe,{size:24,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`font-semibold mb-1 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:b.title}),a.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:[b.instructor," â€¢ ",b.duration]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:`w-full h-2 rounded-full transition-colors duration-300 ${n?"bg-gray-600":"bg-gray-200"}`,children:a.jsx("div",{className:"h-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500",style:{width:`${k}%`}})})}),a.jsxs("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:[Math.round(k),"%"]})]})]}),a.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-colors duration-300 bg-blue-600 text-white hover:bg-blue-700",children:"Continue"})]})},b.id)})})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:`rounded-2xl p-6 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("h2",{className:`text-2xl font-bold mb-6 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("recentActivity")}),a.jsx("div",{className:"space-y-4",children:g.map((b,T)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${b.type==="course"?n?"bg-blue-900":"bg-blue-100":b.type==="interview"?n?"bg-green-900":"bg-green-100":n?"bg-purple-900":"bg-purple-100"}`,children:b.type==="course"?a.jsx(Oe,{size:20,className:"text-blue-600"}):b.type==="interview"?a.jsx(vt,{size:20,className:"text-green-600"}):a.jsx(Cn,{size:20,className:"text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:`font-medium transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:b.title}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:b.action})]}),a.jsx("span",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:b.time})]},T))})]})]}),a.jsxs("div",{className:"lg:col-span-1",children:[a.jsxs(J.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.8},className:`rounded-2xl p-6 mb-8 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("h2",{className:`text-xl font-bold mb-6 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("achievements")}),a.jsx("div",{className:"space-y-4",children:x.map((b,T)=>a.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg transition-colors duration-300 ${b.earned?n?"bg-green-900 bg-opacity-50":"bg-green-50":n?"bg-gray-700":"bg-gray-50"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${b.earned?"bg-green-500 text-white":n?"bg-gray-600":"bg-gray-300"}`,children:a.jsx(b.icon,{size:20})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:`font-medium transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:b.title}),a.jsx("p",{className:`text-sm transition-colors duration-300 ${n?"text-gray-400":"text-gray-500"}`,children:b.description})]}),b.earned&&a.jsx(It,{size:20,className:"text-green-500"})]},T))})]}),a.jsxs(J.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8,delay:1},className:`rounded-2xl p-6 transition-colors duration-300 ${n?"bg-gray-800":"bg-white"}`,children:[a.jsx("h2",{className:`text-xl font-bold mb-6 transition-colors duration-300 ${n?"text-white":"text-gray-900"}`,children:r("learningGoals")}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Complete 3 courses this month"}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"2/3"})]}),a.jsx("div",{className:`w-full h-2 rounded-full transition-colors duration-300 ${n?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:"h-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500",style:{width:"67%"}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Practice 5 mock interviews"}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"3/5"})]}),a.jsx("div",{className:`w-full h-2 rounded-full transition-colors duration-300 ${n?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:"h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all duration-500",style:{width:"60%"}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"Study 20 hours this week"}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${n?"text-gray-300":"text-gray-600"}`,children:"12/20h"})]}),a.jsx("div",{className:`w-full h-2 rounded-full transition-colors duration-300 ${n?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:"h-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-full transition-all duration-500",style:{width:"60%"}})})]})]})]})]})]})]})})};var dm;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(dm||(dm={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hm;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(hm||(hm={}));var fm;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(fm||(fm={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=["user","model","function","system"];var pm;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(pm||(pm={}));var gm;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(gm||(gm={}));var ym;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ym||(ym={}));var vm;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(vm||(vm={}));var Kr;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Kr||(Kr={}));var xm;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(xm||(xm={}));var _m;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(_m||(_m={}));var bm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(bm||(bm={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ks extends rt{constructor(e,t){super(e),this.response=t}}class cy extends rt{constructor(e,t,s,r){super(e),this.status=t,this.statusText=s,this.errorDetails=r}}class Pn extends rt{}class uy extends rt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="https://generativelanguage.googleapis.com",wD="v1beta",TD="0.24.1",ED="genai-js";var _s;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(_s||(_s={}));class ID{constructor(e,t,s,r,i){this.model=e,this.task=t,this.apiKey=s,this.stream=r,this.requestOptions=i}toString(){var e,t;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||wD;let i=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||bD}/${s}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function CD(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${ED}/${TD}`),e.join(" ")}async function AD(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",CD(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let s=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(r){throw new Pn(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${r.message}`)}for(const[r,i]of s.entries()){if(r==="x-goog-api-key")throw new Pn(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new Pn(`Header name ${r} can only be set using the apiClient field`);t.append(r,i)}}return t}async function SD(n,e,t,s,r,i){const o=new ID(n,e,t,s,i);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},kD(i)),{method:"POST",headers:await AD(o),body:r})}}async function Ai(n,e,t,s,r,i={},o=fetch){const{url:l,fetchOptions:c}=await SD(n,e,t,s,r,i);return ND(l,c,o)}async function ND(n,e,t=fetch){let s;try{s=await t(n,e)}catch(r){RD(r,n)}return s.ok||await PD(s,n),s}function RD(n,e){let t=n;throw t.name==="AbortError"?(t=new uy(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof cy||n instanceof Pn||(t=new rt(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function PD(n,e){let t="",s;try{const r=await n.json();t=r.error.message,r.error.details&&(t+=` ${JSON.stringify(r.error.details)}`,s=r.error.details)}catch{}throw new cy(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,s)}function kD(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),co(n.candidates[0]))throw new ks(`${_n(n)}`,n);return DD(n)}else if(n.promptFeedback)throw new ks(`Text not available. ${_n(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),co(n.candidates[0]))throw new ks(`${_n(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),wm(n)[0]}else if(n.promptFeedback)throw new ks(`Function call not available. ${_n(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),co(n.candidates[0]))throw new ks(`${_n(n)}`,n);return wm(n)}else if(n.promptFeedback)throw new ks(`Function call not available. ${_n(n)}`,n)},n}function DD(n){var e,t,s,r;const i=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||r===void 0?void 0:r.parts)o.text&&i.push(o.text),o.executableCode&&i.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&i.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function wm(n){var e,t,s,r;const i=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||r===void 0?void 0:r.parts)o.functionCall&&i.push(o.functionCall);if(i.length>0)return i}const MD=[Kr.RECITATION,Kr.SAFETY,Kr.LANGUAGE];function co(n){return!!n.finishReason&&MD.includes(n.finishReason)}function _n(n){var e,t,s;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((s=n.candidates)===null||s===void 0)&&s[0]){const i=n.candidates[0];co(i)&&(r+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(r+=`: ${i.finishMessage}`))}return r}function li(n){return this instanceof li?(this.v=n,this):new li(n)}function LD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(g){s[g]&&(r[g]=function(x){return new Promise(function(b,T){i.push([g,x,b,T])>1||l(g,x)})})}function l(g,x){try{c(s[g](x))}catch(b){p(i[0][3],b)}}function c(g){g.value instanceof li?Promise.resolve(g.value.v).then(u,m):p(i[0][2],g)}function u(g){l("next",g)}function m(g){l("throw",g)}function p(g,x){g(x),i.shift(),i.length&&l(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function VD(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=FD(e),[s,r]=t.tee();return{stream:jD(s),response:UD(r)}}async function UD(n){const e=[],t=n.getReader();for(;;){const{done:s,value:r}=await t.read();if(s)return tu($D(e));e.push(r)}}function jD(n){return LD(this,arguments,function*(){const t=n.getReader();for(;;){const{value:s,done:r}=yield li(t.read());if(r)break;yield yield li(tu(s))}})}function FD(n){const e=n.getReader();return new ReadableStream({start(s){let r="";return i();function i(){return e.read().then(({value:o,done:l})=>{if(l){if(r.trim()){s.error(new rt("Failed to parse stream"));return}s.close();return}r+=o;let c=r.match(Tm),u;for(;c;){try{u=JSON.parse(c[1])}catch{s.error(new rt(`Error parsing JSON response: "${c[1]}"`));return}s.enqueue(u),r=r.substring(c[0].length),c=r.match(Tm)}return i()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new uy("Request aborted when reading from the stream"):l=new rt("Error reading from the stream"),l})}}})}function $D(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const s of n){if(s.candidates){let r=0;for(const i of s.candidates)if(t.candidates||(t.candidates=[]),t.candidates[r]||(t.candidates[r]={index:r}),t.candidates[r].citationMetadata=i.citationMetadata,t.candidates[r].groundingMetadata=i.groundingMetadata,t.candidates[r].finishReason=i.finishReason,t.candidates[r].finishMessage=i.finishMessage,t.candidates[r].safetyRatings=i.safetyRatings,i.content&&i.content.parts){t.candidates[r].content||(t.candidates[r].content={role:i.content.role||"user",parts:[]});const o={};for(const l of i.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),t.candidates[r].content.parts.push(o)}r++}s.usageMetadata&&(t.usageMetadata=s.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dy(n,e,t,s){const r=await Ai(e,_s.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),s);return VD(r)}async function hy(n,e,t,s){const i=await(await Ai(e,_s.GENERATE_CONTENT,n,!1,JSON.stringify(t),s)).json();return{response:tu(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function ci(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return OD(e)}function OD(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let s=!1,r=!1;for(const i of n)"functionResponse"in i?(t.parts.push(i),r=!0):(e.parts.push(i),s=!0);if(s&&r)throw new rt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!r)throw new rt("No content is provided for sending chat message.");return s?e:t}function qD(n,e){var t;let s={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const r=n.generateContentRequest!=null;if(n.contents){if(r)throw new Pn("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=n.contents}else if(r)s=Object.assign(Object.assign({},s),n.generateContentRequest);else{const i=ci(n);s.contents=[i]}return{generateContentRequest:s}}function Em(n){let e;return n.contents?e=n:e={contents:[ci(n)]},n.systemInstruction&&(e.systemInstruction=fy(n.systemInstruction)),e}function BD(n){return typeof n=="string"||Array.isArray(n)?{content:ci(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],GD={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function HD(n){let e=!1;for(const t of n){const{role:s,parts:r}=t;if(!e&&s!=="user")throw new rt(`First content should be with role 'user', got ${s}`);if(!mm.includes(s))throw new rt(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(mm)}`);if(!Array.isArray(r))throw new rt("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new rt("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of r)for(const c of Im)c in l&&(i[c]+=1);const o=GD[s];for(const l of Im)if(!o.includes(l)&&i[l]>0)throw new rt(`Content with role '${s}' can't contain '${l}' part`);e=!0}}function Cm(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const s of t.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="SILENT_ERROR";class zD{constructor(e,t,s,r={}){this.model=t,this.params=s,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s!=null&&s.history&&(HD(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var s,r,i,o,l,c;await this._sendPromise;const u=ci(e),m={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),t);let g;return this._sendPromise=this._sendPromise.then(()=>hy(this._apiKey,this.model,m,p)).then(x=>{var b;if(Cm(x.response)){this._history.push(u);const T=Object.assign({parts:[],role:"model"},(b=x.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(T)}else{const T=_n(x.response);T&&console.warn(`sendMessage() was unsuccessful. ${T}. Inspect response object for details.`)}g=x}).catch(x=>{throw this._sendPromise=Promise.resolve(),x}),await this._sendPromise,g}async sendMessageStream(e,t={}){var s,r,i,o,l,c;await this._sendPromise;const u=ci(e),m={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),t),g=dy(this._apiKey,this.model,m,p);return this._sendPromise=this._sendPromise.then(()=>g).catch(x=>{throw new Error(Am)}).then(x=>x.response).then(x=>{if(Cm(x)){this._history.push(u);const b=Object.assign({},x.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=_n(x);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(x=>{x.message!==Am&&console.error(x)}),g}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(n,e,t,s){return(await Ai(e,_s.COUNT_TOKENS,n,!1,JSON.stringify(t),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(n,e,t,s){return(await Ai(e,_s.EMBED_CONTENT,n,!1,JSON.stringify(t),s)).json()}async function KD(n,e,t,s){const r=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await Ai(e,_s.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:r}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t,s={}){this.apiKey=e,this._requestOptions=s,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=fy(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var s;const r=Em(e),i=Object.assign(Object.assign({},this._requestOptions),t);return hy(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),i)}async generateContentStream(e,t={}){var s;const r=Em(e),i=Object.assign(Object.assign({},this._requestOptions),t);return dy(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),i)}startChat(e){var t;return new zD(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const s=qD(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return WD(this.apiKey,this.model,s,r)}async embedContent(e,t={}){const s=BD(e),r=Object.assign(Object.assign({},this._requestOptions),t);return JD(this.apiKey,this.model,s,r)}async batchEmbedContents(e,t={}){const s=Object.assign(Object.assign({},this._requestOptions),t);return KD(this.apiKey,this.model,e,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new rt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Sm(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,s){if(!e.name)throw new Pn("Cached content must contain a `name` field.");if(!e.model)throw new Pn("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if(t!=null&&t[o]&&e[o]&&(t==null?void 0:t[o])!==e[o]){if(o==="model"){const l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,c=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(l===c)continue}throw new Pn(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}const i=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Sm(this.apiKey,i,s)}}class my{constructor(){this.enabled=!1,this.gem=void 0;try{const e="AIzaSyAncE2TfOjhaU8SxlijCUg7mTD7GoS2oho";if(!e||e.trim()===""){this.enabled=!1;return}try{this.gem=new fa(e),this.enabled=!0}catch(t){console.warn("Failed to initialize Google Generative AI:",t),this.enabled=!1,this.gem=void 0}}catch(e){console.warn("Failed to initialize ResumeService:",e),this.enabled=!1,this.gem=void 0}}async generate(e){var c,u,m,p,g;if(!this.enabled||!this.gem)return{summary:e.summary||`${e.title} with ${e.yearsExperience||0}+ years of experience.`,skills:e.skills,experiences:e.experiences.map(x=>({...x,bullets:[x.details||"Contributed to key initiatives and collaborated across teams."]}))};const t=this.gem.getGenerativeModel({model:"gemini-2.5-pro"}),s=`You are an expert resume writer. Create professional resume content in JSON for the following candidate.

Return ONLY valid JSON matching this schema:
{
  "summary": string,
  "skills": string[],
  "experiences": [
    { "company": string, "role": string, "start": string, "end": string, "bullets": string[] }
  ],
  "projects": [ { "name": string, "bullets": string[], "link": string | null } ],
  "certifications": [ { "name": string, "issuer": string | null, "year": string | null } ]
}

Guidelines:
- Use strong, outcome-focused bullet points with metrics when possible.
- Tailor to the title: ${e.title}.
- Keep bullets concise (max 20 words each). Generate up to ${e.bulletsPerExperience||5} bullets per experience.

Candidate data:
name: ${e.fullName}
title: ${e.title}
yearsExperience: ${e.yearsExperience??""}
skills: ${e.skills.join(", ")}
experiences: ${e.experiences.map(x=>`${x.role} at ${x.company} (${x.start} - ${x.end}) ${x.details||""}`).join(" | ")}
summaryProvided: ${e.summary||"none"}
contacts: email=${e.email||""}, phone=${e.phone||""}, location=${e.location||""}
links: github=${((c=e.links)==null?void 0:c.github)||""}, linkedin=${((u=e.links)==null?void 0:u.linkedin)||""}, website=${((m=e.links)==null?void 0:m.website)||""}
projectsProvided: ${((p=e.projects)==null?void 0:p.map(x=>`${x.name} ${x.description||""}`).join(" | "))||"none"}
certificationsProvided: ${((g=e.certifications)==null?void 0:g.map(x=>`${x.name} ${x.issuer||""} ${x.year||""}`).join(" | "))||"none"}`;let i=(await t.generateContent({contents:[{role:"user",parts:[{text:s}]}]})).response.text().trim();i.startsWith("```")&&(i=i.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").trim());const o=i.match(/\{[\s\S]*\}/);return JSON.parse(o?o[0]:i)}async checkATSFromPDF(e,t){if(!this.enabled||!this.gem)return{overallScore:0,breakdown:{contactInfo:0,structure:0,keywords:0,formatting:0,achievements:0,skills:0},recommendations:["AI service not available. Please configure your Google Cloud API key in the .env file to enable ATS analysis."],strengths:[]};const s=this.gem.getGenerativeModel({model:"gemini-2.5-pro",generationConfig:{temperature:.1,topP:.8}}),r=await new Promise((o,l)=>{const c=new FileReader;c.onload=()=>{const m=c.result.split(",")[1];o(m)},c.onerror=l,c.readAsDataURL(e)}),i=`You are an ATS (Applicant Tracking System) expert. Analyze this resume PDF and compare it against the provided job description to provide a CONSISTENT ATS compatibility score.

IMPORTANT: Use objective, measurable criteria. The same resume and job description should always receive the same score.

Return ONLY valid JSON matching this schema:
{
  "overallScore": number (0-100),
  "breakdown": {
    "contactInfo": number (0-100),
    "structure": number (0-100),
    "keywords": number (0-100),
    "formatting": number (0-100),
    "achievements": number (0-100),
    "skills": number (0-100)
  },
  "recommendations": string[],
  "strengths": string[]
}

DETAILED SCORING CRITERIA (be consistent):
- contactInfo (0-100): 
  * Name present: +25 points
  * Email present: +25 points
  * Phone present: +25 points
  * Location present: +25 points

- structure (0-100):
  * Professional summary/objective: +25 points
  * Work experience section: +25 points
  * Skills section: +25 points
  * Education section: +25 points

- keywords (0-100): 
  * Extract ALL important keywords from job description (technologies, tools, frameworks, methodologies, job-specific terms)
  * Count how many of these keywords appear in the resume
  * Score = (matched keywords / total important keywords in job description) * 100
  * Be STRICT: Only count exact or very close matches (e.g., "React" matches "React.js" but "DevOps" does NOT match "Frontend")
  * If resume is for a completely different role (e.g., DevOps vs Frontend), score should be VERY LOW (0-20%)
  * Cap at 100

- formatting (0-100):
  * Clean, simple layout: +50 points
  * No complex graphics/tables: +30 points
  * Standard fonts: +20 points
  * Deduct points for: images, complex layouts, unusual fonts

- achievements (0-100):
  * Has quantifiable metrics (numbers, percentages): +50 points
  * Has action verbs and results: +30 points
  * Has multiple achievement bullets: +20 points

- skills (0-100):
  * Extract ALL required/desired skills from job description (programming languages, frameworks, tools, etc.)
  * Count how many of these skills appear in the resume skills section or experience
  * Score = (matching skills / total required skills in job description) * 100
  * Be STRICT: Only count skills that actually match (e.g., "Kubernetes" does NOT match "React")
  * If resume skills don't align with job requirements, score should be VERY LOW (0-20%)
  * Cap at 100

- overallScore: Use WEIGHTED average, NOT simple average. Keywords and Skills are CRITICAL for job matching:
  * Keywords: 30% weight (most important - directly affects ATS filtering)
  * Skills: 30% weight (critical - must match job requirements)
  * Contact Info: 10% weight (less important for job fit)
  * Structure: 10% weight (less important for job fit)
  * Formatting: 10% weight (less important for job fit)
  * Achievements: 10% weight (less important for job fit)
  * Formula: (keywords * 0.30) + (skills * 0.30) + (contactInfo * 0.10) + (structure * 0.10) + (formatting * 0.10) + (achievements * 0.10)
  * Round to nearest integer
  * IMPORTANT: If keywords < 30% OR skills < 30%, the overall score should be penalized by an additional 10-20 points to reflect poor job match

RECOMMENDATIONS GUIDELINES:
- Only include recommendations for issues ACTUALLY found in the resume
- Be specific and actionable (e.g., "Add React and TypeScript to skills section" not "Add more skills")
- Focus on ATS-specific issues (formatting, keywords, structure)
- Keep each recommendation under 100 characters
- Prioritize critical issues first
- If a skill/keyword is missing, name the specific skill/keyword from the job description
- For formatting issues, specify what to fix (e.g., "Remove photo" or "Convert education table to plain text")
- Don't make generic recommendations that don't apply to this resume

STRENGTHS GUIDELINES:
- List actual strengths found in the resume
- Be specific (e.g., "Strong keyword match in skills section" not "Good resume")
- Focus on ATS-relevant strengths

Job Description:
${t}

CRITICAL: Analyze the resume PDF against this job description. 
- If the resume is for a DIFFERENT role/field than the job description (e.g., DevOps resume for Frontend job, Backend resume for Design job), the keywords and skills scores MUST be very low (0-25%).
- The overall score should reflect how well the resume matches the SPECIFIC job requirements, not just resume quality.
- A well-formatted resume for the wrong job should still score LOW overall (30-50%).
- Be objective, consistent, and STRICT about keyword/skill matching. Count actual matches, don't estimate.
- Only recommend fixes for issues you actually see in the resume.`;try{const o=e.type||"application/pdf";let c=(await s.generateContent({contents:[{role:"user",parts:[{inlineData:{data:r,mimeType:o}},{text:i}]}]})).response.text().trim();c.startsWith("```")&&(c=c.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").trim());const u=c.match(/\{[\s\S]*\}/);return JSON.parse(u?u[0]:c)}catch(o){throw console.error("PDF ATS check error:",o),new Error(`Failed to analyze PDF: ${o instanceof Error?o.message:"Unknown error"}`)}}async checkATS(e,t){const s={...e,generated:t};if(!this.enabled||!this.gem)return this.basicATSScore(s);const r=this.gem.getGenerativeModel({model:"gemini-2.5-pro"}),o=`You are an ATS (Applicant Tracking System) expert. Analyze this resume and provide an ATS compatibility score.

Return ONLY valid JSON matching this schema:
{
  "overallScore": number (0-100),
  "breakdown": {
    "contactInfo": number (0-100),
    "structure": number (0-100),
    "keywords": number (0-100),
    "formatting": number (0-100),
    "achievements": number (0-100),
    "skills": number (0-100)
  },
  "recommendations": string[],
  "strengths": string[]
}

Scoring criteria:
- contactInfo: Has name, email, phone, location (25% each)
- structure: Has summary, experience, skills, education sections
- keywords: Relevant industry keywords and job title alignment
- formatting: Clean, parseable format without complex layouts
- achievements: Quantifiable results and metrics in experience bullets
- skills: Skills section present and relevant to target role

Resume content:
${this.formatResumeForAnalysis(s,t)}`;try{let c=(await r.generateContent({contents:[{role:"user",parts:[{text:o}]}]})).response.text().trim();c.startsWith("```")&&(c=c.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").trim());const u=c.match(/\{[\s\S]*\}/);return JSON.parse(u?u[0]:c)}catch(l){return console.error("ATS check error:",l),this.basicATSScore(s)}}formatResumeForAnalysis(e,t){const s=[];return s.push(`Name: ${e.fullName||"Not provided"}`),s.push(`Title: ${e.title||"Not provided"}`),s.push(`Email: ${e.email||"Not provided"}`),s.push(`Phone: ${e.phone||"Not provided"}`),s.push(`Location: ${e.location||"Not provided"}`),s.push(`
Summary: ${(t==null?void 0:t.summary)||e.summary||"Not provided"}`),s.push(`
Skills: ${((t==null?void 0:t.skills)||e.skills||[]).join(", ")}`),s.push(`
Experience:`),((t==null?void 0:t.experiences)||e.experiences||[]).forEach(r=>{s.push(`- ${r.role} at ${r.company} (${r.start} - ${r.end})`),(r.bullets||[]).forEach(i=>s.push(`  â€¢ ${i}`))}),(t!=null&&t.projects||e.projects)&&(s.push(`
Projects:`),((t==null?void 0:t.projects)||e.projects||[]).forEach(r=>{s.push(`- ${r.name}`),(r.bullets||[]).forEach(i=>s.push(`  â€¢ ${i}`))})),s.join(`
`)}basicATSScore(e){var g,x,b,T,C,k,R,P,L,U,F;const t=[e.fullName?25:0,e.email?25:0,e.phone?25:0,e.location?25:0].reduce((I,_)=>I+_,0),s=[e.summary||(g=e.generated)!=null&&g.summary?25:0,((x=e.experiences)==null?void 0:x.length)>0?25:0,((b=e.skills)==null?void 0:b.length)>0||((C=(T=e.generated)==null?void 0:T.skills)==null?void 0:C.length)>0?25:0,((k=e.education)==null?void 0:k.length)>0?25:0].reduce((I,_)=>I+_,0),r=((R=e.generated)==null?void 0:R.skills)||e.skills||[],i=r.length>=5?100:r.length*20,o=(((P=e.generated)==null?void 0:P.experiences)||e.experiences||[]).some(I=>(I.bullets||[]).some(_=>/\d+/.test(_)))?80:40,l=e.title?70:50,c=85,u=Math.round((t+s+l+c+o+i)/6),m=[];e.email||m.push("Add your email address"),e.phone||m.push("Include your phone number"),e.location||m.push("Add your location"),!e.summary&&!((L=e.generated)!=null&&L.summary)&&m.push("Add a professional summary"),r.length<5&&m.push("Include at least 5-10 relevant skills"),(((U=e.generated)==null?void 0:U.experiences)||e.experiences||[]).length===0&&m.push("Add at least one work experience entry");const p=[];return e.fullName&&p.push("Name is present"),e.title&&p.push("Job title is specified"),r.length>0&&p.push("Skills section included"),(((F=e.generated)==null?void 0:F.experiences)||e.experiences||[]).length>0&&p.push("Work experience provided"),{overallScore:u,breakdown:{contactInfo:t,structure:s,keywords:l,formatting:c,achievements:o,skills:i},recommendations:m,strengths:p}}}const Nm={company:"",role:"",start:"",end:"",details:""},YD=()=>{var Q,G,ne,de,z,X,ie,ce,be,Ve;const{isDarkMode:n}=De(),e=V.useMemo(()=>new my,[]),[t,s]=V.useState({fullName:"",title:"",yearsExperience:0,summary:"",skills:[],experiences:[{...Nm}],education:[],email:"",phone:"",location:"",links:{},projects:[],certifications:[],bulletsPerExperience:5}),[r,i]=V.useState(""),[o,l]=V.useState(!1),[c,u]=V.useState(null),[m,p]=V.useState(null),[g,x]=V.useState(!1),[b,T]=V.useState(null),[C,k]=V.useState(!1),R=(O,H,re)=>{s(te=>{const K={...te,experiences:[...te.experiences]};return K.experiences[O][H]=re,K})},P=()=>s(O=>({...O,experiences:[...O.experiences,{...Nm}]})),L=O=>s(H=>({...H,experiences:H.experiences.filter((re,te)=>te!==O)})),U=()=>{const O=r.trim();O&&(s(H=>({...H,skills:[...H.skills,O]})),i(""))},F=async()=>{l(!0);try{const O=await e.generate(t);u(O),p(O),x(!0)}finally{l(!1)}},I=async()=>{k(!0);try{const O=await e.checkATS(t,w);T(O)}finally{k(!1)}},_=V.useMemo(()=>{var O;return{summary:t.summary||`${t.title} with ${t.yearsExperience||0}+ years of experience.`,skills:t.skills,experiences:t.experiences.map(H=>({company:H.company,role:H.role,start:H.start,end:H.end,bullets:H.details?H.details.split(`
`).map(re=>re.trim()).filter(Boolean):[]})),projects:((O=t.projects)==null?void 0:O.map(H=>({name:H.name,bullets:H.description?H.description.split(`
`).map(re=>re.trim()).filter(Boolean):[],link:H.link})))||[],certifications:t.certifications||[]}},[t]),w=m||c||_,S=()=>{g?x(!1):(m||p(w),x(!0))},N=O=>{p(H=>O(H??w))},D=()=>{window.print()},A=`${n?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} rounded px-2 py-1 outline-none focus:border-purple-500 focus:ring-0`,$=`${n?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg p-2 outline-none focus:border-purple-500 focus:ring-0`;return a.jsx("div",{className:"px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-6 space-y-4`,children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Resume Builder"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Full name",value:t.fullName,onChange:O=>s({...t,fullName:O.target.value})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Target title (e.g., Frontend Engineer)",value:t.title,onChange:O=>s({...t,title:O.target.value})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Years of experience",type:"number",value:t.yearsExperience??0,onChange:O=>s({...t,yearsExperience:Number(O.target.value)})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Location",value:t.location||"",onChange:O=>s({...t,location:O.target.value})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Email",value:t.email||"",onChange:O=>s({...t,email:O.target.value})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Phone",value:t.phone||"",onChange:O=>s({...t,phone:O.target.value})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"GitHub URL",value:((Q=t.links)==null?void 0:Q.github)||"",onChange:O=>s({...t,links:{...t.links,github:O.target.value}})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"LinkedIn URL",value:((G=t.links)==null?void 0:G.linkedin)||"",onChange:O=>s({...t,links:{...t.links,linkedin:O.target.value}})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Website URL",value:((ne=t.links)==null?void 0:ne.website)||"",onChange:O=>s({...t,links:{...t.links,website:O.target.value}})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Bullets per experience (3-6)",type:"number",min:3,max:6,value:t.bulletsPerExperience||5,onChange:O=>s({...t,bulletsPerExperience:Number(O.target.value)})})]}),a.jsx("textarea",{className:`w-full rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,rows:3,placeholder:"Optional: your current summary",value:t.summary,onChange:O=>s({...t,summary:O.target.value})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:`flex-1 rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Add a skill and press +",value:r,onChange:O=>i(O.target.value)}),a.jsx("button",{onClick:U,className:"px-3 rounded-lg bg-purple-600 text-white",children:a.jsx(ho,{size:16})})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.skills.map((O,H)=>a.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-600/20 text-purple-600",children:O},H))})]}),a.jsxs("div",{className:"space-y-4",children:[t.experiences.map((O,H)=>a.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 border rounded-xl p-3 ${n?"border-gray-700":"border-gray-200"}`,children:[a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Company",value:O.company,onChange:re=>R(H,"company",re.target.value)}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Role",value:O.role,onChange:re=>R(H,"role",re.target.value)}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Start (e.g., Jan 2022)",value:O.start,onChange:re=>R(H,"start",re.target.value)}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:`flex-1 rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"End (e.g., Present)",value:O.end,onChange:re=>R(H,"end",re.target.value)}),t.experiences.length>1&&a.jsx("button",{onClick:()=>L(H),className:`px-3 rounded-lg ${n?"bg-gray-800":"bg-gray-100"}`,"aria-label":"Remove",children:a.jsx(dv,{size:16})})]}),a.jsx("textarea",{className:`md:col-span-2 rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,rows:2,placeholder:"Optional details (projects, stack, impact)",value:O.details,onChange:re=>R(H,"details",re.target.value)})]},H)),a.jsx("button",{onClick:P,className:"text-sm px-3 py-2 rounded-lg border border-dashed",children:"Add experience"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"font-medium",children:"Projects"}),(t.projects||[]).map((O,H)=>a.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 border rounded-xl p-3 ${n?"border-gray-700":"border-gray-200"}`,children:[a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Project name",value:O.name,onChange:re=>s(te=>{const K=[...te.projects||[]];return K[H]={...K[H],name:re.target.value},{...te,projects:K}})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Link (optional)",value:O.link||"",onChange:re=>s(te=>{const K=[...te.projects||[]];return K[H]={...K[H],link:re.target.value},{...te,projects:K}})}),a.jsx("textarea",{className:`md:col-span-2 rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,rows:2,placeholder:"Brief description or achievements",value:O.description||"",onChange:re=>s(te=>{const K=[...te.projects||[]];return K[H]={...K[H],description:re.target.value},{...te,projects:K}})})]},H)),a.jsx("button",{onClick:()=>s(O=>({...O,projects:[...O.projects||[],{name:""}]})),className:"text-sm px-3 py-2 rounded-lg border border-dashed",children:"Add project"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"font-medium",children:"Certifications"}),(t.certifications||[]).map((O,H)=>a.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 gap-3 border rounded-xl p-3 ${n?"border-gray-700":"border-gray-200"}`,children:[a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Certification",value:O.name,onChange:re=>s(te=>{const K=[...te.certifications||[]];return K[H]={...K[H],name:re.target.value},{...te,certifications:K}})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Issuer",value:O.issuer||"",onChange:re=>s(te=>{const K=[...te.certifications||[]];return K[H]={...K[H],issuer:re.target.value},{...te,certifications:K}})}),a.jsx("input",{className:`rounded-lg px-3 py-2 border ${n?"bg-gray-900 border-gray-700":"bg-white border-gray-300"}`,placeholder:"Year",value:O.year||"",onChange:re=>s(te=>{const K=[...te.certifications||[]];return K[H]={...K[H],year:re.target.value},{...te,certifications:K}})})]},H)),a.jsx("button",{onClick:()=>s(O=>({...O,certifications:[...O.certifications||[],{name:""}]})),className:"text-sm px-3 py-2 rounded-lg border border-dashed",children:"Add certification"})]}),a.jsxs("div",{className:"flex gap-3 flex-wrap",children:[a.jsxs("button",{onClick:F,disabled:o,className:`flex items-center gap-2 px-4 py-2 rounded-lg ${o?"opacity-70":""} bg-purple-600 text-white`,children:[a.jsx(Yr,{size:16})," ",o?"Generatingâ€¦":"Generate with AI"]}),a.jsxs("button",{id:"ats-check-button",onClick:I,disabled:C,className:`flex items-center gap-2 px-4 py-2 rounded-lg ${C?"opacity-70":""} ${n?"bg-blue-600":"bg-blue-500"} text-white`,children:[a.jsx(Ws,{size:16})," ",C?"Checkingâ€¦":"Check ATS Score"]})]}),b&&a.jsxs("div",{id:"ats-score-section",className:`mt-4 rounded-xl border p-4 ${n?"bg-gray-800/50 border-gray-700":"bg-blue-50 border-blue-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-lg",children:"ATS Compatibility Score"}),a.jsxs("div",{className:`text-3xl font-bold ${b.overallScore>=80?"text-green-600":b.overallScore>=60?"text-yellow-600":"text-red-600"}`,children:[b.overallScore,"%"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4",children:Object.entries(b.breakdown).map(([O,H])=>a.jsxs("div",{className:`rounded-lg p-3 ${n?"bg-gray-900":"bg-white"}`,children:[a.jsx("div",{className:"text-xs opacity-70 mb-1 capitalize",children:O.replace(/([A-Z])/g," $1").trim()}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${H>=80?"bg-green-500":H>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${H}%`}})}),a.jsxs("span",{className:"text-sm font-semibold",children:[H,"%"]})]})]},O))}),b.strengths.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ws,{size:16,className:"text-green-600"}),a.jsx("span",{className:"font-semibold text-sm",children:"Strengths"})]}),a.jsx("ul",{className:"list-disc pl-6 space-y-1 text-sm opacity-80",children:b.strengths.map((O,H)=>a.jsx("li",{children:O},H))})]}),b.recommendations.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(nn,{size:16,className:"text-yellow-600"}),a.jsx("span",{className:"font-semibold text-sm",children:"Recommendations"})]}),a.jsx("ul",{className:"list-disc pl-6 space-y-1 text-sm opacity-80",children:b.recommendations.map((O,H)=>a.jsx("li",{children:O},H))})]})]})]}),a.jsxs("div",{id:"resume-print",className:`${n?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"} border rounded-2xl p-6`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"Preview"}),a.jsxs("div",{className:"flex gap-2 print:hidden",children:[a.jsx("button",{onClick:S,className:"px-3 py-2 rounded-lg border border-gray-300 text-sm",children:g?"Disable Editing":"Enable Editing"}),a.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-900 text-white",children:[a.jsx(Wl,{size:16})," Download PDF"]})]})]}),a.jsxs("div",{className:"mt-4",children:[g?a.jsxs(a.Fragment,{children:[a.jsx("input",{className:`w-full text-2xl font-extrabold tracking-tight outline-none border-b ${n?"text-white border-gray-700 focus:border-purple-400 bg-transparent":"text-gray-900 border-gray-200 focus:border-purple-500 bg-transparent"}`,value:w.summary?w.summary.split(`
`)[0]||t.fullName||"Your Name":t.fullName||"Your Name",onChange:O=>N(H=>({...H,summary:`${O.target.value}
${H.summary.split(`
`).slice(1).join(`
`)}`}))}),a.jsx("input",{className:`w-full mt-1 opacity-90 outline-none border-b ${n?"text-gray-200 border-gray-700 focus:border-purple-400 bg-transparent":"text-gray-700 border-gray-200 focus:border-purple-500 bg-transparent"}`,value:t.title,onChange:O=>s({...t,title:O.target.value}),placeholder:"Professional Title"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-2xl font-extrabold tracking-tight",children:t.fullName||"Your Name"}),a.jsx("div",{className:"opacity-80",children:t.title})]}),a.jsx("div",{className:"text-xs opacity-70 mt-1",children:[t.location,t.email,t.phone].filter(Boolean).join(" Â· ")}),a.jsx("div",{className:"text-xs opacity-70",children:[(de=t.links)==null?void 0:de.website,(z=t.links)==null?void 0:z.github,(X=t.links)==null?void 0:X.linkedin].filter(Boolean).join(" Â· ")}),a.jsx("div",{className:`h-px w-full my-3 ${n?"bg-gray-700":"bg-gray-300"}`}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"font-semibold uppercase text-xs tracking-wide",children:"Summary"}),g?a.jsx("textarea",{className:`w-full mt-1 text-sm ${$}`,rows:4,value:w.summary,onChange:O=>N(H=>({...H,summary:O.target.value}))}):a.jsx("div",{className:"mt-1 text-sm whitespace-pre-wrap",children:w.summary||"A concise professional summary will appear here."})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"font-semibold uppercase text-xs tracking-wide",children:"Skills"}),g?a.jsx("textarea",{className:`w-full mt-1 text-sm ${$}`,rows:3,value:w.skills.join(", "),onChange:O=>N(H=>({...H,skills:O.target.value.split(",").map(re=>re.trim()).filter(Boolean)}))}):a.jsx("div",{className:"mt-1 text-sm flex flex-wrap gap-2",children:w.skills.map((O,H)=>a.jsx("span",{className:"px-2 py-1 rounded bg-gray-200 text-gray-800 text-xs",children:O},H))})]}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsx("div",{className:"font-semibold uppercase text-xs tracking-wide",children:"Experience"}),w.experiences.map((O,H)=>{var re;return a.jsx("div",{className:"space-y-1",children:g?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex gap-2 text-sm",children:[a.jsx("input",{className:`flex-1 ${A}`,value:O.role,onChange:te=>N(K=>{const fe=[...K.experiences];return fe[H]={...fe[H],role:te.target.value},{...K,experiences:fe}})}),a.jsx("input",{className:`flex-1 ${A}`,value:O.company,onChange:te=>N(K=>{const fe=[...K.experiences];return fe[H]={...fe[H],company:te.target.value},{...K,experiences:fe}})})]}),a.jsxs("div",{className:"flex gap-2 text-xs",children:[a.jsx("input",{className:`flex-1 ${A}`,value:O.start,onChange:te=>N(K=>{const fe=[...K.experiences];return fe[H]={...fe[H],start:te.target.value},{...K,experiences:fe}})}),a.jsx("input",{className:`flex-1 ${A}`,value:O.end,onChange:te=>N(K=>{const fe=[...K.experiences];return fe[H]={...fe[H],end:te.target.value},{...K,experiences:fe}})})]}),a.jsx("textarea",{className:`w-full text-sm ${$}`,rows:4,value:O.bullets.join(`
`),onChange:te=>N(K=>{const fe=[...K.experiences];return fe[H]={...fe[H],bullets:te.target.value.split(`
`).map(mr=>mr.trim()).filter(Boolean)},{...K,experiences:fe}})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-sm font-semibold",children:[O.role," Â· ",O.company]}),a.jsxs("div",{className:"text-xs opacity-70",children:[O.start," â€“ ",O.end]}),(re=O.bullets)!=null&&re.length?a.jsx("ul",{className:"list-disc pl-5 text-sm mt-1 space-y-1",children:O.bullets.map((te,K)=>a.jsx("li",{children:te},K))}):null]})},H)})]}),(ie=c==null?void 0:c.projects)!=null&&ie.length||(ce=t.projects)!=null&&ce.length?a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("div",{className:"font-semibold uppercase text-xs tracking-wide",children:"Projects"}),(w.projects&&w.projects.length?w.projects:[]).map((O,H)=>{var re;return a.jsx("div",{children:g?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex gap-2 text-sm",children:[a.jsx("input",{className:`flex-1 ${A}`,value:O.name,onChange:te=>N(K=>{const fe=[...K.projects||[]];return fe[H]={...fe[H],name:te.target.value},{...K,projects:fe}})}),a.jsx("input",{className:`flex-1 ${A}`,value:O.link||"",onChange:te=>N(K=>{const fe=[...K.projects||[]];return fe[H]={...fe[H],link:te.target.value},{...K,projects:fe}})})]}),a.jsx("textarea",{className:`w-full text-sm mt-1 ${$}`,rows:3,value:(O.bullets||[]).join(`
`),onChange:te=>N(K=>{const fe=[...K.projects||[]];return fe[H]={...fe[H],bullets:te.target.value.split(`
`).map(mr=>mr.trim()).filter(Boolean)},{...K,projects:fe}})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-sm font-semibold",children:[O.name," ",O.link?a.jsx("a",{className:"text-blue-600",href:O.link,target:"_blank",rel:"noreferrer",children:"â†—"}):null]}),(re=O.bullets)!=null&&re.length?a.jsx("ul",{className:"list-disc pl-5 text-sm mt-1 space-y-1",children:O.bullets.map((te,K)=>a.jsx("li",{children:te},K))}):null]})},H)})]}):null,(be=c==null?void 0:c.certifications)!=null&&be.length||(Ve=t.certifications)!=null&&Ve.length?a.jsxs("div",{className:"mt-4 space-y-1",children:[a.jsx("div",{className:"font-semibold uppercase text-xs tracking-wide",children:"Certifications"}),g?a.jsx("div",{className:"space-y-2",children:(w.certifications||[]).map((O,H)=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[a.jsx("input",{className:A,value:O.name,onChange:re=>N(te=>{const K=[...te.certifications||[]];return K[H]={...K[H],name:re.target.value},{...te,certifications:K}})}),a.jsx("input",{className:A,value:O.issuer||"",onChange:re=>N(te=>{const K=[...te.certifications||[]];return K[H]={...K[H],issuer:re.target.value},{...te,certifications:K}})}),a.jsx("input",{className:A,value:O.year||"",onChange:re=>N(te=>{const K=[...te.certifications||[]];return K[H]={...K[H],year:re.target.value},{...te,certifications:K}})})]},H))}):a.jsx("ul",{className:"list-disc pl-5 text-sm",children:(w.certifications||[]).map((O,H)=>a.jsxs("li",{children:[O.name,O.issuer?` Â· ${O.issuer}`:"",O.year?`, ${O.year}`:""]},H))})]}):null]})]})]})})},QD=[{id:1,icon:hv,label:"Step 1",title:"Self-Discovery",subtitle:"Know Yourself",description:"Gain clarity on what energises you before selecting a career path.",focus:["Identify interests: subjects, activities or industries that excite you","List strengths: natural abilities, skills and personality traits","Clarify personal values: money, purpose, freedom, stability, creativity","Explore personality frameworks such as MBTI, Holland Code (RIASEC) or CliftonStrengths"],goal:"Understand the kind of work that aligns with your strengths, passions and life goals."},{id:2,icon:cs,label:"Step 2",title:"Career Exploration",subtitle:"Know Whatâ€™s Out There",description:"Investigate real-world career options that match your self-discovery insights.",focus:["Research industries and roles using LinkedIn, Indeed or O*NET","Schedule informational interviews or job shadowing sessions","Evaluate market demand, salary ranges and required skills"],goal:"Narrow your options to 1â€“3 potential career directions."},{id:3,icon:tr,label:"Step 3",title:"Goal Setting",subtitle:"Define Your Path",description:"Translate your preferred careers into a roadmap with concrete milestones.",focus:["Set short-term goals (1â€“2 years): learn skills, complete courses, gain experience","Plan mid-term goals (3â€“5 years): secure a full-time role or first promotion","Visualise long-term goals (5â€“10+ years): leadership positions, entrepreneurship or pivots"],goal:"Capture your career roadmap in writing."},{id:4,icon:tn,label:"Step 4",title:"Skill Building",subtitle:"Prepare for the Role",description:"Bridge the gap between where you are and the skills your target roles need.",focus:["Acquire technical skills specific to your target jobs (coding, finance, design, marketing)","Polish core soft skills: communication, collaboration, problem-solving and leadership","Leverage online courses, certifications, bootcamps and workshops"],goal:"Become qualified and competitive for your chosen roles."},{id:5,icon:fv,label:"Step 5",title:"Practical Experience",subtitle:"Start Small, Build Up",description:"Apply your skills in real situations to accelerate learning and credibility.",focus:["Pursue internships, apprenticeships or volunteer initiatives","Take on freelance or passion projects to demonstrate value","Target entry-level roles that help you accumulate results and stories"],goal:"Build a portfolio, resume and network that open doors."},{id:6,icon:Je,label:"Step 6",title:"Networking",subtitle:"Build Relationships",description:"Create meaningful connections who can mentor, refer or collaborate with you.",focus:["Attend industry meetups, webinars and conferences","Join professional associations or online communities","Maintain authentic relationships with peers and mentors"],goal:"Open doors to opportunities and guidance through your relationships."},{id:7,icon:mv,label:"Step 7",title:"Job Search & Growth",subtitle:"Launch & Advance",description:"Enter the market with intention and continue levelling up once inside.",focus:["Craft a strong resume, cover letter and LinkedIn presence","Apply strategically â€” prioritise quality over quantity","When employed, seek feedback, learn continuously and take initiative"],goal:"Secure roles that move you toward your long-term vision."},{id:8,icon:pv,label:"Step 8",title:"Review & Adapt",subtitle:"Stay Future-Ready",description:"Regularly reassess to ensure your career still aligns with your evolving self.",focus:["Reflect on progress every 6â€“12 months","Adjust goals as interests or market dynamics change","Add new skills or pivot paths when needed"],goal:"Maintain flexibility and resilience throughout your career journey."}],XD=()=>{const{isDarkMode:n}=De();return a.jsx("div",{className:"px-6 lg:px-8 py-10",children:a.jsxs("section",{className:`${n?"bg-gray-900/80":"bg-white"} rounded-3xl shadow-xl border ${n?"border-gray-800/80":"border-gray-200"} p-8`,children:[a.jsxs("header",{className:"max-w-3xl",children:[a.jsx("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-200",children:"Career Navigation Framework"}),a.jsx("h1",{className:"mt-4 text-3xl font-bold",children:"Design Your Personal Career Path"}),a.jsx("p",{className:"mt-3 text-base opacity-80",children:"Follow this eight-step loop to align who you are with the opportunities around you. Each stage builds on the previous one and ends with a clear goal before you move forward."})]}),a.jsx("div",{className:"mt-10 grid gap-6",children:QD.map(e=>{const t=e.icon;return a.jsx("article",{className:`rounded-2xl border ${n?"border-gray-800 bg-gray-900/60":"border-gray-200 bg-gray-50"} p-6 lg:p-7 transition-transform duration-200 hover:-translate-y-1 hover:shadow-lg`,children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"shrink-0",children:a.jsx("div",{className:"inline-flex items-center justify-center rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 text-white w-14 h-14 shadow-lg",children:a.jsx(t,{size:26})})}),a.jsxs("div",{className:"flex-1 space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[a.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-purple-600 dark:text-purple-300",children:e.label}),a.jsx("h2",{className:"text-xl font-semibold",children:e.title}),a.jsx("span",{className:"text-sm opacity-70",children:e.subtitle})]}),a.jsx("p",{className:"text-sm leading-relaxed opacity-80",children:e.description}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide opacity-70",children:"Focus on"}),a.jsx("ul",{className:"grid gap-2 text-sm list-disc pl-6",children:e.focus.map((s,r)=>a.jsx("li",{className:"leading-relaxed opacity-80",children:s},r))})]}),a.jsxs("div",{className:`rounded-xl px-4 py-3 border ${n?"border-purple-700/50 bg-purple-900/20 text-purple-100":"border-purple-200 bg-purple-50 text-purple-900"}`,children:[a.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Goal"}),a.jsx("p",{className:"mt-1 text-sm leading-relaxed",children:e.goal})]})]})]})},e.id)})}),a.jsxs("footer",{className:`${n?"bg-gray-900/60 border-gray-800":"bg-white border-gray-200"} border rounded-2xl p-6 mt-10`,children:[a.jsx("h3",{className:"text-lg font-semibold",children:"How to Use This Roadmap"}),a.jsxs("ol",{className:"mt-3 space-y-2 text-sm opacity-80 list-decimal pl-6",children:[a.jsx("li",{children:"Work through each step in order and document your insights."}),a.jsx("li",{children:"Set reminders to revisit Step 8 every 6â€“12 months."}),a.jsx("li",{children:"Repeat the loop whenever you feel misaligned or ready for the next challenge."})]})]})]})})},ZD=({value:n,size:e=120,strokeWidth:t=10,isDarkMode:s=!1})=>{const r=(e-t)/2,i=r*2*Math.PI,o=i-n/100*i,l=()=>n>=80?"#10b981":n>=60?"#eab308":"#ef4444";return a.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[a.jsxs("svg",{width:e,height:e,className:"transform -rotate-90",children:[a.jsx("circle",{cx:e/2,cy:e/2,r,stroke:s?"#374151":"#e5e7eb",strokeWidth:t,fill:"none"}),a.jsx("circle",{cx:e/2,cy:e/2,r,stroke:l(),strokeWidth:t,fill:"none",strokeDasharray:i,strokeDashoffset:o,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-2xl font-bold",style:{color:l()},children:[n,"%"]})})]})},e1=({value:n,size:e=60,strokeWidth:t=6,isDarkMode:s=!1})=>{const r=(e-t)/2,i=r*2*Math.PI,o=i-n/100*i,l=()=>n>=80?"#10b981":n>=60?"#eab308":"#ef4444";return a.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[a.jsxs("svg",{width:e,height:e,className:"transform -rotate-90",children:[a.jsx("circle",{cx:e/2,cy:e/2,r,stroke:s?"#374151":"#e5e7eb",strokeWidth:t,fill:"none"}),a.jsx("circle",{cx:e/2,cy:e/2,r,stroke:l(),strokeWidth:t,fill:"none",strokeDasharray:i,strokeDashoffset:o,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-xs font-bold",style:{color:l()},children:[n,"%"]})})]})},t1=({isContainer:n=!1})=>{const{isDarkMode:e}=De(),[t,s]=V.useState(null),[r,i]=V.useState(""),[o,l]=V.useState(!0);V.useEffect(()=>{let I=!0;try{const _=new my;I&&(s(_),l(!1))}catch(_){console.error("Failed to initialize ResumeService:",_),I&&(i((_==null?void 0:_.message)||"Failed to initialize AI service"),s(null),l(!1))}return()=>{I=!1}},[]);const c=V.useRef(null),[u,m]=V.useState(null),[p,g]=V.useState(""),[x,b]=V.useState(null),[T,C]=V.useState(!1),[k,R]=V.useState(""),P=async I=>{var N;const _=(N=I.target.files)==null?void 0:N[0];if(!_)return;m(_),R(""),b(null);const w=_.type,S=_.name.toLowerCase();w==="application/pdf"||S.endsWith(".pdf")||(R("Only PDF files are supported for upload. Please upload a PDF resume."),m(null))},L=async()=>{if(!t){R("AI service is not available. Please configure your Google Cloud API key in the .env file.");return}if(!u||!(u.type==="application/pdf"||u.name.toLowerCase().endsWith(".pdf"))){R("Please upload a PDF resume file.");return}if(!p.trim()){R("Please provide a job description to compare against.");return}C(!0),R("");try{const I=await t.checkATSFromPDF(u,p);b(I)}catch(I){R((I==null?void 0:I.message)||"Failed to analyze PDF. Please try again."),console.error("PDF ATS check error:",I)}finally{C(!1)}},U=I=>{I.preventDefault();const _=I.dataTransfer.files[0];if(_){const w=c.current;if(w){const S=new DataTransfer;S.items.add(_),w.files=S.files,P({target:{files:S.files}})}}},F=I=>{I.preventDefault()};return a.jsxs("div",{className:`w-full flex flex-col ${n?"":"px-6 lg:px-8 py-4 h-[calc(100vh-180px)]"}`,children:[!n&&a.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[a.jsxs(tt,{to:"/resume-builder",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${e?"hover:bg-gray-800 text-gray-300 hover:text-white":"hover:bg-gray-100 text-gray-700 hover:text-gray-900"}`,children:[a.jsx(us,{size:18}),a.jsx("span",{className:"text-sm font-medium",children:"Back to Resume Builder"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"ATS Resume Checker"}),a.jsx("p",{className:"text-sm opacity-70",children:"Upload your resume and compare it against a job description for ATS compatibility"})]})]}),a.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-4 ${n?"":"flex-1 min-h-0"}`,children:[a.jsxs("div",{className:`${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-3 space-y-2 flex flex-col min-h-0`,children:[a.jsx("h2",{className:`text-base font-semibold ${e?"text-white":"text-gray-900"}`,children:"Upload Resume"}),a.jsxs("div",{onDrop:U,onDragOver:F,className:`border-2 border-dashed rounded-lg p-2.5 text-center transition-colors flex-shrink-0 ${e?"border-gray-700 hover:border-gray-600 bg-gray-900/50":"border-gray-300 hover:border-gray-400 bg-gray-50"}`,children:[a.jsx("input",{ref:c,type:"file",accept:".pdf",onChange:P,className:"hidden"}),u?a.jsxs("div",{className:`flex items-center justify-between p-1.5 rounded-lg ${e?"bg-gray-900":"bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{size:18,className:"text-blue-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:`font-medium text-xs truncate max-w-[180px] ${e?"text-gray-200":"text-gray-900"}`,children:u.name}),a.jsxs("p",{className:`text-xs opacity-70 ${e?"text-gray-400":"text-gray-600"}`,children:[(u.size/1024).toFixed(1)," KB"]})]})]}),a.jsx("button",{onClick:()=>{m(null),b(null),c.current&&(c.current.value="")},className:`p-0.5 rounded ${e?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-200 text-gray-600"}`,children:a.jsx(kn,{size:14})})]}):a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx(fo,{size:20,className:`${e?"text-gray-500":"text-gray-400"}`}),a.jsx("p",{className:`text-xs font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Drag & drop or"}),a.jsx("button",{onClick:()=>{var I;return(I=c.current)==null?void 0:I.click()},className:`px-2.5 py-1 rounded text-xs ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white mt-0.5`,children:"Browse Files"})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[a.jsx("label",{className:`block text-xs font-medium mb-1 ${e?"text-gray-200":"text-gray-900"}`,children:"Job Description *"}),a.jsx("textarea",{className:`w-full rounded-lg px-2.5 py-1.5 border text-xs resize-none flex-1 overflow-y-auto ${e?"bg-gray-900 border-gray-700 text-gray-200 placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`,placeholder:"Paste job description...",value:p,onChange:I=>{g(I.target.value),b(null)},style:{minHeight:"80px",maxHeight:"none"}})]}),(!t||r)&&a.jsxs("div",{className:`p-1.5 rounded-lg flex items-center gap-1.5 text-xs flex-shrink-0 ${e?"bg-yellow-900/30 border-yellow-700":"bg-yellow-50 border-yellow-200"} border`,children:[a.jsx(nn,{size:12,className:"text-yellow-600 flex-shrink-0"}),a.jsx("span",{className:"text-yellow-600 text-xs leading-tight",children:r||"AI service not configured. Please add your Google Cloud API key."})]}),k&&a.jsxs("div",{className:`p-1.5 rounded-lg flex items-center gap-1.5 text-xs flex-shrink-0 ${e?"bg-red-900/30 border-red-700":"bg-red-50 border-red-200"} border`,children:[a.jsx(nn,{size:12,className:"text-red-600 flex-shrink-0"}),a.jsx("span",{className:"text-red-600 text-xs",children:k})]}),a.jsx("button",{onClick:L,disabled:T||!t||!u||!p.trim(),className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg font-medium text-sm flex-shrink-0 ${T||!t||!u||!p.trim()?"opacity-50 cursor-not-allowed":""} ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:T?a.jsxs(a.Fragment,{children:[a.jsx(ds,{size:16,className:"animate-spin"}),"Analyzing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ws,{size:16}),"Check ATS Score"]})})]}),a.jsxs("div",{className:`${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-4 flex flex-col overflow-hidden shadow-lg`,children:[a.jsx("h2",{className:`text-lg font-semibold mb-4 ${e?"text-white":"text-gray-900"}`,children:"ATS Analysis Results"}),a.jsx("div",{className:`flex-1 overflow-y-auto pr-2 custom-scrollbar ${e?"dark-scrollbar":""}`,style:{scrollbarWidth:"thin",scrollbarColor:e?"#4B5563 #1F2937":"#CBD5E1 #F3F4F6"},children:x?a.jsxs("div",{className:"space-y-5",children:[a.jsx("div",{className:`rounded-xl border-2 p-5 shadow-md ${e?"bg-gradient-to-br from-gray-900/80 to-gray-800/80 border-gray-600":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-300"}`,children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("h3",{className:`font-bold text-base mb-4 ${e?"text-gray-200":"text-gray-800"}`,children:"Overall ATS Score"}),a.jsx(ZD,{value:x.overallScore,size:140,strokeWidth:12,isDarkMode:e})]})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-base mb-4 ${e?"text-gray-200":"text-gray-800"}`,children:"Score Breakdown"}),a.jsx("div",{className:"flex flex-wrap gap-3 justify-between",children:Object.entries(x.breakdown).map(([I,_])=>a.jsxs("div",{className:`p-3 rounded-lg flex flex-col items-center flex-1 min-w-0 ${e?"bg-gray-900/50":"bg-gray-50"}`,style:{flex:"1 1 0",minWidth:"120px"},children:[a.jsx("span",{className:`text-xs font-medium capitalize mb-2 text-center ${e?"text-gray-300":"text-gray-700"}`,children:I.replace(/([A-Z])/g," $1").trim()}),a.jsx(e1,{value:_,size:70,strokeWidth:6,isDarkMode:e})]},I))})]}),x.strengths.length>0&&a.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-green-900/20 border border-green-800/50":"bg-green-50 border border-green-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Ws,{size:20,className:"text-green-600"}),a.jsx("h3",{className:`font-bold text-base ${e?"text-green-400":"text-green-700"}`,children:"Strengths"})]}),a.jsx("ul",{className:"space-y-2.5",children:x.strengths.map((I,_)=>a.jsxs("li",{className:`text-sm flex items-start gap-2.5 ${e?"text-gray-300":"text-gray-700"}`,children:[a.jsx("span",{className:"text-green-600 mt-1 font-bold",children:"âœ“"}),a.jsx("span",{children:I})]},_))})]}),x.recommendations.length>0&&a.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-yellow-900/20 border border-yellow-800/50":"bg-yellow-50 border border-yellow-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(nn,{size:20,className:"text-yellow-600"}),a.jsx("h3",{className:`font-bold text-base ${e?"text-yellow-400":"text-yellow-700"}`,children:"Recommendations"})]}),a.jsx("ul",{className:"space-y-2.5",children:x.recommendations.map((I,_)=>a.jsxs("li",{className:`text-sm flex items-start gap-2.5 ${e?"text-gray-300":"text-gray-700"}`,children:[a.jsx("span",{className:"text-yellow-600 mt-1 font-bold",children:"â†’"}),a.jsx("span",{children:I})]},_))})]})]}):a.jsxs("div",{className:`text-center py-12 ${e?"text-gray-400":"text-gray-500"}`,children:[a.jsx(ls,{size:48,className:`mx-auto mb-4 ${e?"text-gray-600":"text-gray-300"}`}),a.jsx("p",{className:"text-sm",children:'Upload your PDF resume and add a job description, then click "Check ATS Score"'})]})})]})]})]})};class n1 extends Vm.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ATSResumeChecker Error:",e,t)}render(){var e;return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-red-200 dark:border-red-800",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(nn,{className:"text-red-600",size:24}),a.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Something went wrong"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred while loading the ATS Resume Checker."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const s1=()=>a.jsx(n1,{children:a.jsx(t1,{})});class r1{constructor(){this.enabled=!1,this.gem=void 0;try{const e="AIzaSyAncE2TfOjhaU8SxlijCUg7mTD7GoS2oho";if(!e||e.trim()===""){this.enabled=!1;return}try{this.gem=new fa(e),this.enabled=!0}catch(t){console.warn("Failed to initialize Google Generative AI:",t),this.enabled=!1,this.gem=void 0}}catch(e){console.warn("Failed to initialize PDFAnalysisService:",e),this.enabled=!1,this.gem=void 0}}async fileToBase64(e){return new Promise((t,s)=>{const r=new FileReader;r.onload=()=>{const o=r.result.split(",")[1];t(o)},r.onerror=s,r.readAsDataURL(e)})}async askQuestion(e,t){if(!this.enabled||!this.gem)return{answer:"AI service is not available. Please configure your Google Cloud API key in the .env file.",source:"ai",confidence:"low"};try{const s=this.gem.getGenerativeModel({model:"gemini-2.5-pro",generationConfig:{temperature:.3,topP:.95}}),r=await this.fileToBase64(e),i=`You are an intelligent document analysis assistant. A user has uploaded a PDF document and asked a question about it.

CRITICAL INSTRUCTIONS:
1. First, carefully analyze the PDF content to see if it contains information relevant to the user's question.
2. If the answer CAN be found in the PDF:
   - Answer the question using ONLY information from the PDF
   - Be specific and cite relevant details from the document
   - Format your answer in a structured way:
     * Use clear paragraphs for different topics
     * Use bullet points (-) or numbered lists (1., 2., etc.) for multiple items
     * Use section headers (ending with :) for major topics
     * Break long paragraphs into shorter, readable chunks
   - Return a JSON object with: {"answer": "your structured answer from PDF", "source": "pdf", "confidence": "high"}

3. If the answer CANNOT be found in the PDF:
   - Start your answer with: "âš ï¸ The information you're looking for is not present in the uploaded PDF document. However, here's a general answer:"
   - Then provide a helpful general AI answer in a structured format:
     * Use clear paragraphs
     * Use bullet points (-) or numbered lists for multiple items
     * Use section headers (ending with :) for major topics
     * Break information into digestible sections
   - Return a JSON object with: {"answer": "âš ï¸ The information you're looking for is not present in the uploaded PDF document. However, here's a general answer:

[your structured general answer]", "source": "ai", "confidence": "medium"}

4. If the answer is PARTIALLY in the PDF:
   - Provide the information from the PDF first in a structured format
   - Then mention what additional information might be helpful
   - Return: {"answer": "pdf answer (structured).

Note: [additional info]", "source": "pdf", "confidence": "medium"}

FORMATTING GUIDELINES:
- Use line breaks (\\n) to separate paragraphs
- Use bullet points (-) for lists
- Use numbered lists (1., 2., 3.) for sequential steps
- Use section headers (ending with :) for major topics
- Keep paragraphs concise (3-4 sentences max)
- Make the answer easy to scan and read

User's Question: ${t}

IMPORTANT: Return ONLY valid JSON. Do not include any markdown, code blocks, or explanatory text. Only return the JSON object.
Example format: {"answer": "your structured answer here\\n\\nWith proper formatting", "source": "pdf", "confidence": "high"}`,l=(await s.generateContent([{inlineData:{data:r,mimeType:"application/pdf"}},{text:i}])).response.text().trim();let c;try{let u=l.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").trim();const m=u.indexOf("{");m>0&&(u=u.substring(m));const p=u.lastIndexOf("}");p>=0&&p<u.length-1&&(u=u.substring(0,p+1));const g=u.match(/\{[\s\S]*\}/);if(g){if(c=JSON.parse(g[0]),!c.answer||!c.source)throw new Error("Invalid response format");const x=c.answer.toLowerCase();(x.includes("not present")||x.includes("cannot find")||x.includes("âš ï¸"))&&(c.source="ai")}else throw new Error("No JSON found in response")}catch{const m=l.toLowerCase(),p=!m.includes("not present")&&!m.includes("cannot find")&&!m.includes("âš ï¸")&&m.length>20;c={answer:l,source:p?"pdf":"ai",confidence:"medium"}}return c}catch(s){return console.error("PDF analysis error:",s),{answer:`Failed to analyze PDF: ${(s==null?void 0:s.message)||"Unknown error"}. Please try again.`,source:"ai",confidence:"low"}}}isEnabled(){return this.enabled}}const tl=[{id:"ats-resume-checker",title:"ATS Resume Checker",description:"Upload your resume and check its compatibility with job descriptions using AI-powered ATS analysis.",keywords:["ats","resume","checker","compatibility","job","description","score","applicant tracking system"],icon:Ws,path:"/ats-checker"},{id:"resume-builder",title:"Resume Builder",description:"Build and customize your resume with AI assistance. Generate professional resumes tailored to your experience.",keywords:["resume","builder","create","generate","cv","curriculum vitae","professional"],icon:ls,path:"/resume-builder"},{id:"career-path",title:"Career Path",description:"Explore career paths and get personalized guidance for your professional journey.",keywords:["career","path","guidance","professional","journey","explore"],icon:Ht,path:"/career-path"},{id:"project-suggestion",title:"Project Suggestion",description:"Get AI-powered project suggestions based on your skills and career goals.",keywords:["project","suggestion","ideas","portfolio","skills","goals"],icon:cs,path:"/project-suggestion"},{id:"courses",title:"Courses",description:"Browse and enroll in courses to enhance your skills and knowledge.",keywords:["courses","learn","education","training","skills","enroll"],icon:Oe,path:"/courses"},{id:"mock-interview",title:"Mock Interview",description:"Practice interviews with AI-powered mock interview sessions.",keywords:["interview","mock","practice","preparation","questions"],icon:rs,path:"/mock-interview"}],i1=()=>{const{isDarkMode:n}=De(),[e,t]=V.useState(""),[s,r]=V.useState(tl),i=V.useRef({}),[o,l]=V.useState(null),[c,u]=V.useState(null),[m,p]=V.useState(null),[g,x]=V.useState(!1),b=V.useRef(null);V.useEffect(()=>{try{const P=new r1;u(P)}catch(P){console.error("Failed to initialize PDF service:",P)}},[]),V.useEffect(()=>{if(o)return;if(!e.trim()){r(tl),p(null);return}const P=e.toLowerCase().trim(),L=tl.filter(U=>{const F=U.title.toLowerCase().includes(P),I=U.description.toLowerCase().includes(P),_=U.keywords.some(w=>w.toLowerCase().includes(P));return F||I||_});if(r(L),L.length>0&&e.trim()){const U=L[0].id,F=i.current[U];F&&setTimeout(()=>{F.scrollIntoView({behavior:"smooth",block:"start"}),F.classList.add("ring-4","ring-blue-500","ring-opacity-50"),setTimeout(()=>{F.classList.remove("ring-4","ring-blue-500","ring-opacity-50")},2e3)},100)}},[e,o]);const T=P=>{const L=P.split(`
`).filter(N=>N.trim()),U=/^\d+[\.\)]\s/.test(P),F=/^[-â€¢*]\s/.test(P),I=P.includes(":")&&(P.includes(`
`)||P.split(":").length>2),_=N=>{let D=N;if(N.includes("**")){const A=[];let $=0;const Q=/\*\*([^*]+)\*\*/g;let G;for(;(G=Q.exec(N))!==null;)G.index>$&&A.push(N.substring($,G.index)),A.push(a.jsx("span",{className:`font-semibold ${n?"text-white":"text-gray-900"}`,children:G[1]},`bold-${G.index}`)),$=G.index+G[0].length;$<N.length&&A.push(N.substring($)),D=a.jsx(a.Fragment,{children:A})}else D=N;return D};if(!U&&!F&&!I&&L.length<=3)return a.jsx("p",{className:"leading-relaxed select-text",children:_(P)});const w=[];let S=[];return L.forEach((N,D)=>{var $;const A=N.trim();if(/^\d+[\.\)]\s/.test(A)){S.length>0&&(w.push(a.jsx("p",{className:"mb-3 leading-relaxed select-text",children:_(S.join(" "))},`para-${D}`)),S=[]);const Q=A.replace(/^\d+[\.\)]\s/,""),G=($=A.match(/^\d+[\.\)]/))==null?void 0:$[0];w.push(a.jsxs("div",{className:"mb-2 ml-4 select-text",children:[a.jsx("span",{className:"font-medium mr-2",children:G}),a.jsx("span",{className:"leading-relaxed",children:_(Q)})]},`item-${D}`))}else if(/^[-â€¢*]\s/.test(A)){S.length>0&&(w.push(a.jsx("p",{className:"mb-3 leading-relaxed select-text",children:_(S.join(" "))},`para-${D}`)),S=[]);const Q=A.replace(/^[-â€¢*]\s/,"");w.push(a.jsxs("div",{className:"mb-2 ml-4 flex items-start select-text",children:[a.jsx("span",{className:"mr-2 mt-1",children:"â€¢"}),a.jsx("span",{className:"leading-relaxed flex-1",children:_(Q)})]},`bullet-${D}`))}else if(A.endsWith(":")&&A.length<100||A.startsWith("**")){S.length>0&&(w.push(a.jsx("p",{className:"mb-3 leading-relaxed select-text",children:_(S.join(" "))},`para-${D}`)),S=[]);const Q=A.replace(/\*\*/g,"");w.push(a.jsx("h4",{className:`font-semibold mb-2 mt-4 first:mt-0 select-text ${n?"text-white":"text-gray-900"}`,children:_(Q)},`header-${D}`))}else S.push(A)}),S.length>0&&w.push(a.jsx("p",{className:"mb-3 leading-relaxed select-text",children:_(S.join(" "))},"para-final")),w.length===0?a.jsx("p",{className:"leading-relaxed select-text",children:_(P)}):a.jsx("div",{className:"space-y-2",children:w})},C=P=>{var U;const L=(U=P.target.files)==null?void 0:U[0];L&&(L.type==="application/pdf"||L.name.toLowerCase().endsWith(".pdf")?(l(L),p(null),t("")):alert("Please upload a PDF file only."))},k=()=>{l(null),p(null),t(""),b.current&&(b.current.value="")},R=async P=>{if(P.preventDefault(),o&&c&&e.trim()&&!g){const L=e.trim();x(!0),p(null);try{const U=await c.askQuestion(o,L);p({question:L,response:U})}catch(U){p({question:L,response:{answer:`Error: ${(U==null?void 0:U.message)||"Failed to analyze PDF"}`,source:"ai",confidence:"low"}})}finally{x(!1)}}};return a.jsxs("div",{className:"min-h-screen px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:`sticky top-0 z-50 mb-6 ${n?"bg-gray-900":"bg-[#F5F1EB]"} pb-4`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:`flex-1 relative flex items-center ${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-xl px-4 py-3 shadow-lg focus-within:ring-2 focus-within:ring-blue-500/20 transition-all`,children:[a.jsx(Bl,{size:20,className:`${n?"text-gray-400":"text-gray-500"} mr-3 flex-shrink-0`}),a.jsx("input",{type:"text",placeholder:o?"Ask a question about your PDF...":"Search containers (e.g., ATS, Resume, Career, Project)...",value:e,onChange:P=>t(P.target.value),onKeyDown:P=>{P.key==="Enter"&&o&&R(P)},className:`w-full bg-transparent outline-none text-sm ${n?"text-white placeholder-gray-400":"text-gray-900 placeholder-gray-500"}`}),e&&a.jsx("button",{onClick:()=>t(""),className:"ml-2 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"âœ•"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:b,type:"file",accept:".pdf",onChange:C,className:"hidden"}),a.jsxs("button",{onClick:()=>{var P;return(P=b.current)==null?void 0:P.click()},className:`group relative flex items-center justify-center gap-2 px-4 py-2.5 rounded-md font-semibold text-sm tracking-tight transition-all duration-150 ${n?"bg-blue-600 hover:bg-blue-500 text-white border border-blue-500/30 shadow-sm hover:shadow-md hover:border-blue-400/50":"bg-blue-600 hover:bg-blue-500 text-white border border-blue-500/20 shadow-sm hover:shadow-md hover:border-blue-400/40"} active:scale-[0.98]`,children:[a.jsx(fo,{size:15,className:"transition-all duration-150 group-hover:scale-110",strokeWidth:2.5}),a.jsx("span",{className:"relative",children:"Upload PDF"})]})]})]}),e&&!o&&a.jsxs("div",{className:`mt-2 text-sm ${n?"text-gray-400":"text-gray-600"}`,children:["Found ",s.length," container",s.length!==1?"s":""]}),o&&a.jsxs("div",{className:`mt-3 flex items-center justify-between p-3 rounded-lg ${n?"bg-gray-800 border-gray-700":"bg-blue-50 border-blue-200"} border`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{size:20,className:"text-blue-600"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-white":"text-gray-900"}`,children:o.name}),a.jsxs("span",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:["(",(o.size/1024).toFixed(1)," KB)"]})]}),a.jsx("button",{onClick:k,className:"p-1 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:a.jsx(kn,{size:16,className:n?"text-gray-400":"text-gray-600"})})]})]}),o&&(m||g)&&a.jsx("div",{className:`mb-6 ${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-6 shadow-lg`,children:g?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ds,{size:20,className:"animate-spin text-blue-600"}),a.jsx("span",{className:`text-sm ${n?"text-gray-300":"text-gray-700"}`,children:"Analyzing PDF..."})]}):m&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-sm font-medium mb-2 ${n?"text-gray-400":"text-gray-600"}`,children:"Question:"}),a.jsx("p",{className:`text-base ${n?"text-white":"text-gray-900"}`,children:m.question})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center gap-2 mb-3",children:m.response.source==="pdf"?a.jsxs(a.Fragment,{children:[a.jsx(Ws,{size:16,className:"text-green-500"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-green-400":"text-green-600"}`,children:"Answer from PDF"})]}):a.jsxs(a.Fragment,{children:[a.jsx(nn,{size:16,className:"text-yellow-500"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-yellow-400":"text-yellow-600"}`,children:"Information not in PDF - General AI answer"})]})}),a.jsx("div",{className:`rounded-lg p-4 ${n?"bg-gray-700":"bg-gray-50"}`,children:a.jsx("div",{className:`text-sm ${n?"text-gray-200":"text-gray-800"} prose prose-sm max-w-none select-text`,children:T(m.response.answer)})})]})]})}),!o&&a.jsx("div",{className:"space-y-6",children:s.length===0?a.jsxs("div",{className:`text-center py-12 ${n?"text-gray-400":"text-gray-500"}`,children:[a.jsxs("p",{className:"text-lg",children:['No containers found matching "',e,'"']}),a.jsx("p",{className:"text-sm mt-2",children:"Try searching for: ATS, Resume, Career, Project, Courses, Interview"})]}):s.map(P=>{const L=P.icon;return a.jsx("div",{ref:U=>i.current[P.id]=U,id:`container-${P.id}`,children:a.jsx(tt,{to:P.path,className:`block transition-all duration-300 cursor-pointer ${n?"bg-gray-800 border-gray-700 hover:border-blue-600 hover:bg-gray-700/50":"bg-white border-gray-200 hover:border-blue-500 hover:bg-gray-50"} border rounded-2xl p-6 shadow-md hover:shadow-lg`,children:a.jsx("div",{className:"flex items-start",children:a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:`p-2 rounded-lg ${n?"bg-gray-700":"bg-gray-100"}`,children:a.jsx(L,{size:24,className:n?"text-blue-400":"text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-gray-900"}`,children:P.title}),a.jsx("p",{className:`text-sm mt-1 ${n?"text-gray-400":"text-gray-600"}`,children:P.description})]})]})})})},P.id)})})]})};class py{constructor(){this.enabled=!1,this.gem=void 0;try{const e="AIzaSyAncE2TfOjhaU8SxlijCUg7mTD7GoS2oho";if(!e||e.trim()===""){this.enabled=!1;return}try{this.gem=new fa(e),this.enabled=!0}catch(t){console.warn("Failed to initialize Google Generative AI:",t),this.enabled=!1,this.gem=void 0}}catch(e){console.warn("Failed to initialize ProjectSuggestionService:",e),this.enabled=!1,this.gem=void 0}}isYouTubeUrl(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/.test(e.trim())}extractYouTubeId(e){const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const s of t){const r=e.match(s);if(r&&r[1])return r[1]}return null}async fetchYouTubeMetadata(e){try{const t=`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${e}&format=json`,s=await fetch(t);if(!s.ok)return null;const r=await s.json();let i="";try{const c=(await(await fetch(`https://www.youtube.com/watch?v=${e}`,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}})).text()).match(/<meta name="description" content="([^"]+)"/);c&&(i=c[1])}catch(o){console.warn("Could not fetch video description:",o)}return{title:r.title||"",description:i||r.title||""}}catch(t){return console.warn("Failed to fetch YouTube metadata:",t),null}}async generateProjectIdeas(e){if(!this.enabled||!this.gem)return{projects:[],summary:"AI service is not available. Please configure your Google Cloud API key in the .env file."};const t=this.isYouTubeUrl(e);let s=null;if(t){const o=this.extractYouTubeId(e);o&&(s=await this.fetchYouTubeMetadata(o))}const r=["gemini-2.5-flash","gemini-2.5-pro","gemini-1.5-pro"];let i=null;for(const o of r)try{const l=this.gem.getGenerativeModel({model:o,generationConfig:{temperature:.7,topP:.95}});let c="";if(t){const g=this.extractYouTubeId(e);if(!g)return{projects:[],summary:"Invalid YouTube URL. Please provide a valid YouTube video URL."};const x=`https://www.youtube.com/watch?v=${g}`;let b="";s&&(b=`
VIDEO INFORMATION:
Title: ${s.title}
Description: ${s.description.substring(0,500)}${s.description.length>500?"...":""}
`),c=`You are an expert project idea generator. Analyze this YouTube video and generate project ideas based on its ACTUAL content.

YouTube Video URL: ${x}
Video ID: ${g}
${b}

âš ï¸ CRITICAL: You MUST analyze THIS SPECIFIC VIDEO (ID: ${g}). The video title is: "${(s==null?void 0:s.title)||"Unknown"}". Do NOT analyze a different video or generate generic projects unrelated to this video's topic.

CRITICAL ANALYSIS INSTRUCTIONS:
1. FIRST, watch/analyze the video content carefully. Pay attention to:
   - The main topic/subject of the video
   - Any problems, challenges, or pain points mentioned
   - Technologies, tools, or concepts taught
   - Real-world applications or use cases discussed
   - Any gaps or areas where projects could be built

2. If this is an educational/tutorial video (like a beginner course), focus on:
   - Projects that help practice and apply what is taught in the video
   - Projects that solve problems related to the topic being taught
   - Projects that extend beyond the basics shown in the video

3. Generate 5-7 project ideas that:
   - Are directly related to the video's content and topic
   - Address problems or learning opportunities from the video
   - Use technologies mentioned or relevant to the video topic
   - Are practical and buildable
   - Match the skill level appropriate for the video (e.g., if it's a beginner course, include beginner-friendly projects)

4. IMPORTANT: The projects MUST be relevant to the ACTUAL video content. If the video is about HTML basics, the projects should be HTML/web development projects. If the video is about Python, the projects should be Python projects. Do NOT generate generic projects unrelated to the video topic.

Return ONLY valid JSON matching this exact schema:
{
  "summary": "Brief summary of the main topic and problems/opportunities identified in the video",
  "projects": [
    {
      "title": "Project name",
      "description": "Brief description of what the project does",
      "problem": "The specific problem or learning opportunity this project addresses (from the video)",
      "solution": "How this project addresses the problem or applies the video concepts",
      "technologies": ["tech1", "tech2", "tech3"],
      "difficulty": "Beginner" | "Intermediate" | "Advanced",
      "estimatedTime": "e.g., '2-3 weeks' or '1-2 months'",
      "realWorldImpact": "How this project can make a real difference or help learn the concepts"
    }
  ]
}

CRITICAL VALIDATION: 
- You MUST analyze the video at URL: ${x} (ID: ${g})
- Analyze the ACTUAL video content, not generic problems
- Projects must match the video's topic and content EXACTLY
- If the video teaches HTML, ALL projects should be HTML/web development projects
- If the video teaches Python, ALL projects should be Python projects
- If the video is about computer vision, projects should be computer vision projects
- DO NOT mix topics - if the video is about HTML basics, do NOT generate computer vision or other unrelated projects
- Return ONLY valid JSON, no markdown formatting, no explanatory text before or after

Before generating projects, confirm: "I am analyzing video ${g} which is about [topic]. The projects I generate will be related to [topic]."`}else c=`You are an expert project idea generator. Analyze the following text and identify real-world problems mentioned. Based on those problems, suggest practical project ideas that can solve them.

Text Content:
${e}

CRITICAL INSTRUCTIONS:
1. Analyze the text to identify real-world problems, challenges, or pain points mentioned
2. Generate 5-7 project ideas that address these problems
3. Each project should be:
   - Practical and buildable
   - Based on real-world problems from the text
   - Include specific technologies that would be suitable
   - Have clear impact potential
   - Be appropriate for different skill levels

Return ONLY valid JSON matching this schema:
{
  "summary": "Brief summary of the main problems identified in the text",
  "projects": [
    {
      "title": "Project name",
      "description": "Brief description of what the project does",
      "problem": "The specific real-world problem this project solves (from the text)",
      "solution": "How this project addresses the problem",
      "technologies": ["tech1", "tech2", "tech3"],
      "difficulty": "Beginner" | "Intermediate" | "Advanced",
      "estimatedTime": "e.g., '2-3 weeks' or '1-2 months'",
      "realWorldImpact": "How this project can make a real difference"
    }
  ]
}

IMPORTANT: 
- Focus on problems ACTUALLY mentioned in the text
- Make projects practical and achievable
- Include a mix of difficulty levels
- Ensure technologies are relevant and modern
- Return ONLY valid JSON, no markdown or explanatory text`;const m=(await l.generateContent(c)).response.text().trim();let p;try{let g=m.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").trim();const x=g.indexOf("{");x>0&&(g=g.substring(x));const b=g.lastIndexOf("}");b>=0&&b<g.length-1&&(g=g.substring(0,b+1));const T=g.match(/\{[\s\S]*\}/);if(T)p=JSON.parse(T[0]);else throw new Error("No JSON found in response")}catch(g){console.error(`Failed to parse response from ${o}:`,g),i=g;continue}if(!p.projects||p.projects.length===0){i=new Error("No projects generated");continue}if(t&&s){const g=s.title.toLowerCase();if(!p.projects.some(b=>{const T=`${b.title} ${b.description} ${b.technologies.join(" ")}`.toLowerCase();return g.split(/\s+/).filter(k=>k.length>3).some(k=>T.includes(k))})&&r.indexOf(o)<r.length-1){console.warn(`Projects from ${o} don't seem relevant, trying next model...`),i=new Error("Projects not relevant to video topic");continue}}return p}catch(l){console.warn(`Error with model ${o}:`,l),i=l;continue}return{projects:[],summary:`Failed to generate project ideas after trying multiple AI models. ${(i==null?void 0:i.message)||"Unknown error"}. ${t?'Try using "Text Input" mode and paste the video description or transcript instead.':"Please try again."}`}}async generateProjectHints(e,t,s){if(!this.enabled||!this.gem)return{title:e,problemStatement:t,hints:[],summary:"AI service is not available. Please configure your Google Cloud API key in the .env file."};const r=["gemini-2.5-flash","gemini-2.5-pro","gemini-1.5-pro"];let i=null;for(const o of r)try{const l=this.gem.getGenerativeModel({model:o,generationConfig:{temperature:.7,topP:.95}}),c=`You are an expert software architect and mentor. A user is working on a project titled "${e}" with the core problem: "${t}". The suggested technologies are: ${s.join(", ")}.

Your task is to provide detailed hints, a structured approach, and potentially code snippets to help solve this problem. Focus on breaking down the problem into manageable steps, suggesting specific implementation strategies, and outlining the overall structure.

CRITICAL INSTRUCTIONS:
1. Provide a comprehensive, step-by-step guide to solve the problem.
2. Break down the solution into logical sections (e.g., "Understanding the Problem", "Core Implementation Steps", "Structuring Your Code", "Key Considerations").
3. For each section, provide clear, actionable advice.
4. If applicable, include small, illustrative code snippets (e.g., a basic component structure, a utility function, a CSS class example) in markdown format.
5. Ensure the hints are practical and directly address the problem statement using the specified technologies.
6. The response MUST be a valid JSON object matching the following schema:

{
  "title": "${e}",
  "problemStatement": "${t}",
  "hints": [
    {
      "heading": "Section Heading (e.g., Understanding the Problem)",
      "content": [
        "Paragraph 1 or bullet point 1",
        "Paragraph 2 or bullet point 2"
      ],
      "code": {
        "language": "javascript",
        "snippet": "console.log('Example code');"
      }
    }
  ],
  "summary": "A brief concluding summary or next steps."
}

IMPORTANT:
- Include 4-6 hint sections covering different aspects of solving the problem
- Each section should have a clear heading and 2-4 content items
- Include code snippets where relevant (HTML, CSS, JavaScript, etc.)
- Make hints actionable and specific, not just theoretical
- Focus on the actual problem statement provided
- Return ONLY valid JSON, no markdown formatting outside the JSON block, no explanatory text before or after`,m=(await l.generateContent(c)).response.text().trim();let p;try{let g=m.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").trim();const x=g.indexOf("{");x>0&&(g=g.substring(x));const b=g.lastIndexOf("}");b>=0&&b<g.length-1&&(g=g.substring(0,b+1));const T=g.match(/\{[\s\S]*\}/);if(T)p=JSON.parse(T[0]);else throw new Error("No JSON found in response");if(!p.hints||p.hints.length===0)throw new Error("No hints were generated");return p.title=e,p.problemStatement=t,p}catch(g){console.error(`Failed to parse hints response from ${o}:`,g),i=g;continue}}catch(l){console.warn(`Error with model ${o} for hints:`,l),i=l;continue}return{title:e,problemStatement:t,hints:[],summary:`Failed to generate project hints after trying multiple AI models. ${(i==null?void 0:i.message)||"Unknown error"}. Please try again.`}}isEnabled(){return this.enabled}}class o1{isEnglish(e){return e?!/[\u4e00-\u9fff\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af]/.test(e):!1}validateProject(e){return!!(e.title&&e.title.trim().length>0&&e.description&&e.description.trim().length>0&&e.problem&&e.problem.trim().length>0&&e.solution&&e.solution.trim().length>0&&e.technologies&&e.technologies.length>0&&e.difficulty&&["Beginner","Intermediate","Advanced"].includes(e.difficulty)&&e.estimatedTime&&e.estimatedTime.trim().length>0&&e.realWorldImpact&&e.realWorldImpact.trim().length>0&&this.isEnglish(e.title)&&this.isEnglish(e.description))}async fetchTrendingRepos(){try{const e=new Date;e.setDate(e.getDate()-21);const s=`https://api.github.com/search/repositories?q=created:>${e.toISOString().split("T")[0]}+stars:>25&sort=stars&order=desc&per_page=50`,r=await fetch(s,{headers:{Accept:"application/vnd.github.v3+json"}});if(!r.ok)throw new Error(`GitHub API error: ${r.status}`);const o=(await r.json()).items.map(l=>{let c="Intermediate";l.stargazers_count>1e3?c="Advanced":l.stargazers_count<100&&(c="Beginner");const u=[];l.language&&u.push(l.language),(Array.isArray(l.topics)?l.topics:[]).slice(0,2).forEach(g=>{u.includes(g)||u.push(g)}),u.length===0&&u.push("JavaScript","TypeScript");let p="1-2 weeks";return l.stargazers_count>500?p="2-4 weeks":l.stargazers_count<50&&(p="3-5 days"),{title:this.formatProjectTitle(l.name),description:l.description||`A ${l.language||"web"} project: ${l.name}`,problem:`Building a ${l.name} project that solves real-world problems using modern technologies and best practices.`,solution:`Implement ${l.name} using ${u.join(", ")} with proper architecture, testing, and documentation.`,technologies:u.slice(0,4),difficulty:c,estimatedTime:p,realWorldImpact:`This project demonstrates ${l.language||"modern"} development practices and can serve as a portfolio piece or learning resource.`,repositoryUrl:l.html_url}}).filter(l=>this.validateProject(l)).slice(0,9);if(o.length<9){const c=await fetch("https://api.github.com/search/repositories?q=stars:>200&sort=stars&order=desc&per_page=50",{headers:{Accept:"application/vnd.github.v3+json"}});if(c.ok){const m=(await c.json()).items.map(x=>{let b="Intermediate";x.stargazers_count>1e3?b="Advanced":x.stargazers_count<100&&(b="Beginner");const T=[];x.language&&T.push(x.language),(Array.isArray(x.topics)?x.topics:[]).slice(0,2).forEach(R=>{T.includes(R)||T.push(R)}),T.length===0&&T.push("JavaScript","TypeScript");let k="1-2 weeks";return x.stargazers_count>500?k="2-4 weeks":x.stargazers_count<50&&(k="3-5 days"),{title:this.formatProjectTitle(x.name),description:x.description||`A ${x.language||"web"} project: ${x.name}`,problem:`Building a ${x.name} project that solves real-world problems using modern technologies and best practices.`,solution:`Implement ${x.name} using ${T.join(", ")} with proper architecture, testing, and documentation.`,technologies:T.slice(0,4),difficulty:b,estimatedTime:k,realWorldImpact:`This project demonstrates ${x.language||"modern"} development practices and can serve as a portfolio piece or learning resource.`,repositoryUrl:x.html_url}}).filter(x=>this.validateProject(x)),p=new Set(o.map(x=>x.repositoryUrl)),g=m.filter(x=>!p.has(x.repositoryUrl)).slice(0,9-o.length);o.push(...g)}}return o}catch(e){return console.error("Error fetching trending projects from GitHub:",e),this.getFallbackProjects()}}formatProjectTitle(e){return e.replace(/[-_]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}getFallbackProjects(){return[{title:"Responsive Product Card Grid",description:'Design and implement a responsive grid of product cards, each featuring an image, title, price, and a "Add to Cart" button.',problem:"Applying Tailwind's flexbox/grid utilities and responsive design principles to create structured and adaptable layouts for multiple items.",solution:"Utilize Tailwind's grid and flex utilities for layout, responsive prefixes (sm:, md:, lg:) for adapting the grid columns and card stacking.",technologies:["HTML","Tailwind CSS"],difficulty:"Beginner",estimatedTime:"1-2 days",realWorldImpact:"Helps in building e-commerce product displays, portfolio sections, or any content gallery that needs to look good on all devices."},{title:"Todo List with Local Storage",description:"Create a functional todo list application that persists data in the browser's local storage, with add, edit, delete, and mark complete features.",problem:"Managing state persistence across browser sessions and implementing CRUD operations with proper data validation.",solution:"Use JavaScript to handle DOM manipulation, localStorage API for persistence, and implement proper event handling for user interactions.",technologies:["HTML","CSS","JavaScript"],difficulty:"Beginner",estimatedTime:"2-3 days",realWorldImpact:"Fundamental project for understanding state management, data persistence, and building interactive web applications."},{title:"Weather Dashboard",description:"Build a weather dashboard that fetches and displays current weather data and forecasts using a weather API.",problem:"Integrating external APIs, handling asynchronous data fetching, and displaying dynamic content based on API responses.",solution:"Use fetch API or axios to make HTTP requests, handle promises/async-await, parse JSON responses, and update UI dynamically.",technologies:["HTML","CSS","JavaScript","API"],difficulty:"Intermediate",estimatedTime:"3-5 days",realWorldImpact:"Teaches API integration, error handling, and building real-world applications that consume external data services."},{title:"E-commerce Shopping Cart",description:"Implement a shopping cart system with add to cart, remove items, update quantities, and calculate totals functionality.",problem:"Managing complex state for multiple items, calculating dynamic totals, and maintaining cart state across page interactions.",solution:"Use JavaScript objects/arrays to manage cart items, implement quantity updates, calculate totals dynamically, and handle edge cases.",technologies:["HTML","CSS","JavaScript"],difficulty:"Intermediate",estimatedTime:"1 week",realWorldImpact:"Core functionality for any e-commerce website, teaching state management and complex user interactions."},{title:"Blog Post with Comments",description:"Create a blog post page with a comment section that allows users to add, edit, and delete comments with timestamps.",problem:"Building a dynamic comment system with real-time updates, form validation, and maintaining comment hierarchy.",solution:"Implement comment data structure, create form handlers for adding/editing, use timestamps for sorting, and manage comment state.",technologies:["HTML","CSS","JavaScript"],difficulty:"Beginner",estimatedTime:"2-3 days",realWorldImpact:"Common feature in content websites, teaching form handling, data manipulation, and user-generated content management."},{title:"Password Generator",description:"Build a secure password generator with customizable length, character types (uppercase, lowercase, numbers, symbols), and copy functionality.",problem:"Generating cryptographically secure random passwords with user-defined constraints and implementing secure copy-to-clipboard functionality.",solution:"Use Math.random() or crypto API for randomness, implement character set filtering, generate passwords based on user preferences, and use Clipboard API.",technologies:["HTML","CSS","JavaScript"],difficulty:"Beginner",estimatedTime:"1-2 days",realWorldImpact:"Practical utility tool that teaches random generation, user preferences handling, and browser APIs."},{title:"Expense Tracker",description:"Develop an expense tracking application that allows users to add, categorize, and visualize their expenses with charts.",problem:"Managing financial data, categorizing expenses, calculating totals by category, and visualizing data with charts or graphs.",solution:"Create data models for expenses, implement categorization logic, calculate statistics, and use chart libraries like Chart.js for visualization.",technologies:["HTML","CSS","JavaScript","Chart.js"],difficulty:"Intermediate",estimatedTime:"1 week",realWorldImpact:"Personal finance management tool that teaches data visualization, categorization, and building practical applications."},{title:"Recipe Finder App",description:"Create an application that searches for recipes based on ingredients, displays recipe details, and allows saving favorites.",problem:"Searching and filtering data based on multiple criteria, displaying detailed information, and implementing favorites/bookmarking functionality.",solution:"Integrate recipe API, implement search/filter logic, create detail views, and use localStorage for saving favorite recipes.",technologies:["HTML","CSS","JavaScript","API"],difficulty:"Intermediate",estimatedTime:"1 week",realWorldImpact:"Practical application for finding recipes, teaching API integration, search functionality, and data management."},{title:"Interactive Quiz App",description:"Build an interactive quiz application with multiple choice questions, score tracking, timer, and results summary.",problem:"Managing quiz state, tracking user answers, calculating scores, implementing timers, and displaying results dynamically.",solution:"Create question data structure, implement answer selection, track progress, calculate scores, use setInterval for timers, and show results.",technologies:["HTML","CSS","JavaScript"],difficulty:"Intermediate",estimatedTime:"3-5 days",realWorldImpact:"Educational tool that teaches state management, user interaction tracking, and building engaging interactive applications."}]}}const a1=["Beginner","Intermediate","Advanced"],l1=/[\u4e00-\u9fff\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af]/,Rm=n=>n?!l1.test(n):!1,c1=(n={})=>{var t,s,r,i,o,l;const e=Array.isArray(n.technologies)?n.technologies.filter(c=>typeof c=="string"&&c.trim().length>0):n.technologies&&typeof n.technologies=="string"?[n.technologies]:[];return e.length===0&&e.push("Not specified"),{title:((t=n.title)==null?void 0:t.trim())||"Untitled Project",description:((s=n.description)==null?void 0:s.trim())||"No description provided yet.",problem:((r=n.problem)==null?void 0:r.trim())||"Problem statement is not available.",solution:((i=n.solution)==null?void 0:i.trim())||"Solution details are not available.",technologies:e,difficulty:a1.includes(n.difficulty)?n.difficulty:"Intermediate",estimatedTime:((o=n.estimatedTime)==null?void 0:o.trim())||"1-2 weeks",realWorldImpact:((l=n.realWorldImpact)==null?void 0:l.trim())||"Helps build practical skills for this topic.",repositoryUrl:n.repositoryUrl}},Pm=(n=[])=>n.filter(e=>e&&typeof e=="object").filter(e=>{const t=typeof e.title=="string"?e.title:"",s=typeof e.description=="string"?e.description:"";return t.trim()?Rm(t)&&(!s||Rm(s)):!1}).map(e=>c1(e)),u1=()=>{const{isDarkMode:n}=De(),e=He(),[t,s]=V.useState(null),[r]=V.useState(new o1),[i,o]=V.useState(""),[l,c]=V.useState("youtube"),[u,m]=V.useState([]),[p,g]=V.useState([]),[x,b]=V.useState(""),[T,C]=V.useState(!1),[k,R]=V.useState(!0),[P,L]=V.useState("");V.useEffect(()=>{try{const _=new py;s(_)}catch(_){console.error("Failed to initialize ProjectSuggestionService:",_)}},[]),V.useEffect(()=>{(async()=>{R(!0);try{const w=await r.fetchTrendingRepos(),S=Pm(w).slice(0,9);g(S)}catch(w){console.error("Error fetching trending projects:",w),g([])}finally{R(!1)}})()},[r]),V.useEffect(()=>{i.trim()&&(/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/.test(i.trim())?c("youtube"):c("text"))},[i]);const U=async()=>{if(!i.trim()){L("Please enter a YouTube URL or text");return}if(!t){L("AI service is not available. Please configure your Google Cloud API key.");return}C(!0),L(""),m([]),b("");try{const _=await t.generateProjectIdeas(i.trim()),w=Pm(_.projects||[]);m(w),b(_.summary||""),w.length===0&&L("No valid project ideas were generated. Please refine your input and try again.")}catch(_){L((_==null?void 0:_.message)||"Failed to generate project ideas. Please try again."),console.error("Generate error:",_)}finally{C(!1)}},F=_=>{switch(_){case"Beginner":return n?"bg-green-900/30 text-green-400 border-green-700":"bg-green-50 text-green-700 border-green-200";case"Intermediate":return n?"bg-yellow-900/30 text-yellow-400 border-yellow-700":"bg-yellow-50 text-yellow-700 border-yellow-200";case"Advanced":return n?"bg-red-900/30 text-red-400 border-red-700":"bg-red-50 text-red-700 border-red-200";default:return n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}},I=_=>{e("/project-hints",{state:{project:_}})};return a.jsx("div",{className:"px-6 lg:px-8 py-8",children:a.jsxs("div",{className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-6 shadow-lg`,children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${n?"bg-purple-900/30":"bg-purple-100"}`,children:a.jsx(cs,{size:24,className:"text-purple-600"})}),a.jsx("h1",{className:`text-2xl font-bold ${n?"text-white":"text-gray-900"}`,children:"AI Project Suggestion Generator"})]}),a.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Get personalized project ideas based on real-world problems from YouTube videos or text content"}),l==="youtube"&&a.jsxs("div",{className:`mt-3 p-3 rounded-lg text-xs ${n?"bg-blue-900/20 border-blue-700 text-blue-300":"bg-blue-50 border-blue-200 text-blue-800"} border`,children:[a.jsx("strong",{children:"Note:"}),` The AI will analyze the YouTube video content. If the results don't match the video topic, try pasting the video description or transcript in the "Text Input" mode instead.`]})]}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsxs("button",{onClick:()=>c("youtube"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="youtube"?"bg-blue-600 text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(nd,{size:16}),"YouTube URL"]}),a.jsxs("button",{onClick:()=>c("text"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="text"?"bg-blue-600 text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ls,{size:16}),"Text Input"]})]}),a.jsxs("div",{className:"relative",children:[l==="youtube"?a.jsx(nd,{size:20,className:`absolute left-4 top-1/2 -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`}):a.jsx(ls,{size:20,className:`absolute left-4 top-1/2 -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`}),a.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&!T&&(_.preventDefault(),U())},placeholder:l==="youtube"?"Paste YouTube video URL here (e.g., https://www.youtube.com/watch?v=...)":"Paste or type text content here...",className:`w-full pl-12 pr-4 py-3 rounded-lg border ${n?"bg-gray-900 border-gray-700 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500`})]}),a.jsx("button",{onClick:U,disabled:!i.trim()||T,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${!i.trim()||T?"opacity-50 cursor-not-allowed":""} bg-purple-600 hover:bg-purple-700 text-white`,children:T?a.jsxs(a.Fragment,{children:[a.jsx(ds,{size:18,className:"animate-spin"}),a.jsx("span",{children:"Analyzing and Generating Ideas..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Yr,{size:18}),a.jsx("span",{children:"Generate Project Ideas"})]})}),P&&a.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${n?"bg-red-900/30 border-red-700":"bg-red-50 border-red-200"} border`,children:[a.jsx(nn,{size:16,className:"text-red-600"}),a.jsx("span",{className:`text-sm ${n?"text-red-400":"text-red-600"}`,children:P})]})]}),x&&a.jsxs("div",{className:`mb-6 p-4 rounded-lg ${n?"bg-blue-900/20 border-blue-700":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h3",{className:`text-sm font-semibold mb-2 ${n?"text-blue-300":"text-blue-900"}`,children:"Problems Identified:"}),a.jsx("p",{className:`text-sm ${n?"text-blue-200":"text-blue-800"}`,children:x})]}),u.length===0&&!T&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gv,{size:24,className:"text-orange-500"}),a.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-gray-900"}`,children:"Trending Projects from GitHub"})]}),k?a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx(ds,{className:"animate-spin text-blue-500",size:32}),a.jsx("p",{className:`ml-3 text-lg ${n?"text-gray-300":"text-gray-700"}`,children:"Loading trending projects..."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map((_,w)=>a.jsxs("div",{className:`border rounded-xl p-4 ${n?"bg-gray-900/50 border-gray-700":"bg-gray-50 border-gray-200"} hover:shadow-lg hover:border-blue-500 transition-all`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h3",{className:`text-base font-bold flex-1 cursor-pointer ${n?"text-white hover:text-blue-400":"text-gray-900 hover:text-blue-600"} transition-colors`,onClick:()=>I(_),title:"Click to view project hints and structure",children:_.title}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold border ml-2 ${F(_.difficulty)}`,children:_.difficulty})]}),a.jsx("p",{className:`text-xs mb-3 line-clamp-2 ${n?"text-gray-400":"text-gray-600"}`,children:_.description}),a.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:_.technologies.slice(0,3).map((S,N)=>a.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${n?"bg-blue-900/30 text-blue-300 border border-blue-700":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:S},N))}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:`flex items-center gap-1 ${n?"text-gray-400":"text-gray-600"}`,children:[a.jsx(Tt,{size:12}),a.jsx("span",{children:_.estimatedTime})]}),_.repositoryUrl&&a.jsxs("a",{href:_.repositoryUrl,target:"_blank",rel:"noopener noreferrer",onClick:S=>S.stopPropagation(),className:`flex items-center gap-1 px-2 py-1 rounded transition-colors ${n?"bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700 hover:text-gray-900"}`,title:"View on GitHub",children:[a.jsx(zl,{size:12}),a.jsx("span",{children:"View Repo"})]})]})]},w))})]}),u.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:`text-xl font-bold ${n?"text-white":"text-gray-900"}`,children:["Suggested Projects (",u.length,")"]}),a.jsx("div",{className:"grid gap-4",children:u.map((_,w)=>a.jsxs("div",{onClick:()=>I(_),className:`border rounded-xl p-5 cursor-pointer ${n?"bg-gray-900/50 border-gray-700":"bg-gray-50 border-gray-200"} hover:shadow-lg hover:border-blue-500 transition-all`,title:"Click to view project hints and structure",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-lg font-bold mb-2 ${n?"text-white":"text-gray-900"}`,children:_.title}),a.jsx("p",{className:`text-sm mb-3 ${n?"text-gray-300":"text-gray-700"}`,children:_.description})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${F(_.difficulty)}`,children:_.difficulty})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(tr,{size:14,className:n?"text-red-400":"text-red-600"}),a.jsx("span",{className:`text-xs font-semibold ${n?"text-gray-400":"text-gray-600"}`,children:"Problem:"})]}),a.jsx("p",{className:`text-sm ml-6 ${n?"text-gray-300":"text-gray-700"}`,children:_.problem})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(cs,{size:14,className:n?"text-green-400":"text-green-600"}),a.jsx("span",{className:`text-xs font-semibold ${n?"text-gray-400":"text-gray-600"}`,children:"Solution:"})]}),a.jsx("p",{className:`text-sm ml-6 ${n?"text-gray-300":"text-gray-700"}`,children:_.solution})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Gl,{size:14,className:n?"text-blue-400":"text-blue-600"}),a.jsx("span",{className:`text-xs font-semibold ${n?"text-gray-400":"text-gray-600"}`,children:"Technologies:"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 ml-6",children:_.technologies.map((S,N)=>a.jsx("span",{className:`px-2 py-1 rounded text-xs ${n?"bg-blue-900/30 text-blue-300 border border-blue-700":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:S},N))})]}),a.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tt,{size:14,className:n?"text-gray-400":"text-gray-600"}),a.jsx("span",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:_.estimatedTime})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ht,{size:14,className:n?"text-purple-400":"text-purple-600"}),a.jsxs("span",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:["Impact: ",_.realWorldImpact]})]})]})]})]},w))})]})]})})},d1=()=>{var x;const{isDarkMode:n}=De(),e=ql(),t=He(),s=(x=e.state)==null?void 0:x.project,[r,i]=V.useState(null),[o,l]=V.useState(null),[c,u]=V.useState(!1),[m,p]=V.useState("");V.useEffect(()=>{try{const b=new py;i(b)}catch(b){console.error("Failed to initialize ProjectSuggestionService:",b)}},[]),V.useEffect(()=>{if(!s){p("No project data found. Please go back and select a project.");return}r&&r.isEnabled()&&!o&&!c?(async()=>{u(!0),p("");try{const T=await r.generateProjectHints(s.title,s.problem,s.technologies);l(T),T.hints.length===0&&T.summary&&p(T.summary)}catch(T){console.error("Error fetching project hints:",T),p(`Failed to fetch project hints: ${T.message||"Unknown error"}`)}finally{u(!1)}})():r&&!r.isEnabled()&&p("AI service is not available. Please configure your Google Cloud API key.")},[r,s,o,c]);const g=()=>{t("/project-suggestion")};return s?a.jsx("div",{className:`px-6 lg:px-8 py-8 ${n?"bg-gray-900 text-gray-100":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-6 shadow-lg`,children:[a.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg mb-6 transition-colors ${n?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:[a.jsx(us,{size:18})," Back to Projects"]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${n?"bg-blue-900/30":"bg-blue-100"}`,children:a.jsx(Oe,{size:24,className:"text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:`text-2xl font-bold ${n?"text-white":"text-gray-900"}`,children:s.title}),a.jsxs("p",{className:`text-sm mt-1 ${n?"text-gray-400":"text-gray-600"}`,children:["Difficulty: ",a.jsx("span",{className:`font-semibold ${s.difficulty==="Beginner"?"text-green-500":s.difficulty==="Intermediate"?"text-yellow-500":"text-red-500"}`,children:s.difficulty})," | Estimated Time: ",s.estimatedTime]})]})]})}),a.jsxs("div",{className:`mb-6 p-4 rounded-lg ${n?"bg-red-900/20 border-red-700":"bg-red-50 border-red-200"} border`,children:[a.jsxs("h2",{className:`text-lg font-semibold mb-2 flex items-center gap-2 ${n?"text-red-300":"text-red-900"}`,children:[a.jsx(tr,{size:20,className:"text-red-500"})," Problem Statement"]}),a.jsx("p",{className:`${n?"text-red-200":"text-red-800"}`,children:s.problem}),a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:s.technologies.map((b,T)=>a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n?"bg-blue-900/30 text-blue-300 border border-blue-700":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:b},T))})]}),c&&a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx(ds,{className:"animate-spin text-blue-500",size:32}),a.jsx("p",{className:`ml-3 text-lg ${n?"text-gray-300":"text-gray-700"}`,children:"Generating project hints..."})]}),m&&!c&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 ${n?"bg-red-900/30 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-800"} border`,children:[a.jsx(nn,{size:20}),a.jsx("p",{children:m})]}),o&&o.hints.length>0&&!c&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Yr,{size:24,className:"text-purple-500"}),a.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-gray-900"}`,children:"Project Hints & Structure"})]}),o.hints.map((b,T)=>a.jsxs("div",{className:`p-5 rounded-lg ${n?"bg-gray-900/50 border-gray-700":"bg-gray-50 border-gray-200"} border`,children:[a.jsxs("h3",{className:`text-lg font-semibold mb-3 flex items-center gap-2 ${n?"text-white":"text-gray-900"}`,children:[b.code?a.jsx(Gl,{size:20,className:"text-green-500"}):a.jsx(cs,{size:20,className:"text-yellow-500"}),b.heading]}),a.jsx("div",{className:`space-y-2 ${n?"text-gray-300":"text-gray-700"}`,children:b.content.map((C,k)=>a.jsx("p",{className:"text-sm leading-relaxed",children:C},k))}),b.code&&a.jsx("div",{className:"mt-4",children:a.jsx("pre",{className:`p-4 rounded-lg overflow-x-auto text-sm ${n?"bg-gray-950 text-green-400 border border-gray-700":"bg-gray-900 text-green-300 border border-gray-300"}`,children:a.jsx("code",{className:`language-${b.code.language}`,children:b.code.snippet})})})]},T)),o.summary&&a.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-blue-900/20 border-blue-700 text-blue-200":"bg-blue-50 border-blue-200 text-blue-800"} border`,children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Summary & Next Steps"}),a.jsx("p",{className:"text-sm",children:o.summary})]})]})]})}):a.jsx("div",{className:`px-6 lg:px-8 py-8 ${n?"bg-gray-900 text-gray-100":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-2xl p-6 shadow-lg`,children:[a.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg mb-4 transition-colors ${n?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:[a.jsx(us,{size:18})," Back to Projects"]}),a.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 ${n?"bg-red-900/30 border-red-700":"bg-red-50 border-red-200"} border`,children:[a.jsx(nn,{className:"text-red-500",size:24}),a.jsx("p",{className:`text-lg font-medium ${n?"text-red-400":"text-red-600"}`,children:m||"No project data found"})]})]})})},h1=()=>{const{isDarkMode:n}=De(),{user:e,isAuthenticated:t}=Gt(),s=He(),[r,i]=V.useState([]),[o,l]=V.useState(!0),[c,u]=V.useState({totalCourses:0,publishedCourses:0,totalRevenue:0,totalStudents:0});V.useEffect(()=>{if(!t||!e){s("/login");return}if(e.userType!=="instructor"){s("/dashboard");return}m()},[e,t,s]);const m=async()=>{if(e)try{l(!0);const{auth:x}=await is(async()=>{const{auth:k}=await Promise.resolve().then(()=>oo);return{auth:k}},void 0),b=x==null?void 0:x.currentUser;if(!b){le.error("You must be logged in to view courses"),l(!1);return}const T=await St.getInstructorCourses(b.uid);i(T);const C=T.filter(k=>k.isPublished).length;u({totalCourses:T.length,publishedCourses:C,totalRevenue:0,totalStudents:0})}catch(x){console.error("Error loading courses:",x),le.error("Failed to load courses")}finally{l(!1)}},p=async x=>{if(window.confirm("Are you sure you want to delete this course?"))try{await St.deleteCourse(x),le.success("Course deleted successfully"),m()}catch(b){console.error("Error deleting course:",b),le.error("Failed to delete course")}},g=async x=>{try{await St.updateCourse(x.id,{isPublished:!x.isPublished}),le.success(x.isPublished?"Course unpublished":"Course published"),m()}catch(b){console.error("Error updating course:",b),le.error("Failed to update course")}};return o?a.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900":"bg-[#F5F1EB]"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:n?"text-gray-300":"text-gray-600",children:"Loading your courses..."})]})}):a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:`text-4xl font-bold mb-2 ${n?"text-white":"text-gray-900"}`,children:"Instructor Dashboard"}),a.jsx("p",{className:`text-lg ${n?"text-gray-400":"text-gray-600"}`,children:"Manage your courses and track your performance"})]}),a.jsxs(J.button,{onClick:()=>s("/instructor/course-upload"),className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 ${n?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white"} shadow-lg hover:shadow-xl`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(ho,{size:20}),"Create New Course"]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`p-6 rounded-xl shadow-lg ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:`p-3 rounded-lg ${n?"bg-blue-900/30":"bg-blue-100"}`,children:a.jsx(Oe,{className:`${n?"text-blue-400":"text-blue-600"}`,size:24})})}),a.jsx("h3",{className:`text-2xl font-bold mb-1 ${n?"text-white":"text-gray-900"}`,children:c.totalCourses}),a.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Total Courses"})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`p-6 rounded-xl shadow-lg ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:`p-3 rounded-lg ${n?"bg-green-900/30":"bg-green-100"}`,children:a.jsx(zs,{className:`${n?"text-green-400":"text-green-600"}`,size:24})})}),a.jsx("h3",{className:`text-2xl font-bold mb-1 ${n?"text-white":"text-gray-900"}`,children:c.publishedCourses}),a.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Published Courses"})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`p-6 rounded-xl shadow-lg ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:`p-3 rounded-lg ${n?"bg-purple-900/30":"bg-purple-100"}`,children:a.jsx("span",{className:`text-2xl font-bold ${n?"text-purple-400":"text-purple-600"}`,children:"â‚¹"})})}),a.jsxs("h3",{className:`text-2xl font-bold mb-1 ${n?"text-white":"text-gray-900"}`,children:["â‚¹",c.totalRevenue.toLocaleString("en-IN")]}),a.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Total Revenue"})]}),a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`p-6 rounded-xl shadow-lg ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:`p-3 rounded-lg ${n?"bg-orange-900/30":"bg-orange-100"}`,children:a.jsx(Je,{className:`${n?"text-orange-400":"text-orange-600"}`,size:24})})}),a.jsx("h3",{className:`text-2xl font-bold mb-1 ${n?"text-white":"text-gray-900"}`,children:c.totalStudents}),a.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"Total Students"})]})]}),a.jsxs("div",{className:`rounded-xl shadow-lg p-6 ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsx("h2",{className:`text-2xl font-bold ${n?"text-white":"text-gray-900"}`,children:"My Courses"})}),r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Oe,{className:`mx-auto mb-4 ${n?"text-gray-600":"text-gray-400"}`,size:64}),a.jsx("h3",{className:`text-xl font-semibold mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"No courses yet"}),a.jsx("p",{className:`mb-6 ${n?"text-gray-500":"text-gray-600"}`,children:"Create your first course to start teaching students"}),a.jsxs(J.button,{onClick:()=>s("/instructor/course-upload"),className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${n?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(ho,{size:20,className:"inline mr-2"}),"Create Your First Course"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((x,b)=>a.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.1},className:`rounded-xl overflow-hidden border transition-all duration-200 hover:shadow-xl ${n?"bg-gray-700 border-gray-600 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-500 to-purple-600",children:[x.thumbnailUrl?a.jsx("img",{src:x.thumbnailUrl,alt:x.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(Oe,{className:"text-white",size:48})}),a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.isPublished?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:x.isPublished?"Published":"Draft"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:`font-bold text-lg mb-2 line-clamp-2 ${n?"text-white":"text-gray-900"}`,children:x.title}),a.jsx("p",{className:`text-sm mb-4 line-clamp-2 ${n?"text-gray-400":"text-gray-600"}`,children:x.description}),a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:`${n?"text-gray-400":"text-gray-600"}`,children:[x.durationHours,"h"]}),a.jsxs("span",{className:`font-bold ${n?"text-blue-400":"text-blue-600"}`,children:["â‚¹",x.price.toLocaleString("en-IN")]})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>g(x),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${x.isPublished?n?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700":n?"bg-green-600 hover:bg-green-500 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:x.isPublished?a.jsxs(a.Fragment,{children:[a.jsx(uo,{size:16,className:"inline mr-1"}),"Unpublish"]}):a.jsxs(a.Fragment,{children:[a.jsx(zs,{size:16,className:"inline mr-1"}),"Publish"]})}),a.jsx("button",{onClick:()=>s(`/instructor/course-upload/${x.id}`),className:`px-3 py-2 rounded-lg transition-colors ${n?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:a.jsx(yv,{size:16})}),a.jsx("button",{onClick:()=>p(x.id),className:`px-3 py-2 rounded-lg transition-colors ${n?"bg-red-600 hover:bg-red-500 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:a.jsx(Om,{size:16})})]})]})]},x.id))})]})]})})};class f1{async uploadVideo(e,t,s){try{if(!et||typeof et=="object"&&Object.keys(et).length===0)throw new Error("Firebase Storage is not configured. Please check your Firebase configuration and ensure VITE_FIREBASE_STORAGE_BUCKET is set in your .env file.");const r=Qa(et,t),i=Hh(r,e);return new Promise((o,l)=>{i.on("state_changed",c=>{const u=c.bytesTransferred/c.totalBytes*100;s&&s(u)},c=>{console.error("Upload error:",c),l(new Error(`Failed to upload video: ${c.message}`))},async()=>{try{const c=await zh(i.snapshot.ref);o(c)}catch(c){l(new Error(`Failed to get download URL: ${c.message}`))}})})}catch(r){throw console.error("Storage upload error:",r),new Error(`Failed to upload video: ${r.message}`)}}async uploadImage(e,t,s){try{if(!et||typeof et=="object"&&Object.keys(et).length===0)throw new Error("Firebase Storage is not configured. Please check your Firebase configuration and ensure VITE_FIREBASE_STORAGE_BUCKET is set in your .env file.");const r=Qa(et,t),i=Hh(r,e);return new Promise((o,l)=>{i.on("state_changed",c=>{const u=c.bytesTransferred/c.totalBytes*100;s&&s(u)},c=>{console.error("Upload error:",c),l(new Error(`Failed to upload image: ${c.message}`))},async()=>{try{const c=await zh(i.snapshot.ref);o(c)}catch(c){l(new Error(`Failed to get download URL: ${c.message}`))}})})}catch(r){throw console.error("Storage upload error:",r),new Error(`Failed to upload image: ${r.message}`)}}async deleteFile(e){try{if(!et||typeof et=="object"&&Object.keys(et).length===0)throw new Error("Firebase Storage is not configured. Please check your Firebase configuration and ensure VITE_FIREBASE_STORAGE_BUCKET is set in your .env file.");const t=Qa(et,e);await tA(t)}catch(t){throw console.error("Error deleting file:",t),new Error(`Failed to delete file: ${t.message}`)}}}const km=new f1,Dm=()=>{const{isDarkMode:n}=De(),{user:e,isAuthenticated:t}=Gt(),s=He(),{courseId:r}=Mm(),i=!!r,[o,l]=V.useState(!1),[c,u]=V.useState(!1),[m,p]=V.useState(null),[g,x]=V.useState(!1),[b,T]=V.useState({}),[C,k]=V.useState({}),[R,P]=V.useState({title:"",description:"",category:"",difficultyLevel:"Beginner",durationHours:0,price:0,isPublished:!1,thumbnailUrl:"",videoUrl:""}),[L,U]=V.useState([]);V.useEffect(()=>{if(!t||!e){s("/login");return}if(e.userType!=="instructor"){s("/dashboard");return}i&&r&&F()},[e,t,s,i,r]);const F=async()=>{if(r)try{l(!0);const z=await St.getCourseById(r);z&&(P({title:z.title,description:z.description,category:z.category,difficultyLevel:z.difficultyLevel,durationHours:z.durationHours,price:z.price,isPublished:z.isPublished,thumbnailUrl:z.thumbnailUrl||"",videoUrl:z.videoUrl||""}),U(z.lessons||[]),z.thumbnailUrl&&p(z.thumbnailUrl))}catch(z){console.error("Error loading course:",z),le.error("Failed to load course")}finally{l(!1)}},I=z=>{const{name:X,value:ie,type:ce}=z.target;P(be=>({...be,[X]:ce==="number"?parseFloat(ie)||0:ce==="checkbox"?z.target.checked:ie}))},_=async z=>{var ie;const X=(ie=z.target.files)==null?void 0:ie[0];if(X){if(!X.type.startsWith("image/")){le.error("Please upload an image file");return}if(X.size>5*1024*1024){le.error("Image size should be less than 5MB");return}try{x(!0);const ce=new FileReader;ce.onloadend=()=>{p(ce.result)},ce.readAsDataURL(X);const{auth:be}=await is(async()=>{const{auth:fe}=await Promise.resolve().then(()=>oo);return{auth:fe}},void 0),Ve=be==null?void 0:be.currentUser;if(!Ve)throw new Error("You must be logged in to upload files. Please log in and try again.");const O=Ve.uid,H=Date.now(),re=X.name.split(".").pop(),te=`courses/thumbnails/${O}/${H}.${re}`,K=await km.uploadImage(X,te,fe=>{console.log(`Thumbnail upload: ${fe}%`)});P(fe=>({...fe,thumbnailUrl:K})),le.success("Thumbnail uploaded successfully")}catch(ce){console.error("Error uploading thumbnail:",ce),le.error(`Failed to upload thumbnail: ${ce.message}`),p(null)}finally{x(!1)}}},w=async(z,X)=>{if(!X.type.startsWith("video/")){le.error("Please upload a video file");return}if(X.size>500*1024*1024){le.error("Video size should be less than 500MB");return}try{T(K=>({...K,[z]:!0}));const{auth:ie}=await is(async()=>{const{auth:K}=await Promise.resolve().then(()=>oo);return{auth:K}},void 0),ce=ie==null?void 0:ie.currentUser;if(!ce)throw new Error("You must be logged in to upload files. Please log in and try again.");const be=ce.uid,Ve=r||"new",O=Date.now(),H=X.name.split(".").pop(),re=`courses/${Ve}/videos/lesson${z+1}_${O}.${H}`,te=await km.uploadVideo(X,re,K=>{k(fe=>({...fe,[z]:K}))});N(z,"videoUrl",te),le.success(`Video uploaded successfully for lesson ${z+1}`)}catch(ie){console.error("Error uploading video:",ie),le.error(`Failed to upload video: ${ie.message}`)}finally{T(ie=>({...ie,[z]:!1})),k(ie=>{const ce={...ie};return delete ce[z],ce})}},S=()=>{U([...L,{title:"",description:"",videoUrl:"",duration:0,order:L.length+1,resources:[]}])},N=(z,X,ie)=>{const ce=[...L];ce[z]={...ce[z],[X]:ie},U(ce)},D=z=>{U(L.filter((X,ie)=>ie!==z).map((X,ie)=>({...X,order:ie+1})))},A=z=>{const X=[...L];X[z].resources||(X[z].resources=[]),X[z].resources.push({title:"",type:"link",url:""}),U(X)},$=(z,X,ie,ce)=>{const be=[...L];be[z].resources&&(be[z].resources[X]={...be[z].resources[X],[ie]:ce},U(be))},Q=(z,X)=>{const ie=[...L];ie[z].resources&&(ie[z].resources=ie[z].resources.filter((ce,be)=>be!==X),U(ie))},G=()=>L.reduce((z,X)=>z+X.duration,0),ne=async z=>{if(z.preventDefault(),!!e){if(!R.title.trim()){le.error("Please enter a course title");return}if(!R.description.trim()){le.error("Please enter a course description");return}if(!R.category.trim()){le.error("Please select a category");return}if(R.price<0){le.error("Price cannot be negative");return}if(L.length===0){le.error("Please add at least one lesson");return}try{u(!0);const{auth:X}=await is(async()=>{const{auth:be}=await Promise.resolve().then(()=>oo);return{auth:be}},void 0),ie=X==null?void 0:X.currentUser;if(!ie)throw new Error("You must be logged in to create courses. Please log in and try again.");const ce={title:R.title,description:R.description,instructorId:ie.uid,instructorName:`${e.firstName} ${e.lastName}`,category:R.category,difficultyLevel:R.difficultyLevel,durationHours:R.durationHours||Math.ceil(G()/60),price:R.price,isPublished:R.isPublished,thumbnailUrl:R.thumbnailUrl,videoUrl:R.videoUrl,lessons:L};if(i&&r)await St.updateCourse(r,ce),le.success("Course updated successfully!");else{const be=await St.createCourse(ce);le.success("Course created successfully!"),s(`/instructor/course-upload/${be}`)}s("/instructor/dashboard")}catch(X){console.error("Error saving course:",X),le.error(`Failed to ${i?"update":"create"} course: ${X.message}`)}finally{u(!1)}}},de=["Web Development","Data Science","Mobile Development","Design","Business","Marketing","Finance","Programming","Cloud Computing","Cybersecurity","AI & Machine Learning","Other"];return o?a.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900":"bg-[#F5F1EB]"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:n?"text-gray-300":"text-gray-600",children:"Loading course..."})]})}):a.jsx("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>s("/instructor/dashboard"),className:`flex items-center gap-2 mb-4 transition-colors ${n?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(us,{size:20}),"Back to Dashboard"]}),a.jsx("h1",{className:"text-4xl font-bold",children:i?"Edit Course":"Create New Course"}),a.jsx("p",{className:`mt-2 ${n?"text-gray-400":"text-gray-600"}`,children:i?"Update your course details":"Fill in the details to create your course"})]})}),a.jsx("form",{onSubmit:ne,children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:`rounded-xl shadow-lg p-6 ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("h2",{className:`text-xl font-bold mb-4 ${n?"text-white":"text-gray-900"}`,children:"Basic Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"Course Title *"}),a.jsx("input",{type:"text",name:"title",value:R.title,onChange:I,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${n?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"e.g., Complete Web Development Bootcamp"})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"Description *"}),a.jsx("textarea",{name:"description",value:R.description,onChange:I,required:!0,rows:6,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${n?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Describe what students will learn in this course..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"Category *"}),a.jsxs("select",{name:"category",value:R.category,onChange:I,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${n?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,children:[a.jsx("option",{value:"",children:"Select Category"}),de.map(z=>a.jsx("option",{value:z,children:z},z))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"Difficulty Level *"}),a.jsxs("select",{name:"difficultyLevel",value:R.difficultyLevel,onChange:I,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${n?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,children:[a.jsx("option",{value:"Beginner",children:"Beginner"}),a.jsx("option",{value:"Intermediate",children:"Intermediate"}),a.jsx("option",{value:"Advanced",children:"Advanced"})]})]})]})]})]}),a.jsxs("div",{className:`rounded-xl shadow-lg p-6 ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-gray-900"}`,children:"Course Lessons *"}),a.jsxs("button",{type:"button",onClick:S,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:[a.jsx(ho,{size:18}),"Add Lesson"]})]}),L.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Oe,{className:`mx-auto mb-4 ${n?"text-gray-600":"text-gray-400"}`,size:48}),a.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:'No lessons added yet. Click "Add Lesson" to get started.'})]}):a.jsx("div",{className:"space-y-4",children:L.map((z,X)=>{var ie;return a.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:`font-semibold ${n?"text-white":"text-gray-900"}`,children:["Lesson ",X+1]}),a.jsx("button",{type:"button",onClick:()=>D(X),className:`p-2 rounded-lg transition-colors ${n?"text-red-400 hover:bg-red-900/20":"text-red-600 hover:bg-red-50"}`,children:a.jsx(Om,{size:18})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",value:z.title,onChange:ce=>N(X,"title",ce.target.value),placeholder:"Lesson Title",className:`w-full px-3 py-2 rounded-lg border ${n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`}),a.jsx("textarea",{value:z.description,onChange:ce=>N(X,"description",ce.target.value),placeholder:"Lesson Description",rows:2,className:`w-full px-3 py-2 rounded-lg border ${n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:`flex-1 ${n?"text-gray-300":"text-gray-700"}`,children:[a.jsx("span",{className:"block text-sm font-medium mb-2",children:"Video"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"file",accept:"video/*",onChange:ce=>{var Ve;const be=(Ve=ce.target.files)==null?void 0:Ve[0];be&&w(X,be)},className:"hidden",id:`video-upload-${X}`,disabled:b[X]}),a.jsx("label",{htmlFor:`video-upload-${X}`,className:`flex-1 px-4 py-2 rounded-lg border cursor-pointer text-center transition-colors ${b[X]?n?"bg-gray-600 border-gray-500 text-gray-400 cursor-not-allowed":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed":n?"bg-gray-600 border-gray-500 text-white hover:bg-gray-500":"bg-white border-gray-300 text-gray-900 hover:bg-gray-50"}`,children:b[X]?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading... ",(ie=C[X])==null?void 0:ie.toFixed(0),"%"]}):z.videoUrl?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx(vv,{size:16}),"Change Video"]}):a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx(fo,{size:16}),"Upload Video"]})})]}),z.videoUrl&&a.jsx("p",{className:`text-xs mt-1 ${n?"text-gray-400":"text-gray-600"}`,children:"Video uploaded âœ“"})]}),a.jsx("input",{type:"number",value:z.duration,onChange:ce=>N(X,"duration",parseFloat(ce.target.value)||0),placeholder:"Duration (min)",className:`w-24 px-3 py-2 rounded-lg border ${n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`})]})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-300":"text-gray-700"}`,children:"Resources"}),a.jsx("button",{type:"button",onClick:()=>A(X),className:`text-xs px-2 py-1 rounded transition-colors ${n?"text-blue-400 hover:bg-blue-900/20":"text-blue-600 hover:bg-blue-50"}`,children:"+ Add Resource"})]}),z.resources&&z.resources.map((ce,be)=>a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsxs("select",{value:ce.type,onChange:Ve=>$(X,be,"type",Ve.target.value),className:`flex-1 px-2 py-1 rounded border text-sm ${n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[a.jsx("option",{value:"link",children:"Link"}),a.jsx("option",{value:"pdf",children:"PDF"}),a.jsx("option",{value:"file",children:"File"})]}),a.jsx("input",{type:"text",value:ce.title,onChange:Ve=>$(X,be,"title",Ve.target.value),placeholder:"Resource Title",className:`flex-2 px-2 py-1 rounded border text-sm ${n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`}),a.jsx("input",{type:"url",value:ce.url,onChange:Ve=>$(X,be,"url",Ve.target.value),placeholder:"URL",className:`flex-3 px-2 py-1 rounded border text-sm ${n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`}),a.jsx("button",{type:"button",onClick:()=>Q(X,be),className:`p-1 rounded ${n?"text-red-400 hover:bg-red-900/20":"text-red-600 hover:bg-red-50"}`,children:a.jsx(kn,{size:16})})]},be))]})]})]},X)})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-xl shadow-lg p-6 ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("h2",{className:`text-lg font-bold mb-4 ${n?"text-white":"text-gray-900"}`,children:"Course Thumbnail"}),a.jsx("div",{className:"space-y-4",children:m?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:m,alt:"Thumbnail preview",className:"w-full h-48 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>{p(null),P(z=>({...z,thumbnailUrl:""}))},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600",children:a.jsx(kn,{size:16})})]}):a.jsxs("label",{className:`flex flex-col items-center justify-center w-full h-48 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${n?"border-gray-600 hover:border-gray-500 bg-gray-700":"border-gray-300 hover:border-gray-400 bg-gray-50"}`,children:[a.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[a.jsx(fo,{className:`mb-2 ${n?"text-gray-400":"text-gray-500"}`,size:32}),a.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Click to upload thumbnail"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden"})]})})]}),a.jsxs("div",{className:`rounded-xl shadow-lg p-6 ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[a.jsx("h2",{className:`text-lg font-bold mb-4 ${n?"text-white":"text-gray-900"}`,children:"Pricing & Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"Price (INR) *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-lg font-semibold ${n?"text-gray-400":"text-gray-500"}`,children:"â‚¹"}),a.jsx("input",{type:"number",name:"price",value:R.price,onChange:I,min:"0",step:"1",required:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${n?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"0"})]}),a.jsx("p",{className:"text-xs mt-1 text-gray-500",children:"Set 0 for free courses"})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"Duration (Hours)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Tt,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`,size:20}),a.jsx("input",{type:"number",name:"durationHours",value:R.durationHours,onChange:I,min:"0",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 focus:outline-none focus:ring-2 ${n?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-transparent":"bg-white border-gray-300 text-gray-900 focus:ring-blue-500 focus:border-transparent"}`,placeholder:"Auto-calculated from lessons"})]}),a.jsx("p",{className:"text-xs mt-1 text-gray-500",children:G()>0&&`Total: ${Math.ceil(G()/60)} hours`})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${n?"text-white":"text-gray-900"}`,children:"Publish Course"}),a.jsx("p",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:"Make it visible to students"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",name:"isPublished",checked:R.isPublished,onChange:I,className:"sr-only peer"}),a.jsx("div",{className:`w-11 h-6 rounded-full peer ${n?"bg-gray-600 peer-checked:bg-blue-600":"bg-gray-300 peer-checked:bg-blue-600"} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 transition-colors`,children:a.jsx("div",{className:`absolute top-0.5 left-[2px] w-5 h-5 rounded-full transition-transform ${R.isPublished?"translate-x-5":"translate-x-0"} bg-white`})})]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(J.button,{type:"submit",disabled:c,className:`w-full py-3 px-6 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2 ${n?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white"} shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed`,whileHover:{scale:c?1:1.02},whileTap:{scale:c?1:.98},children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(xv,{size:20}),i?"Update Course":"Create Course"]})}),a.jsx("button",{type:"button",onClick:()=>s("/instructor/dashboard"),className:`w-full py-3 px-6 rounded-xl font-medium transition-all duration-200 ${n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:"Cancel"})]})]})]})})]})})},m1=()=>{const{pathname:n}=ql();V.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[n])},p1=()=>{const{isDarkMode:n}=De(),[e,t]=V.useState(!1),[s,r]=V.useState(""),[i,o]=V.useState(""),[l,c]=V.useState(""),[u,m]=V.useState(!1),[p,g]=V.useState(""),[x,b]=V.useState(null),[T,C]=V.useState(!1),[k,R]=V.useState(""),[P,L]=V.useState(""),[U,F]=V.useState(!1),I=V.useRef(null),_=V.useRef(null);V.useEffect(()=>{try{const G="AIzaSyAncE2TfOjhaU8SxlijCUg7mTD7GoS2oho";G&&G.trim()!==""&&(_.current=new fa(G))}catch(G){console.warn("Failed to initialize Gemini AI for text analysis:",G)}},[]),V.useEffect(()=>{const G=()=>{const ne=window.getSelection();if(ne&&ne.toString().trim().length>0){const de=ne.toString().trim();de.length>10&&(r(de),e||(t(!0),o(""),c(""),g(""),b(null),C(!1)))}};return document.addEventListener("mouseup",G),document.addEventListener("keyup",G),()=>{document.removeEventListener("mouseup",G),document.removeEventListener("keyup",G)}},[e]),V.useEffect(()=>{const G=ne=>{if(I.current&&!I.current.contains(ne.target)){const de=window.getSelection();(!de||de.toString().trim().length===0)&&t(!1)}};return e&&document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[e]);const w=async(G,ne="explain")=>{if(!_.current){g("AI service is not available. Please configure your Google Cloud API key.");return}m(!0),g("");try{const de=_.current.getGenerativeModel({model:"gemini-2.5-flash",generationConfig:{temperature:.7,topP:.95}}),z=ne==="explain"?`Explain this text in 1-2 short sentences. Be direct and simple.

Text: "${G.substring(0,5e3)}${G.length>5e3?"...":""}"

Give a brief, straightforward explanation.`:`Make this text simpler and shorter. Use easy words.

Text: "${G.substring(0,5e3)}${G.length>5e3?"...":""}"

Provide a simple, short version.`,ie=(await de.generateContent(z)).response.text().trim();ne==="explain"?o(ie):c(ie)}catch(de){console.error("Text analysis error:",de),g((de==null?void 0:de.message)||"Failed to analyze text. Please try again.")}finally{m(!1)}},S=()=>{s.trim()&&w(s,"explain")},N=()=>{s.trim()&&w(s,"simplify")},D=async()=>{if(!(!k.trim()||!_.current)){F(!0),g("");try{const G=_.current.getGenerativeModel({model:"gemini-2.5-flash",generationConfig:{temperature:.7,topP:.95}}),ne=`Answer this question briefly and directly.

Selected text: "${s.substring(0,1e3)}"
Question: "${k}"

Give a short, direct answer.`,z=(await G.generateContent(ne)).response.text().trim();L(z)}catch(G){console.error("Follow-up error:",G),g((G==null?void 0:G.message)||"Failed to answer follow-up question.")}finally{F(!1)}}},A=()=>{t(!1),r(""),o(""),c(""),g(""),b(null),C(!1),R(""),L("")};if(V.useEffect(()=>{e&&s&&!i&&!u&&S()},[e,s]),!e)return null;const Q=(()=>{const G=window.getSelection();if(G&&G.rangeCount>0){const de=G.getRangeAt(0).getBoundingClientRect();return{top:de.bottom+window.scrollY+10,left:de.left+window.scrollX}}return{top:window.innerHeight/2,left:window.innerWidth/2}})();return a.jsxs("div",{ref:I,className:"fixed z-[70] w-[420px] max-h-[600px] rounded-2xl overflow-hidden border shadow-2xl flex flex-col",style:{top:`${Math.min(Q.top,window.innerHeight-650)}px`,left:`${Math.min(Q.left,window.innerWidth-440)}px`,backgroundColor:n?"#111827":"#ffffff",borderColor:n?"#374151":"#e5e7eb"},children:[a.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${n?"bg-gray-800":"bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yr,{size:18,className:"text-blue-500"}),a.jsx("span",{className:"font-semibold text-sm",children:"Text Analyzer"})]}),a.jsx("button",{className:"p-1 rounded-md hover:bg-black/5 transition-colors",onClick:A,"aria-label":"Close",children:a.jsx(kn,{size:16})})]}),a.jsxs("div",{className:`flex-1 overflow-y-auto custom-scrollbar ${n?"dark-scrollbar":""} p-4 space-y-4`,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:`text-xs font-medium ${n?"text-gray-300":"text-gray-700"}`,children:"Selected Text"}),a.jsx("div",{className:`p-3 rounded-lg border ${n?"bg-gray-800 border-gray-700 text-gray-200":"bg-gray-50 border-gray-200 text-gray-800"} text-sm max-h-32 overflow-y-auto custom-scrollbar`,children:s})]}),p&&a.jsxs("div",{className:`p-3 rounded-lg flex items-start gap-2 ${n?"bg-red-900/20 border border-red-800":"bg-red-50 border border-red-200"}`,children:[a.jsx(kn,{size:16,className:"text-red-500 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:`text-sm ${n?"text-red-400":"text-red-700"}`,children:p})]}),u&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(ds,{className:"animate-spin text-blue-500",size:24}),a.jsx("span",{className:`ml-3 ${n?"text-gray-300":"text-gray-700"}`,children:"Analyzing..."})]}),i&&!u&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:`p-4 rounded-lg ${n?"bg-gray-800":"bg-gray-50"}`,children:a.jsx("p",{className:`text-sm leading-relaxed ${n?"text-gray-200":"text-gray-800"}`,children:i})}),a.jsxs("div",{className:"text-xs flex items-center gap-1 text-gray-500",children:[a.jsx(Yr,{size:12}),a.jsx("span",{children:"Explained with Gemini AI"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>b(x==="up"?null:"up"),className:`p-2 rounded-lg transition-colors ${x==="up"?"bg-blue-600 text-white":n?"bg-gray-700 text-gray-400 hover:bg-gray-600":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,"aria-label":"Thumbs up",children:a.jsx($m,{size:16})}),a.jsx("button",{onClick:()=>b(x==="down"?null:"down"),className:`p-2 rounded-lg transition-colors ${x==="down"?"bg-red-600 text-white":n?"bg-gray-700 text-gray-400 hover:bg-gray-600":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,"aria-label":"Thumbs down",children:a.jsx(_v,{size:16})})]})]}),l&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:`text-sm font-semibold ${n?"text-white":"text-gray-900"}`,children:"Simplified Version"}),a.jsx("div",{className:`p-4 rounded-lg ${n?"bg-gray-800":"bg-gray-50"}`,children:a.jsx("p",{className:`text-sm leading-relaxed ${n?"text-gray-200":"text-gray-800"}`,children:l})})]}),T&&a.jsxs("div",{className:"space-y-3 border-t pt-4",style:{borderColor:n?"#374151":"#e5e7eb"},children:[a.jsx("h4",{className:`text-sm font-semibold ${n?"text-white":"text-gray-900"}`,children:"Ask a Follow-up"}),a.jsx("textarea",{value:k,onChange:G=>R(G.target.value),placeholder:"Ask a question about the selected text...",className:`w-full p-3 rounded-lg border resize-none text-sm ${n?"bg-gray-800 border-gray-700 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500`,rows:3}),a.jsx("button",{onClick:D,disabled:!k.trim()||U,className:`w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${!k.trim()||U?"opacity-50 cursor-not-allowed":""} bg-blue-600 hover:bg-blue-700 text-white`,children:U?a.jsxs(a.Fragment,{children:[a.jsx(ds,{size:16,className:"animate-spin"}),a.jsx("span",{children:"Answering..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(sd,{size:16}),a.jsx("span",{children:"Ask"})]})}),P&&a.jsx("div",{className:`p-4 rounded-lg ${n?"bg-gray-800":"bg-gray-50"}`,children:a.jsx("p",{className:`text-sm leading-relaxed ${n?"text-gray-200":"text-gray-800"}`,children:P})})]})]}),a.jsxs("div",{className:`border-t p-3 flex gap-2 ${n?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:[a.jsxs("button",{onClick:N,disabled:u||!s.trim(),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${u||!s.trim()?"opacity-50 cursor-not-allowed":""} ${n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:[a.jsx(jm,{size:16}),a.jsx("span",{children:"Simplify"})]}),a.jsxs("button",{onClick:()=>C(!T),disabled:u||!s.trim(),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${u||!s.trim()?"opacity-50 cursor-not-allowed":""} ${T?"bg-blue-600 hover:bg-blue-700 text-white":n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:[a.jsx(sd,{size:16}),a.jsx("span",{children:"Ask a follow-up"})]})]})]})};function g1(){const{isDarkMode:n}=De();return V.useEffect(()=>{try{aA()}catch(e){console.error("Error initializing auth:",e)}},[]),a.jsxs(Gy,{children:[a.jsx(y1,{}),a.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${n?"bg-gray-900 text-white":"bg-[#F5F1EB] text-gray-900"}`,children:[a.jsx("div",{className:"px-6 lg:px-8 pt-6 relative z-50",children:a.jsx(lA,{})}),a.jsx("main",{children:a.jsxs(Hy,{children:[a.jsx(Se,{path:"/",element:a.jsx(uA,{})}),a.jsx(Se,{path:"/login",element:a.jsx(dA,{})}),a.jsx(Se,{path:"/signup",element:a.jsx(hA,{})}),a.jsx(Se,{path:"/courses",element:a.jsx(mA,{})}),a.jsx(Se,{path:"/course/:courseId",element:a.jsx(vA,{})}),a.jsx(Se,{path:"/mock-interview",element:a.jsx(_A,{})}),a.jsx(Se,{path:"/soft-skills",element:a.jsx(wA,{})}),a.jsx(Se,{path:"/soft-skills/communication",element:a.jsx(TA,{})}),a.jsx(Se,{path:"/soft-skills/leadership",element:a.jsx(EA,{})}),a.jsx(Se,{path:"/soft-skills/time-management",element:a.jsx(IA,{})}),a.jsx(Se,{path:"/soft-skills/problem-solving",element:a.jsx(CA,{})}),a.jsx(Se,{path:"/soft-skills/emotional-intelligence",element:a.jsx(AA,{})}),a.jsx(Se,{path:"/soft-skills/adaptability",element:a.jsx(SA,{})}),a.jsx(Se,{path:"/youtube-results",element:a.jsx(RA,{})}),a.jsx(Se,{path:"/video-player",element:a.jsx(xD,{})}),a.jsx(Se,{path:"/dashboard",element:a.jsx(_D,{})}),a.jsx(Se,{path:"/resume-builder",element:a.jsx(YD,{})}),a.jsx(Se,{path:"/career-path",element:a.jsx(XD,{})}),a.jsx(Se,{path:"/ats-checker",element:a.jsx(s1,{})}),a.jsx(Se,{path:"/ask-anything",element:a.jsx(i1,{})}),a.jsx(Se,{path:"/project-suggestion",element:a.jsx(u1,{})}),a.jsx(Se,{path:"/project-hints",element:a.jsx(d1,{})}),a.jsx(Se,{path:"/instructor/dashboard",element:a.jsx(h1,{})}),a.jsx(Se,{path:"/instructor/course-upload",element:a.jsx(Dm,{})}),a.jsx(Se,{path:"/instructor/course-upload/:courseId",element:a.jsx(Dm,{})})]})}),a.jsx(bv,{position:"top-right",toastOptions:{duration:4e3,style:{background:n?"#374151":"#ffffff",color:n?"#ffffff":"#111827",border:n?"1px solid #4B5563":"1px solid #E5E7EB"}}}),a.jsx(p1,{})]})]})}function y1(){return m1(),null}Gm(document.getElementById("root")).render(a.jsx(V.StrictMode,{children:a.jsx(g1,{})}));
